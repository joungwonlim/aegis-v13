# 문서 정합성 규칙 (Docs Consistency Rule)

## 핵심 원칙

**문서 구조 변경 시, 관련된 모든 문서를 함께 업데이트해야 한다.**

---

## 문서 SSOT (Single Source of Truth)

| 문서 | 역할 | 변경 시 확인 |
|------|------|--------------|
| `docs/README.md` | 폴더 구조 설명 | 폴더/파일 변경 시 필수 업데이트 |
| `docs/guide/` | 가이드 문서 | 기능 변경 시 필수 업데이트 |

---

## 변경 유형별 체크리스트

### 1. 폴더 생성/삭제/이름 변경

```
□ docs/README.md - 폴더 구조 다이어그램 업데이트
□ CLAUDE.md - 구조 설명 업데이트 (필요시)
```

### 2. 파일 생성/삭제/이동

```
□ docs/README.md - 폴더 구조 다이어그램 업데이트 (필요시)
□ 이동된 파일을 참조하는 다른 문서들 링크 수정
```

### 3. 파일 이름 변경

```
□ 해당 파일을 참조하는 다른 문서들 링크 수정
```

---

## 작업 완료 전 필수 확인

문서 관련 작업 후, 다음 명령어로 정합성 확인:

```bash
# 현재 폴더 구조 확인
find docs/ -type f -name "*.md" | sort

# README.md의 폴더 구조와 비교
cat docs/README.md
```

---

## 금지 사항

1. **폴더/파일 변경 후 README.md 미수정** ❌
2. **문서 삭제 후 참조 링크 미정리** ❌
3. **파일 이동 후 기존 경로 참조 방치** ❌

---

## 자동 체크 (권장)

작업 완료 시 다음 패턴 검색으로 깨진 링크 확인:

```bash
# 존재하지 않는 경로 참조 찾기
grep -rn "\[.*\](.*\.md)" docs/ | while read line; do
  file=$(echo "$line" | sed 's/.*(\(.*\.md\)).*/\1/')
  if [[ ! -f "docs/$file" ]]; then
    echo "Broken link: $line"
  fi
done
```

---

## 예시: 올바른 작업 흐름

### Before: 폴더 이동 작업

```
guide/ → reference/ 로 이동
```

### After: 필수 업데이트

1. ✅ 파일들을 reference/로 이동
2. ✅ docs/README.md 폴더 구조 수정
3. ✅ 기존 경로 참조하는 모든 문서 링크 수정
4. ✅ 빈 폴더 삭제

**이 모든 단계가 완료되어야 작업 완료!**
