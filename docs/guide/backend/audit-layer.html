<!doctype html>
<html lang="ko" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guide/backend/audit-layer" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Audit Layer | Aegis v13</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://joungwonlim.github.io/aegis-v13/img/aegis-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://joungwonlim.github.io/aegis-v13/img/aegis-social-card.jpg"><meta data-rh="true" property="og:url" content="https://joungwonlim.github.io/aegis-v13/docs/guide/backend/audit-layer"><meta data-rh="true" property="og:locale" content="ko"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Audit Layer | Aegis v13"><meta data-rh="true" name="description" content="S7 성과 분석"><meta data-rh="true" property="og:description" content="S7 성과 분석"><link data-rh="true" rel="icon" href="/aegis-v13/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://joungwonlim.github.io/aegis-v13/docs/guide/backend/audit-layer"><link data-rh="true" rel="alternate" href="https://joungwonlim.github.io/aegis-v13/docs/guide/backend/audit-layer" hreflang="ko"><link data-rh="true" rel="alternate" href="https://joungwonlim.github.io/aegis-v13/docs/guide/backend/audit-layer" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Audit Layer","item":"https://joungwonlim.github.io/aegis-v13/docs/guide/backend/audit-layer"}]}</script><link rel="stylesheet" href="/aegis-v13/assets/css/styles.0eb6a739.css">
<script src="/aegis-v13/assets/js/runtime~main.56cca9e9.js" defer="defer"></script>
<script src="/aegis-v13/assets/js/main.e59c5e1e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/aegis-v13/img/logo.svg"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="메인" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="사이드바 펼치거나 접기" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aegis-v13/"><div class="navbar__logo"><img src="/aegis-v13/img/logo.svg" alt="Aegis Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/aegis-v13/img/logo.svg" alt="Aegis Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Aegis v13</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aegis-v13/docs/guide/overview/introduction">Guide</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/joungwonlim/aegis-v13" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="문서 사이드바" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/overview/introduction"><span title="Overview" class="categoryLinkLabel_W154">Overview</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/overview/introduction"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/overview/tech-stack"><span title="Tech Stack" class="linkLabel_WmDU">Tech Stack</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/overview/getting-started"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/overview/development-schedule"><span title="Development Schedule" class="linkLabel_WmDU">Development Schedule</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/architecture/system-overview"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/architecture/system-overview"><span title="System Overview" class="linkLabel_WmDU">System Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/architecture/data-flow"><span title="Data Flow" class="linkLabel_WmDU">Data Flow</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/architecture/contracts"><span title="Contracts" class="linkLabel_WmDU">Contracts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/architecture/data-requirements"><span title="Data Requirements" class="linkLabel_WmDU">Data Requirements</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/strategy/stock-selection"><span title="Strategy" class="categoryLinkLabel_W154">Strategy</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/strategy/stock-selection"><span title="종목 선정 전략 설계" class="linkLabel_WmDU">종목 선정 전략 설계</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/strategy/exit-rules"><span title="청산규칙 (Exit Rules)" class="linkLabel_WmDU">청산규칙 (Exit Rules)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/strategy/implementation-spec"><span title="strategyconfig 구현 명세서" class="linkLabel_WmDU">strategyconfig 구현 명세서</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/strategy/verification-checklist"><span title="strategyconfig 구현 검증 체크리스트" class="linkLabel_WmDU">strategyconfig 구현 검증 체크리스트</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/backend/folder-structure"><span title="Backend" class="categoryLinkLabel_W154">Backend</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/folder-structure"><span title="Folder Structure" class="linkLabel_WmDU">Folder Structure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/data-layer"><span title="Data Layer" class="linkLabel_WmDU">Data Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/signals-layer"><span title="Signals Layer" class="linkLabel_WmDU">Signals Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/selection-layer"><span title="Selection Layer" class="linkLabel_WmDU">Selection Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/portfolio-layer"><span title="Portfolio Layer" class="linkLabel_WmDU">Portfolio Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/execution-layer"><span title="Execution Layer" class="linkLabel_WmDU">Execution Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aegis-v13/docs/guide/backend/audit-layer"><span title="Audit Layer" class="linkLabel_WmDU">Audit Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/infrastructure"><span title="Infrastructure" class="linkLabel_WmDU">Infrastructure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/forecast-layer"><span title="Forecast Layer" class="linkLabel_WmDU">Forecast Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/external-apis"><span title="External APIs" class="linkLabel_WmDU">External APIs</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/api/overview"><span title="API Reference" class="categoryLinkLabel_W154">API Reference</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/overview"><span title="API Overview" class="linkLabel_WmDU">API Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/signals-api"><span title="Signals API" class="linkLabel_WmDU">Signals API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/selection-api"><span title="Selection API" class="linkLabel_WmDU">Selection API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/portfolio-api"><span title="Portfolio API" class="linkLabel_WmDU">Portfolio API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/execution-api"><span title="Execution API" class="linkLabel_WmDU">Execution API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/trading-api"><span title="Trading API" class="linkLabel_WmDU">Trading API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/audit-api"><span title="Audit API" class="linkLabel_WmDU">Audit API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/errors"><span title="Error Codes" class="linkLabel_WmDU">Error Codes</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/aegis-v13/docs/guide/frontend/folder-structure"><span title="Frontend" class="categoryLinkLabel_W154">Frontend</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/ui/design-system"><span title="User Interface" class="categoryLinkLabel_W154">User Interface</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/ui/design-system"><span title="Design System" class="linkLabel_WmDU">Design System</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/ui/foundation"><span title="Foundation" class="linkLabel_WmDU">Foundation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/ui/components"><span title="Components" class="linkLabel_WmDU">Components</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/aegis-v13/docs/guide/database/schema-design"><span title="Database" class="categoryLinkLabel_W154">Database</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/aegis-v13/docs/guide/migration/v10-to-v13"><span title="Migration" class="categoryLinkLabel_W154">Migration</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="탐색 경로"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="홈" class="breadcrumbs__link" href="/aegis-v13/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Backend</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Audit Layer</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><header><h1>Audit Layer</h1></header>
<blockquote>
<p>S7: 성과 분석</p>
</blockquote>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="책임">책임<a href="#책임" class="hash-link" aria-label="책임에 대한 직접 링크" title="책임에 대한 직접 링크" translate="no">​</a></h2>
<p>트레이딩 성과 측정, 귀인 분석, 피드백 생성</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="구현-상태-2026-01-11">구현 상태 (2026-01-11)<a href="#구현-상태-2026-01-11" class="hash-link" aria-label="구현 상태 (2026-01-11)에 대한 직접 링크" title="구현 상태 (2026-01-11)에 대한 직접 링크" translate="no">​</a></h2>
<table><thead><tr><th>컴포넌트</th><th>상태</th><th>파일</th></tr></thead><tbody><tr><td><strong>PerformanceAnalyzer</strong></td><td>✅ 완료</td><td><code>internal/audit/performance.go</code></td></tr><tr><td><strong>Attribution</strong></td><td>✅ 완료</td><td><code>internal/audit/attribution.go</code></td></tr><tr><td><strong>Snapshot</strong></td><td>✅ 완료</td><td><code>internal/audit/snapshot.go</code></td></tr><tr><td><strong>Repository</strong></td><td>✅ 완료</td><td><code>internal/audit/repository.go</code></td></tr><tr><td><strong>RiskReporter</strong></td><td>✅ 완료</td><td><code>internal/audit/risk_report.go</code></td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="리스크-모듈-공용">리스크 모듈 (공용)<a href="#리스크-모듈-공용" class="hash-link" aria-label="리스크 모듈 (공용)에 대한 직접 링크" title="리스크 모듈 (공용)에 대한 직접 링크" translate="no">​</a></h3>
<table><thead><tr><th>컴포넌트</th><th>상태</th><th>파일</th></tr></thead><tbody><tr><td><strong>RiskEngine</strong></td><td>✅ 완료</td><td><code>internal/risk/engine.go</code></td></tr><tr><td><strong>VaR/CVaR</strong></td><td>✅ 완료</td><td><code>internal/risk/var.go</code></td></tr><tr><td><strong>Monte Carlo</strong></td><td>✅ 완료</td><td><code>internal/risk/montecarlo.go</code></td></tr><tr><td><strong>Risk Types</strong></td><td>✅ 완료</td><td><code>internal/risk/types.go</code></td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="프로세스-흐름">프로세스 흐름<a href="#프로세스-흐름" class="hash-link" aria-label="프로세스 흐름에 대한 직접 링크" title="프로세스 흐름에 대한 직접 링크" translate="no">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│                          Audit Pipeline                                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                    │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ┌───────────────────────────┼───────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ▼                           ▼                           ▼</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌───────────────────┐       ┌───────────────────┐       ┌───────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ 1. Daily Snapshot │       │ 2. Performance    │       │ 3. Attribution    │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│    (16:00 KST)    │       │    Analyzer       │       │    Analysis       │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├───────────────────┤       ├───────────────────┤       ├───────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 포트폴리오 상태 │       │ • Total Return    │       │ • Momentum 기여도  │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 보유 종목       │       │ • Sharpe Ratio    │       │ • Flow 기여도      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 일별 수익률     │       │ • Max Drawdown    │       │ • Technical 기여도 │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 누적 수익률     │       │ • Win Rate        │       │ • Value 기여도     │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│                   │       │ • Alpha/Beta      │       │ • Quality 기여도   │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└───────────────────┘       └───────────────────┘       └───────────────────┘</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                    │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                    ▼</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    ┌───────────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    │       PerformanceReport           │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    ├───────────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    │ 주요 지표:                        │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    │ • Sharpe &gt; 1.0                   │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    │ • MDD &lt; 20%                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    │ • Win Rate &gt; 50%                 │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    │ • Alpha &gt; 0                      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    └───────────────────────────────────┘</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="폴더-구조">폴더 구조<a href="#폴더-구조" class="hash-link" aria-label="폴더 구조에 대한 직접 링크" title="폴더 구조에 대한 직접 링크" translate="no">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">internal/audit/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── performance.go    # 성과 측정</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── attribution.go    # 귀인 분석</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── snapshot.go       # 스냅샷 저장</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── risk_report.go    # 리스크 리포팅 (NEW)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── repository.go     # DB 저장소</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">internal/risk/        # 공용 리스크 엔진 (NEW)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── engine.go         # RiskEngine 인터페이스/구현</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── var.go            # VaR/CVaR 계산</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── montecarlo.go     # Monte Carlo 시뮬레이터</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── types.go          # 공용 타입</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-analyzer">Performance Analyzer<a href="#performance-analyzer" class="hash-link" aria-label="Performance Analyzer에 대한 직접 링크" title="Performance Analyzer에 대한 직접 링크" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="인터페이스">인터페이스<a href="#인터페이스" class="hash-link" aria-label="인터페이스에 대한 직접 링크" title="인터페이스에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> Auditor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">Analyze</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> period </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token plain">PerformanceReport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="구현">구현<a href="#구현" class="hash-link" aria-label="구현에 대한 직접 링크" title="구현에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/audit/performance.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> auditor </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    db </span><span class="token operator">*</span><span class="token plain">pgxpool</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Pool</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> PerformanceReport </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Period        </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;period&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    StartDate     time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Time </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;start_date&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EndDate       time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Time </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;end_date&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 수익률</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    TotalReturn   </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;total_return&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AnnualReturn  </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;annual_return&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 리스크 지표</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Volatility    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;volatility&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Sharpe        </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;sharpe&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Sortino       </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;sortino&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    MaxDrawdown   </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;max_drawdown&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 트레이딩 지표</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    WinRate       </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;win_rate&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AvgWin        </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;avg_win&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AvgLoss       </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;avg_loss&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ProfitFactor  </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;profit_factor&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 비교</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Benchmark     </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;benchmark&quot;`</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// KOSPI 수익률</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Alpha         </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;alpha&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Beta          </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;beta&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a </span><span class="token operator">*</span><span class="token plain">auditor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Analyze</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> period </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token plain">PerformanceReport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">PerformanceReport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">Period</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> period</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 기간 파싱</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">StartDate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EndDate </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parsePeriod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">period</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 일별 수익률 조회</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dailyReturns </span><span class="token operator">:=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getDailyReturns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">StartDate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EndDate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 수익률 계산</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalReturn </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">calculateTotalReturn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dailyReturns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">AnnualReturn </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">annualize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalReturn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dailyReturns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 리스크 지표</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Volatility </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">calculateVolatility</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dailyReturns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Sharpe </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">calculateSharpe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">AnnualReturn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Volatility</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">MaxDrawdown </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">calculateMaxDrawdown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dailyReturns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 트레이딩 지표</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    trades </span><span class="token operator">:=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getTrades</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">StartDate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EndDate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">WinRate </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">calculateWinRate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">trades</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">ProfitFactor </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">calculateProfitFactor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">trades</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 벤치마크 비교</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Benchmark </span><span class="token operator">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getBenchmarkReturn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">StartDate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EndDate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Alpha </span><span class="token operator">=</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalReturn </span><span class="token operator">-</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Benchmark</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="귀인-분석-attribution">귀인 분석 (Attribution)<a href="#귀인-분석-attribution" class="hash-link" aria-label="귀인 분석 (Attribution)에 대한 직접 링크" title="귀인 분석 (Attribution)에 대한 직접 링크" translate="no">​</a></h2>
<p>어떤 요인이 수익에 기여했는지 분석:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/audit/attribution.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> Attribution </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Factor      </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;factor&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Contribution </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;contribution&quot;`</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 수익 기여도</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Exposure    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;exposure&quot;`</span><span class="token plain">       </span><span class="token comment" style="color:rgb(98, 114, 164)">// 평균 노출도</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a </span><span class="token operator">*</span><span class="token plain">auditor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Attribution</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> period </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Attribution</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    attrs </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Attribution</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 팩터별 기여도 계산 (SSOT: data-flow.md 기준)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    factors </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">FactorInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;momentum&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)">// 20%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;technical&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 20%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;value&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// 15%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;quality&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 15%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;flow&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.25</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">       </span><span class="token comment" style="color:rgb(98, 114, 164)">// 25% ⭐ 수급 (한국 시장 중요)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;event&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.05</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// 5%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token boolean">_</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> factor </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">range</span><span class="token plain"> factors </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        contrib </span><span class="token operator">:=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">calculateFactorContribution</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> period</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> factor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        attrs </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">attrs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Attribution</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Factor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">       factor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Contribution</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> contrib</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Exposure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">     a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAverageExposure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> period</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> factor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> attrs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="risk-analysis-리스크-분석">Risk Analysis (리스크 분석)<a href="#risk-analysis-리스크-분석" class="hash-link" aria-label="Risk Analysis (리스크 분석)에 대한 직접 링크" title="Risk Analysis (리스크 분석)에 대한 직접 링크" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3단계-도입-계획">3단계 도입 계획<a href="#3단계-도입-계획" class="hash-link" aria-label="3단계 도입 계획에 대한 직접 링크" title="3단계 도입 계획에 대한 직접 링크" translate="no">​</a></h3>
<p>리스크 분석은 단계적으로 도입됩니다.</p>
<table><thead><tr><th>Phase</th><th>목표</th><th>상태</th></tr></thead><tbody><tr><td><strong>Phase A: S7 Audit</strong></td><td>Monte Carlo/Forecast가 유용한지 검증</td><td>✅ 완료</td></tr><tr><td><strong>Phase B: S6 Shadow</strong></td><td>실운영에서 얼마나 자주 막히는지 관찰</td><td>🔜 예정</td></tr><tr><td><strong>Phase C: S6 Enforce</strong></td><td>실제 주문 거부/축소</td><td>🔜 예정</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="리스크-아키텍처">리스크 아키텍처<a href="#리스크-아키텍처" class="hash-link" aria-label="리스크 아키텍처에 대한 직접 링크" title="리스크 아키텍처에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌─────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│                        Risk Engine (공용)                        │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│                      internal/risk/engine.go                     │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└─────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                               │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              ┌────────────────┼────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              ▼                                 ▼</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌─────────────────────────────┐   ┌─────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│    S6 Execution (사전)      │   │    S7 Audit (사후)          │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│    Risk Gate                │   │    Risk Reporter            │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├─────────────────────────────┤   ├─────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • VaR/ES 한도 체크          │   │ • Monte Carlo 시뮬레이션    │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 익스포저 한도             │   │ • Forecast 캘리브레이션     │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 유동성 상한               │   │ • Decision tracing          │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 빠름 (100-300ms)          │   │ • 무거움 (수 초)            │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 결정적, 보수적            │   │ • 상세 분석                 │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└─────────────────────────────┘   └─────────────────────────────┘</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="riskengine-공용">RiskEngine (공용)<a href="#riskengine-공용" class="hash-link" aria-label="RiskEngine (공용)에 대한 직접 링크" title="RiskEngine (공용)에 대한 직접 링크" translate="no">​</a></h3>
<p>S6(사전 게이트)와 S7(사후 리포트) 모두 사용하는 순수 계산 엔진입니다.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/risk/engine.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> Engine </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// NewEngine Engine 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">NewEngine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">Engine </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">Engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// VaR 계산 (Historical Simulation)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e </span><span class="token operator">*</span><span class="token plain">Engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">VaR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">returns </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> confidence </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> VaRResult</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Monte Carlo 시뮬레이션</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e </span><span class="token operator">*</span><span class="token plain">Engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">MonteCarlo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">input PortfolioReturns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config MonteCarloConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token plain">MonteCarloResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 스트레스 테스트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e </span><span class="token operator">*</span><span class="token plain">Engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">StressTest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">weights </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> scenarios </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="varcvar">VaR/CVaR<a href="#varcvar" class="hash-link" aria-label="VaR/CVaR에 대한 직접 링크" title="VaR/CVaR에 대한 직접 링크" translate="no">​</a></h3>
<p>VaR(Value at Risk)는 특정 신뢰수준에서 예상되는 최대 손실입니다.
CVaR(Conditional VaR, Expected Shortfall)는 VaR를 초과하는 손실의 평균입니다.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/risk/var.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// VaRResult VaR 계산 결과</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> VaRResult </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Confidence </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 신뢰수준 (0.95, 0.99)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VaR        </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Value at Risk (손실=양수)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    CVaR       </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Expected Shortfall</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 해석 예시:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// VaR95 = 0.05 → &quot;95% 신뢰수준에서 하루 최대 5% 손실&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// CVaR95 = 0.08 → &quot;VaR를 초과하는 손실이 발생하면 평균 8% 손실&quot;</span><br></span></code></pre></div></div>
<p><strong>VaR 계산 방법 (Historical Simulation)</strong>:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// 과거 수익률을 정렬하여 percentile 계산</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e </span><span class="token operator">*</span><span class="token plain">Engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">VaR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">returns </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> confidence </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> VaRResult </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sorted </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">returns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">copy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sorted</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> returns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Float64s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sorted</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    idx </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> confidence</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">len</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sorted</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> result VaRResult</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Confidence </span><span class="token operator">=</span><span class="token plain"> confidence</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">VaR </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain">sorted</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 손실을 양수로 표현</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// CVaR: VaR 이하 수익률의 평균</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sum </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> i </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i </span><span class="token operator">&lt;=</span><span class="token plain"> idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sum </span><span class="token operator">+=</span><span class="token plain"> sorted</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">CVaR </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain">sum </span><span class="token operator">/</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">idx</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> result</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="monte-carlo-설정">Monte Carlo 설정<a href="#monte-carlo-설정" class="hash-link" aria-label="Monte Carlo 설정에 대한 직접 링크" title="Monte Carlo 설정에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/risk/types.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> MonteCarloConfig </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Mode             MonteCarloMode   </span><span class="token comment" style="color:rgb(98, 114, 164)">// portfolio_univariate (빠름) / asset_multivariate (정밀)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ReturnType       ReturnType       </span><span class="token comment" style="color:rgb(98, 114, 164)">// simple / log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    NumSimulations   </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">              </span><span class="token comment" style="color:rgb(98, 114, 164)">// 기본: 10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    HoldingPeriod    </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">              </span><span class="token comment" style="color:rgb(98, 114, 164)">// 보유 기간 (일), 기본: 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ConfidenceLevels </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// [0.95, 0.99]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Method           MonteCarloMethod </span><span class="token comment" style="color:rgb(98, 114, 164)">// historical / normal / t</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    LookbackDays     </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">              </span><span class="token comment" style="color:rgb(98, 114, 164)">// 기본: 200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Seed             </span><span class="token builtin" style="color:rgb(189, 147, 249)">int64</span><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// 재현성용 (0=랜덤)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    MinSamples       </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">              </span><span class="token comment" style="color:rgb(98, 114, 164)">// 최소 샘플 수 (기본: 30, fail-closed)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<p><strong>설정 옵션 상세</strong>:</p>
<table><thead><tr><th>옵션</th><th>값</th><th>설명</th></tr></thead><tbody><tr><td><strong>Mode</strong></td><td><code>portfolio_univariate</code></td><td>포트폴리오 전체 수익률로 시뮬레이션 (빠름)</td></tr><tr><td></td><td><code>asset_multivariate</code></td><td>개별 자산별 시뮬레이션 (상관관계 고려, 정밀)</td></tr><tr><td><strong>Method</strong></td><td><code>historical</code></td><td>과거 수익률 Bootstrap 샘플링</td></tr><tr><td></td><td><code>normal</code></td><td>정규분포 가정</td></tr><tr><td></td><td><code>t</code></td><td>Student-t 분포 (fat tail 반영)</td></tr><tr><td><strong>Seed</strong></td><td><code>0</code></td><td>랜덤 (매번 다른 결과)</td></tr><tr><td></td><td><code>42</code></td><td>고정 시드 (재현성 보장)</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="monte-carlo-결과">Monte Carlo 결과<a href="#monte-carlo-결과" class="hash-link" aria-label="Monte Carlo 결과에 대한 직접 링크" title="Monte Carlo 결과에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/risk/types.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> MonteCarloResult </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    RunID               </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">              </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;run_id&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    RunDate             time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Time           </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;run_date&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    DecisionSnapshotID  </span><span class="token operator">*</span><span class="token builtin" style="color:rgb(189, 147, 249)">int64</span><span class="token plain">              </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;decision_snapshot_id&quot;`</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 재현성용</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Config              MonteCarloConfig    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;config&quot;`</span><span class="token plain">                </span><span class="token comment" style="color:rgb(98, 114, 164)">// 전체 설정 기록</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    InputSampleCount    </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">                 </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;input_sample_count&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    MeanReturn          </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">             </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;mean_return&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    StdDev              </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">             </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;std_dev&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VaR95               </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">             </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;var_95&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VaR99               </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">             </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;var_99&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    CVaR95              </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">             </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;cvar_95&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    CVaR99              </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">             </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;cvar_99&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Percentiles         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;percentiles&quot;`</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// {1, 5, 10, 25, 50, 75, 90, 95, 99}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="riskreporter-s7">RiskReporter (S7)<a href="#riskreporter-s7" class="hash-link" aria-label="RiskReporter (S7)에 대한 직접 링크" title="RiskReporter (S7)에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/audit/risk_report.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> RiskReporter </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    engine </span><span class="token operator">*</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Engine</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    repo   </span><span class="token operator">*</span><span class="token plain">Repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    log    zerolog</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Logger</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// NewRiskReporter RiskReporter 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">NewRiskReporter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">engine </span><span class="token operator">*</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> repo </span><span class="token operator">*</span><span class="token plain">Repository</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> log zerolog</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">RiskReporter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// GenerateReport 전체 리스크 리포트 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r </span><span class="token operator">*</span><span class="token plain">RiskReporter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">GenerateReport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> input RiskReportInput</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token plain">RiskReport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// SaveMonteCarloResult Monte Carlo 결과 저장</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r </span><span class="token operator">*</span><span class="token plain">RiskReporter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">SaveMonteCarloResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> result </span><span class="token operator">*</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">MonteCarloResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cli-명령어">CLI 명령어<a href="#cli-명령어" class="hash-link" aria-label="CLI 명령어에 대한 직접 링크" title="CLI 명령어에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Monte Carlo 시뮬레이션</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit montecarlo                        </span><span class="token comment" style="color:rgb(98, 114, 164)"># 기본 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--simulations</span><span class="token plain"> </span><span class="token number">50000</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 시뮬레이션 횟수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--holding</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)"># 보유 기간 (일)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--method</span><span class="token plain"> t             </span><span class="token comment" style="color:rgb(98, 114, 164)"># Student-t 분포 (fat tail)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--seed</span><span class="token plain"> </span><span class="token number">42</span><span class="token plain">              </span><span class="token comment" style="color:rgb(98, 114, 164)"># 재현성용 시드</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--output</span><span class="token plain"> json          </span><span class="token comment" style="color:rgb(98, 114, 164)"># JSON 출력</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 데모 모드 (포트폴리오 스냅샷 없을 때)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--demo</span><span class="token plain">                 </span><span class="token comment" style="color:rgb(98, 114, 164)"># 샘플 포트폴리오로 테스트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--demo</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--method</span><span class="token plain"> t </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--seed</span><span class="token plain"> </span><span class="token number">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 리스크 리포트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit risk-report                       </span><span class="token comment" style="color:rgb(98, 114, 164)"># 기본</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit risk-report </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--date</span><span class="token plain"> </span><span class="token number">2024</span><span class="token plain">-01-15     </span><span class="token comment" style="color:rgb(98, 114, 164)"># 특정 날짜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit risk-report </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--demo</span><span class="token plain">                </span><span class="token comment" style="color:rgb(98, 114, 164)"># 데모 모드</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant audit risk-report </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--output</span><span class="token plain"> json         </span><span class="token comment" style="color:rgb(98, 114, 164)"># JSON 출력</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="demo-모드">Demo 모드<a href="#demo-모드" class="hash-link" aria-label="Demo 모드에 대한 직접 링크" title="Demo 모드에 대한 직접 링크" translate="no">​</a></h3>
<p>포트폴리오 스냅샷이 없을 때 샘플 포트폴리오로 테스트할 수 있습니다.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// 샘플 포트폴리오 (대형주 10종목, 균등 비중)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">weights </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;005930&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 삼성전자</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;000660&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// SK하이닉스</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;035420&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// NAVER</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;035720&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 카카오</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;051910&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// LG화학</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;006400&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 삼성SDI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;005380&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 현대차</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;000270&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 기아</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;068270&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 셀트리온</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;105560&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// KB금융</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="결과-예시">결과 예시<a href="#결과-예시" class="hash-link" aria-label="결과 예시에 대한 직접 링크" title="결과 예시에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">══════════════════════════════════════════════════════════════════</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Monte Carlo Simulation Results</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">══════════════════════════════════════════════════════════════════</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📊 Configuration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Run ID: mc_20260111_143052_abc123</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Simulations: 10,000</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Holding Period: 5 days</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Method: historical_bootstrap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Seed: 42</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📈 Input Data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Sample Count: 487 days</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Portfolio Stocks: 10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📉 Risk Metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Mean Return: +0.42%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Std Dev: 2.18%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  VaR 95%: 3.21% (5일 최대 손실)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  VaR 99%: 5.67%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  CVaR 95%: 4.35% (Expected Shortfall)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  CVaR 99%: 6.89%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📊 Percentiles</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  1%:  -6.12%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  5%:  -3.21%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  10%: -2.15%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  25%: -0.87%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  50%: +0.38% (median)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  75%: +1.65%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  90%: +2.89%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  95%: +3.54%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  99%: +5.21%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">══════════════════════════════════════════════════════════════════</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="재현성-검증">재현성 검증<a href="#재현성-검증" class="hash-link" aria-label="재현성 검증에 대한 직접 링크" title="재현성 검증에 대한 직접 링크" translate="no">​</a></h3>
<p>동일한 seed를 사용하면 동일한 결과가 나옵니다.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 첫 번째 실행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--demo</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--seed</span><span class="token plain"> </span><span class="token number">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VaR </span><span class="token number">95</span><span class="token plain">%: </span><span class="token number">3.21</span><span class="token plain">%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 두 번째 실행 (동일 seed)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ go run ./cmd/quant audit montecarlo </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--demo</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--seed</span><span class="token plain"> </span><span class="token number">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VaR </span><span class="token number">95</span><span class="token plain">%: </span><span class="token number">3.21</span><span class="token plain">%  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ✅ 동일한 결과</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="스냅샷-저장">스냅샷 저장<a href="#스냅샷-저장" class="hash-link" aria-label="스냅샷 저장에 대한 직접 링크" title="스냅샷 저장에 대한 직접 링크" translate="no">​</a></h2>
<p>매일 포트폴리오 상태 기록:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/audit/snapshot.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> DailySnapshot </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Date         time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Time              </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;date&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    TotalValue   </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;total_value&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Cash         </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;cash&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Positions    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">PositionSnapshot     </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;positions&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    DailyReturn  </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;daily_return&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    CumReturn    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;cum_return&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> PositionSnapshot </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Code        </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;code&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Quantity    </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;quantity&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Price       </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;price&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Value       </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;value&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Weight      </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;weight&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    DailyPnL    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;daily_pnl&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a </span><span class="token operator">*</span><span class="token plain">auditor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">SaveSnapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    snapshot </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">DailySnapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 현재 잔고 조회</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    balance </span><span class="token operator">:=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">broker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">GetBalance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalValue </span><span class="token operator">=</span><span class="token plain"> balance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalValue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Cash </span><span class="token operator">=</span><span class="token plain"> balance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Cash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 포지션 스냅샷</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token boolean">_</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> pos </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">range</span><span class="token plain"> balance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Positions </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Positions </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Positions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> PositionSnapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Code</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">     pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Code</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Quantity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Price</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">    pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">CurrentPrice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Quantity </span><span class="token operator">*</span><span class="token plain"> pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">CurrentPrice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Weight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">   </span><span class="token function" style="color:rgb(80, 250, 123)">float64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Quantity</span><span class="token operator">*</span><span class="token plain">pos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">CurrentPrice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalValue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 수익률 계산</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    prevSnapshot </span><span class="token operator">:=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getPreviousSnapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> prevSnapshot </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token boolean">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">DailyReturn </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalValue </span><span class="token operator">-</span><span class="token plain"> prevSnapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalValue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> prevSnapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">TotalValue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 저장</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">saveSnapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="주요-지표-설명">주요 지표 설명<a href="#주요-지표-설명" class="hash-link" aria-label="주요 지표 설명에 대한 직접 링크" title="주요 지표 설명에 대한 직접 링크" translate="no">​</a></h2>
<table><thead><tr><th>지표</th><th>설명</th><th>목표</th></tr></thead><tbody><tr><td><strong>Sharpe</strong></td><td>(수익률 - 무위험) / 변동성</td><td>&gt; 1.0</td></tr><tr><td><strong>Sortino</strong></td><td>(수익률 - 무위험) / 하락변동성</td><td>&gt; 1.5</td></tr><tr><td><strong>MDD</strong></td><td>최대 낙폭</td><td>&lt; 20%</td></tr><tr><td><strong>Win Rate</strong></td><td>승률</td><td>&gt; 50%</td></tr><tr><td><strong>Profit Factor</strong></td><td>총이익 / 총손실</td><td>&gt; 1.5</td></tr><tr><td><strong>Alpha</strong></td><td>벤치마크 대비 초과수익</td><td>&gt; 0</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="설정-예시-yaml">설정 예시 (YAML)<a href="#설정-예시-yaml" class="hash-link" aria-label="설정 예시 (YAML)에 대한 직접 링크" title="설정 예시 (YAML)에 대한 직접 링크" translate="no">​</a></h2>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># config/audit.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">audit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 스냅샷</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">snapshot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;16:00&quot;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 매일 오후 4시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 벤치마크</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">benchmark</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;KOSPI&quot;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># KOSPI, KOSDAQ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 알림 기준</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">alerts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">max_drawdown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">-0.10</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># MDD -10% 도달 시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">daily_loss</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">-0.03</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># 일 손실 -3% 시</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="db-스키마">DB 스키마<a href="#db-스키마" class="hash-link" aria-label="DB 스키마에 대한 직접 링크" title="DB 스키마에 대한 직접 링크" translate="no">​</a></h2>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- audit.daily_snapshots: 일별 스냅샷</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> audit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">daily_snapshots </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    id           </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SERIAL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token plain">         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATE</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    total_value  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cash         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    positions    JSONB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    daily_return </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cum_return   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    created_at   TIMESTAMPTZ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">NOW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- audit.performance_reports: 성과 리포트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> audit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">performance_reports </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    id            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SERIAL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    period        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">-- &quot;1M&quot;, &quot;3M&quot;, &quot;YTD&quot;, &quot;1Y&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    start_date    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end_date      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    total_return  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sharpe        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    max_drawdown  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    win_rate      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    report_data   JSONB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    created_at    TIMESTAMPTZ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">NOW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- audit.attributions: 귀인 분석</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> audit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">attributions </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    id           </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SERIAL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    period       </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    factor       </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    contribution </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exposure     </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    created_at   TIMESTAMPTZ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">NOW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INDEX</span><span class="token plain"> idx_snapshots_date </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain"> audit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">daily_snapshots</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- analytics.montecarlo_results: Monte Carlo 결과</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> analytics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">montecarlo_results </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    run_id              </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    run_date            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATE</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    decision_snapshot_id </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">REFERENCES</span><span class="token plain"> audit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">decision_snapshots</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    config              JSONB </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">       </span><span class="token comment" style="color:rgb(98, 114, 164)">-- 재현성용</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    input_sample_count  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INT</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mean_return         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    std_dev             </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var_95              </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var_99              </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cvar_95             </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cvar_99             </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    percentiles         JSONB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    created_at          TIMESTAMPTZ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">NOW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- analytics.var_daily_snapshots: 일별 VaR 추이</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> analytics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">var_daily_snapshots </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    snapshot_date  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATE</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    portfolio_id   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;main&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var_95         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var_99         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cvar_95        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cvar_99        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    portfolio_value </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var_95_amount  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">-- 최대 손실 금액</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">snapshot_date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> portfolio_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- analytics.stress_test_results: 스트레스 테스트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> analytics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">stress_test_results </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    run_id         </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    scenario_name  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    portfolio_loss </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    loss_amount    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DECIMAL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">run_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> scenario_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<hr>
<p><strong>Prev</strong>: <a class="" href="/aegis-v13/docs/guide/backend/execution-layer">Execution Layer</a>
<strong>Next</strong>: <a class="" href="/aegis-v13/docs/guide/backend/infrastructure">Infrastructure</a></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="문서 페이지"><a class="pagination-nav__link pagination-nav__link--prev" href="/aegis-v13/docs/guide/backend/execution-layer"><div class="pagination-nav__sublabel">이전</div><div class="pagination-nav__label">Execution Layer</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aegis-v13/docs/guide/backend/infrastructure"><div class="pagination-nav__sublabel">다음</div><div class="pagination-nav__label">Infrastructure</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#책임" class="table-of-contents__link toc-highlight">책임</a></li><li><a href="#구현-상태-2026-01-11" class="table-of-contents__link toc-highlight">구현 상태 (2026-01-11)</a><ul><li><a href="#리스크-모듈-공용" class="table-of-contents__link toc-highlight">리스크 모듈 (공용)</a></li></ul></li><li><a href="#프로세스-흐름" class="table-of-contents__link toc-highlight">프로세스 흐름</a></li><li><a href="#폴더-구조" class="table-of-contents__link toc-highlight">폴더 구조</a></li><li><a href="#performance-analyzer" class="table-of-contents__link toc-highlight">Performance Analyzer</a><ul><li><a href="#인터페이스" class="table-of-contents__link toc-highlight">인터페이스</a></li><li><a href="#구현" class="table-of-contents__link toc-highlight">구현</a></li></ul></li><li><a href="#귀인-분석-attribution" class="table-of-contents__link toc-highlight">귀인 분석 (Attribution)</a></li><li><a href="#risk-analysis-리스크-분석" class="table-of-contents__link toc-highlight">Risk Analysis (리스크 분석)</a><ul><li><a href="#3단계-도입-계획" class="table-of-contents__link toc-highlight">3단계 도입 계획</a></li><li><a href="#리스크-아키텍처" class="table-of-contents__link toc-highlight">리스크 아키텍처</a></li><li><a href="#riskengine-공용" class="table-of-contents__link toc-highlight">RiskEngine (공용)</a></li><li><a href="#varcvar" class="table-of-contents__link toc-highlight">VaR/CVaR</a></li><li><a href="#monte-carlo-설정" class="table-of-contents__link toc-highlight">Monte Carlo 설정</a></li><li><a href="#monte-carlo-결과" class="table-of-contents__link toc-highlight">Monte Carlo 결과</a></li><li><a href="#riskreporter-s7" class="table-of-contents__link toc-highlight">RiskReporter (S7)</a></li><li><a href="#cli-명령어" class="table-of-contents__link toc-highlight">CLI 명령어</a></li><li><a href="#demo-모드" class="table-of-contents__link toc-highlight">Demo 모드</a></li><li><a href="#결과-예시" class="table-of-contents__link toc-highlight">결과 예시</a></li><li><a href="#재현성-검증" class="table-of-contents__link toc-highlight">재현성 검증</a></li></ul></li><li><a href="#스냅샷-저장" class="table-of-contents__link toc-highlight">스냅샷 저장</a></li><li><a href="#주요-지표-설명" class="table-of-contents__link toc-highlight">주요 지표 설명</a></li><li><a href="#설정-예시-yaml" class="table-of-contents__link toc-highlight">설정 예시 (YAML)</a></li><li><a href="#db-스키마" class="table-of-contents__link toc-highlight">DB 스키마</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aegis-v13/docs/guide/overview/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/aegis-v13/docs/guide/architecture/system-overview">Architecture</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Development</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aegis-v13/docs/guide/backend/folder-structure">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/aegis-v13/docs/guide/frontend/folder-structure">Frontend</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/joungwonlim/aegis-v13" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Aegis. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>