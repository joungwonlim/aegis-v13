<!doctype html>
<html lang="ko" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guide/backend/forecast-layer" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Forecast Layer | Aegis v13</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://joungwonlim.github.io/aegis-v13/img/aegis-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://joungwonlim.github.io/aegis-v13/img/aegis-social-card.jpg"><meta data-rh="true" property="og:url" content="https://joungwonlim.github.io/aegis-v13/docs/guide/backend/forecast-layer"><meta data-rh="true" property="og:locale" content="ko"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Forecast Layer | Aegis v13"><meta data-rh="true" name="description" content="이벤트 기반 예측 시스템"><meta data-rh="true" property="og:description" content="이벤트 기반 예측 시스템"><link data-rh="true" rel="icon" href="/aegis-v13/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://joungwonlim.github.io/aegis-v13/docs/guide/backend/forecast-layer"><link data-rh="true" rel="alternate" href="https://joungwonlim.github.io/aegis-v13/docs/guide/backend/forecast-layer" hreflang="ko"><link data-rh="true" rel="alternate" href="https://joungwonlim.github.io/aegis-v13/docs/guide/backend/forecast-layer" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Forecast Layer","item":"https://joungwonlim.github.io/aegis-v13/docs/guide/backend/forecast-layer"}]}</script><link rel="stylesheet" href="/aegis-v13/assets/css/styles.0eb6a739.css">
<script src="/aegis-v13/assets/js/runtime~main.4c932a31.js" defer="defer"></script>
<script src="/aegis-v13/assets/js/main.e59c5e1e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/aegis-v13/img/logo.svg"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="메인" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="사이드바 펼치거나 접기" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aegis-v13/"><div class="navbar__logo"><img src="/aegis-v13/img/logo.svg" alt="Aegis Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/aegis-v13/img/logo.svg" alt="Aegis Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Aegis v13</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aegis-v13/docs/guide/overview/introduction">Guide</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/joungwonlim/aegis-v13" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="문서 사이드바" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/overview/introduction"><span title="Overview" class="categoryLinkLabel_W154">Overview</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/overview/introduction"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/overview/tech-stack"><span title="Tech Stack" class="linkLabel_WmDU">Tech Stack</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/overview/getting-started"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/overview/development-schedule"><span title="Development Schedule" class="linkLabel_WmDU">Development Schedule</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/architecture/system-overview"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/architecture/system-overview"><span title="System Overview" class="linkLabel_WmDU">System Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/architecture/data-flow"><span title="Data Flow" class="linkLabel_WmDU">Data Flow</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/architecture/contracts"><span title="Contracts" class="linkLabel_WmDU">Contracts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/architecture/data-requirements"><span title="Data Requirements" class="linkLabel_WmDU">Data Requirements</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/strategy/stock-selection"><span title="Strategy" class="categoryLinkLabel_W154">Strategy</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/strategy/stock-selection"><span title="종목 선정 전략 설계" class="linkLabel_WmDU">종목 선정 전략 설계</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/strategy/exit-rules"><span title="청산규칙 (Exit Rules)" class="linkLabel_WmDU">청산규칙 (Exit Rules)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/strategy/implementation-spec"><span title="strategyconfig 구현 명세서" class="linkLabel_WmDU">strategyconfig 구현 명세서</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/strategy/verification-checklist"><span title="strategyconfig 구현 검증 체크리스트" class="linkLabel_WmDU">strategyconfig 구현 검증 체크리스트</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/backend/folder-structure"><span title="Backend" class="categoryLinkLabel_W154">Backend</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/folder-structure"><span title="Folder Structure" class="linkLabel_WmDU">Folder Structure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/data-layer"><span title="Data Layer" class="linkLabel_WmDU">Data Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/signals-layer"><span title="Signals Layer" class="linkLabel_WmDU">Signals Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/selection-layer"><span title="Selection Layer" class="linkLabel_WmDU">Selection Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/portfolio-layer"><span title="Portfolio Layer" class="linkLabel_WmDU">Portfolio Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/execution-layer"><span title="Execution Layer" class="linkLabel_WmDU">Execution Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/audit-layer"><span title="Audit Layer" class="linkLabel_WmDU">Audit Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/infrastructure"><span title="Infrastructure" class="linkLabel_WmDU">Infrastructure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aegis-v13/docs/guide/backend/forecast-layer"><span title="Forecast Layer" class="linkLabel_WmDU">Forecast Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/backend/external-apis"><span title="External APIs" class="linkLabel_WmDU">External APIs</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/api/overview"><span title="API Reference" class="categoryLinkLabel_W154">API Reference</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/overview"><span title="API Overview" class="linkLabel_WmDU">API Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/signals-api"><span title="Signals API" class="linkLabel_WmDU">Signals API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/selection-api"><span title="Selection API" class="linkLabel_WmDU">Selection API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/portfolio-api"><span title="Portfolio API" class="linkLabel_WmDU">Portfolio API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/execution-api"><span title="Execution API" class="linkLabel_WmDU">Execution API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/trading-api"><span title="Trading API" class="linkLabel_WmDU">Trading API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/audit-api"><span title="Audit API" class="linkLabel_WmDU">Audit API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/api/errors"><span title="Error Codes" class="linkLabel_WmDU">Error Codes</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/aegis-v13/docs/guide/frontend/folder-structure"><span title="Frontend" class="categoryLinkLabel_W154">Frontend</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/aegis-v13/docs/guide/ui/design-system"><span title="User Interface" class="categoryLinkLabel_W154">User Interface</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/ui/design-system"><span title="Design System" class="linkLabel_WmDU">Design System</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/ui/foundation"><span title="Foundation" class="linkLabel_WmDU">Foundation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/aegis-v13/docs/guide/ui/components"><span title="Components" class="linkLabel_WmDU">Components</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/aegis-v13/docs/guide/database/schema-design"><span title="Database" class="categoryLinkLabel_W154">Database</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/aegis-v13/docs/guide/migration/v10-to-v13"><span title="Migration" class="categoryLinkLabel_W154">Migration</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="탐색 경로"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="홈" class="breadcrumbs__link" href="/aegis-v13/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Backend</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Forecast Layer</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><header><h1>Forecast Layer</h1></header>
<blockquote>
<p>가격 패턴 기반 이벤트 감지 및 예측 시스템</p>
</blockquote>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Overview에 대한 직접 링크" title="Overview에 대한 직접 링크" translate="no">​</a></h2>
<p>Forecast 모듈은 v10의 이벤트 기반 예측 시스템을 v13 아키텍처에 맞게 재구현한 것입니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="핵심-기능">핵심 기능<a href="#핵심-기능" class="hash-link" aria-label="핵심 기능에 대한 직접 링크" title="핵심 기능에 대한 직접 링크" translate="no">​</a></h3>
<table><thead><tr><th>기능</th><th>설명</th></tr></thead><tbody><tr><td><strong>이벤트 감지</strong></td><td>E1(급등), E2(갭+급등) 패턴 감지</td></tr><tr><td><strong>전방 성과 추적</strong></td><td>이벤트 후 5거래일 수익률/MDD 추적</td></tr><tr><td><strong>통계 집계</strong></td><td>4단계 폴백 계층 통계</td></tr><tr><td><strong>예측 생성</strong></td><td>베이지안 수축 기반 예측</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="이벤트-타입">이벤트 타입<a href="#이벤트-타입" class="hash-link" aria-label="이벤트 타입에 대한 직접 링크" title="이벤트 타입에 대한 직접 링크" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="e1_surge-급등">E1_SURGE (급등)<a href="#e1_surge-급등" class="hash-link" aria-label="E1_SURGE (급등)에 대한 직접 링크" title="E1_SURGE (급등)에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">조건: dayReturn &gt;= 3.5% AND closeToHigh &gt;= 0.4</span><br></span></code></pre></div></div>
<ul>
<li class=""><code>dayReturn</code>: 당일 수익률 <code>(close - prev_close) / prev_close</code></li>
<li class=""><code>closeToHigh</code>: 고가 대비 종가 위치 <code>(close - low) / (high - low)</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="e2_gap_surge-갭급등">E2_GAP_SURGE (갭+급등)<a href="#e2_gap_surge-갭급등" class="hash-link" aria-label="E2_GAP_SURGE (갭+급등)에 대한 직접 링크" title="E2_GAP_SURGE (갭+급등)에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">조건: E1 조건 AND gapRatio &gt;= 1.5%</span><br></span></code></pre></div></div>
<ul>
<li class=""><code>gapRatio</code>: 갭 비율 <code>(open - prev_close) / prev_close</code></li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="파일-구조">파일 구조<a href="#파일-구조" class="hash-link" aria-label="파일 구조에 대한 직접 링크" title="파일 구조에 대한 직접 링크" translate="no">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">internal/forecast/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── detector.go      # 이벤트 감지</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── tracker.go       # 전방 성과 추적</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── aggregator.go    # 통계 집계</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── predictor.go     # 예측 생성</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── validator.go     # 예측 검증 (S7 Audit용)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── repository.go    # DB 저장소</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="타입-정의">타입 정의<a href="#타입-정의" class="hash-link" aria-label="타입 정의에 대한 직접 링크" title="타입 정의에 대한 직접 링크" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="forecastevent">ForecastEvent<a href="#forecastevent" class="hash-link" aria-label="ForecastEvent에 대한 직접 링크" title="ForecastEvent에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> ForecastEvent </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ID              </span><span class="token builtin" style="color:rgb(189, 147, 249)">int64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Code            </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Date            time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EventType       ForecastEventType  </span><span class="token comment" style="color:rgb(98, 114, 164)">// E1_SURGE, E2_GAP_SURGE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    DayReturn       </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// 당일 수익률</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    CloseToHigh     </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// 고가 대비 종가 (0~1)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GapRatio        </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// 갭 비율</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VolumeZScore    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// 거래량 z-score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Sector          </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    MarketCapBucket </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">             </span><span class="token comment" style="color:rgb(98, 114, 164)">// small/mid/large</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="forwardperformance">ForwardPerformance<a href="#forwardperformance" class="hash-link" aria-label="ForwardPerformance에 대한 직접 링크" title="ForwardPerformance에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> ForwardPerformance </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EventID       </span><span class="token builtin" style="color:rgb(189, 147, 249)">int64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FwdRet1D      </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// t+1 수익률</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FwdRet2D      </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// t+2 수익률</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FwdRet3D      </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// t+3 수익률</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FwdRet5D      </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// t+5 수익률</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    MaxRunup5D    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 5일 최대 상승</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    MaxDrawdown5D </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 5일 최대 하락</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    GapHold3D     </span><span class="token builtin" style="color:rgb(189, 147, 249)">bool</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">// 3일간 갭 유지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="forecaststats">ForecastStats<a href="#forecaststats" class="hash-link" aria-label="ForecastStats에 대한 직접 링크" title="ForecastStats에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> ForecastStats </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Level       ForecastStatsLevel  </span><span class="token comment" style="color:rgb(98, 114, 164)">// SYMBOL/SECTOR/BUCKET/MARKET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Key         </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">              </span><span class="token comment" style="color:rgb(98, 114, 164)">// 종목코드/섹터명/버킷명/ALL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EventType   ForecastEventType</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    SampleCount </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AvgRet1D    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AvgRet5D    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    WinRate1D   </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 1일 후 양수 비율</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    WinRate5D   </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 5일 후 양수 비율</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    P10MDD      </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 하위 10% MDD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="4단계-폴백-계층">4단계 폴백 계층<a href="#4단계-폴백-계층" class="hash-link" aria-label="4단계 폴백 계층에 대한 직접 링크" title="4단계 폴백 계층에 대한 직접 링크" translate="no">​</a></h2>
<p>예측 시 샘플 수가 부족하면 다음 레벨로 폴백합니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. SYMBOL  → 해당 종목의 과거 이벤트 통계</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. SECTOR  → 같은 섹터 종목들의 통계</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. BUCKET  → 같은 시가총액 구간 (small/mid/large)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4. MARKET  → 전체 시장 평균</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="폴백-조건">폴백 조건<a href="#폴백-조건" class="hash-link" aria-label="폴백 조건에 대한 직접 링크" title="폴백 조건에 대한 직접 링크" translate="no">​</a></h3>
<ul>
<li class="">샘플 수 &lt; 5 → 다음 레벨로 폴백</li>
<li class="">MARKET 레벨은 항상 존재</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="베이지안-수축">베이지안 수축<a href="#베이지안-수축" class="hash-link" aria-label="베이지안 수축에 대한 직접 링크" title="베이지안 수축에 대한 직접 링크" translate="no">​</a></h2>
<p>소표본 편향을 보정하기 위해 베이지안 수축을 적용합니다.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// K = 10 (수축 강도)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">weight </span><span class="token operator">:=</span><span class="token plain"> n </span><span class="token operator">/</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n </span><span class="token operator">+</span><span class="token plain"> K</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">shrunkReturn </span><span class="token operator">:=</span><span class="token plain"> weight </span><span class="token operator">*</span><span class="token plain"> sampleMean </span><span class="token operator">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token plain">weight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> marketMean</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="신뢰도-계산">신뢰도 계산<a href="#신뢰도-계산" class="hash-link" aria-label="신뢰도 계산에 대한 직접 링크" title="신뢰도 계산에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">confidence </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">min</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> sampleCount </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">30.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="forecast-validation-s7-audit">Forecast Validation (S7 Audit)<a href="#forecast-validation-s7-audit" class="hash-link" aria-label="Forecast Validation (S7 Audit)에 대한 직접 링크" title="Forecast Validation (S7 Audit)에 대한 직접 링크" translate="no">​</a></h2>
<p>예측 정확도를 검증하고 모델 품질을 측정합니다. 이 검증 시스템은 S7 Audit 레이어의 핵심 구성요소로, 예측 모델의 품질을 지속적으로 모니터링합니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="검증-아키텍처">검증 아키텍처<a href="#검증-아키텍처" class="hash-link" aria-label="검증 아키텍처에 대한 직접 링크" title="검증 아키텍처에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌─────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│                    Forecast Validation Pipeline                  │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└─────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                               │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ┌──────────────────────┼──────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ▼                      ▼                      ▼</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ 1. Prediction     │  │ 2. Actual Result  │  │ 3. Comparison     │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│    Retrieval      │  │    Collection     │  │    &amp; Scoring      │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├───────────────────┤  ├───────────────────┤  ├───────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 과거 예측값     │  │ • 5일 후 실제값   │  │ • 오차 계산       │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 모델 버전별     │  │ • forward_perf    │  │ • 방향성 체크     │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ • 이벤트 타입별   │  │   테이블 조회     │  │ • 메트릭 집계     │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└───────────────────┘  └───────────────────┘  └───────────────────┘</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                               │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                               ▼</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                ┌───────────────────────────────────┐</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                │       AccuracyReport              │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                ├───────────────────────────────────┤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                │ • MAE (평균 절대 오차)            │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                │ • RMSE (평균 제곱근 오차)         │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                │ • Hit Rate (방향성 적중률)        │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                │ • Mean Error (편향)               │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                │ • 이벤트 타입별 분석              │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                └───────────────────────────────────┘</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="validator">Validator<a href="#validator" class="hash-link" aria-label="Validator에 대한 직접 링크" title="Validator에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/forecast/validator.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> Validator </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    repo         </span><span class="token operator">*</span><span class="token plain">Repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    predictor    </span><span class="token operator">*</span><span class="token plain">Predictor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    modelVersion </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)">// 다중 모델 비교용 (A/B 테스트)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    log          zerolog</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Logger</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// NewValidator Validator 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">NewValidator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">repo </span><span class="token operator">*</span><span class="token plain">Repository</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> predictor </span><span class="token operator">*</span><span class="token plain">Predictor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> modelVersion </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> log zerolog</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">Validator </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        repo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">         repo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        predictor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">    predictor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        modelVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> modelVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">          log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">With</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;component&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;forecast_validator&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ValidateAll 전체 검증 - 완료된 이벤트 모두 검증</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v </span><span class="token operator">*</span><span class="token plain">Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ValidateAll</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">ValidationResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ValidateRange 기간별 검증</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v </span><span class="token operator">*</span><span class="token plain">Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ValidateRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> from</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> to time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">ValidationResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// CalculateAccuracy 정확도 리포트 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v </span><span class="token operator">*</span><span class="token plain">Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">CalculateAccuracy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> validations </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">ValidationResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">AccuracyReport</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// CalculateCalibrationBins 캘리브레이션 빈 계산</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v </span><span class="token operator">*</span><span class="token plain">Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">CalculateCalibrationBins</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> validations </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">ValidationResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> numBins </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">risk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">CalibrationBin</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="검증-메트릭">검증 메트릭<a href="#검증-메트릭" class="hash-link" aria-label="검증 메트릭에 대한 직접 링크" title="검증 메트릭에 대한 직접 링크" translate="no">​</a></h3>
<table><thead><tr><th>메트릭</th><th>설명</th><th>계산 방법</th><th>목표</th></tr></thead><tbody><tr><td><strong>MAE</strong></td><td>Mean Absolute Error</td><td>`Σ</td><td>actual - predicted</td></tr><tr><td><strong>RMSE</strong></td><td>Root Mean Squared Error</td><td><code>√(Σ(actual - predicted)² / n)</code></td><td>&lt; 3%</td></tr><tr><td><strong>Hit Rate</strong></td><td>방향성 적중률</td><td><code>(부호 일치 수) / n</code></td><td>&gt; 55%</td></tr><tr><td><strong>Mean Error</strong></td><td>편향 (bias)</td><td><code>Σ(actual - predicted) / n</code></td><td>~0%</td></tr></tbody></table>
<p><strong>메트릭 해석</strong>:</p>
<ul>
<li class=""><strong>MAE</strong>: 예측 오차의 평균 크기. 낮을수록 좋음</li>
<li class=""><strong>RMSE</strong>: 큰 오차에 더 큰 패널티. MAE보다 이상치에 민감</li>
<li class=""><strong>Hit Rate</strong>: 상승/하락 방향만 맞췄는지. 55% 이상이면 유의미한 예측력</li>
<li class=""><strong>Mean Error</strong>: 양수면 과소예측, 음수면 과대예측. 0에 가까워야 함</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="validationresult">ValidationResult<a href="#validationresult" class="hash-link" aria-label="ValidationResult에 대한 직접 링크" title="ValidationResult에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/risk/types.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> ValidationResult </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EventID      </span><span class="token builtin" style="color:rgb(189, 147, 249)">int64</span><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;event_id&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ModelVersion </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;model_version&quot;`</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)">// A/B 테스트용</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Code         </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;code&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EventType    </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;event_type&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    PredictedRet </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;predicted_ret&quot;`</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)">// 예측 수익률 (5일)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ActualRet    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;actual_ret&quot;`</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// 실제 수익률 (5일)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Error        </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;error&quot;`</span><span class="token plain">           </span><span class="token comment" style="color:rgb(98, 114, 164)">// 오차 (actual - predicted)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AbsError     </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;abs_error&quot;`</span><span class="token plain">       </span><span class="token comment" style="color:rgb(98, 114, 164)">// 절대 오차</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    DirectionHit </span><span class="token builtin" style="color:rgb(189, 147, 249)">bool</span><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;direction_hit&quot;`</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)">// 방향성 적중 (부호 일치)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ValidatedAt  time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Time </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;validated_at&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="accuracyreport">AccuracyReport<a href="#accuracyreport" class="hash-link" aria-label="AccuracyReport에 대한 직접 링크" title="AccuracyReport에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/risk/types.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> AccuracyReport </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ModelVersion </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;model_version&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Level        </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;level&quot;`</span><span class="token plain">           </span><span class="token comment" style="color:rgb(98, 114, 164)">// ALL, EVENT_TYPE, CODE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Key          </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;key&quot;`</span><span class="token plain">             </span><span class="token comment" style="color:rgb(98, 114, 164)">// level에 따른 키</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EventType    </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;event_type&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    SampleCount  </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">       </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;sample_count&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    MAE          </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;mae&quot;`</span><span class="token plain">             </span><span class="token comment" style="color:rgb(98, 114, 164)">// Mean Absolute Error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    RMSE         </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;rmse&quot;`</span><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// Root Mean Squared Error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    HitRate      </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;hit_rate&quot;`</span><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// 방향성 적중률 (0~1)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    MeanError    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain">   </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;mean_error&quot;`</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// 편향 (bias)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    UpdatedAt    time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Time </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;updated_at&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="캘리브레이션-reliability-diagram">캘리브레이션 (Reliability Diagram)<a href="#캘리브레이션-reliability-diagram" class="hash-link" aria-label="캘리브레이션 (Reliability Diagram)에 대한 직접 링크" title="캘리브레이션 (Reliability Diagram)에 대한 직접 링크" translate="no">​</a></h3>
<p>예측 신뢰도와 실제 적중률의 일치도를 측정합니다. 잘 캘리브레이션된 모델은 &quot;80% 신뢰도 예측의 80%가 맞아야&quot; 합니다.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// CalibrationBin 캘리브레이션 빈</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> CalibrationBin </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Bin          </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;bin&quot;`</span><span class="token plain">           </span><span class="token comment" style="color:rgb(98, 114, 164)">// 빈 번호 (0-9)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    SampleCount  </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;sample_count&quot;`</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 샘플 수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AvgPredicted </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;avg_predicted&quot;`</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// 빈 내 평균 예측값</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AvgActual    </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;avg_actual&quot;`</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 빈 내 평균 실제값</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    HitRate      </span><span class="token builtin" style="color:rgb(189, 147, 249)">float64</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">`json:&quot;hit_rate&quot;`</span><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// 빈 내 적중률</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 캘리브레이션 분석 예시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bins </span><span class="token operator">:=</span><span class="token plain"> validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">CalculateCalibrationBins</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> validations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 이상적인 결과 (잘 캘리브레이션됨):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Bin 0 (0-10% 신뢰도): HitRate ~10%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Bin 5 (50-60% 신뢰도): HitRate ~55%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Bin 9 (90-100% 신뢰도): HitRate ~95%</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="모델-버전-관리-ab-테스트">모델 버전 관리 (A/B 테스트)<a href="#모델-버전-관리-ab-테스트" class="hash-link" aria-label="모델 버전 관리 (A/B 테스트)에 대한 직접 링크" title="모델 버전 관리 (A/B 테스트)에 대한 직접 링크" translate="no">​</a></h3>
<p>동일 이벤트에 대해 여러 모델 버전의 예측을 비교할 수 있습니다.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// PK: (event_id, model_version) - 동일 이벤트, 다른 모델 비교 가능</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 예: v1.0.0 vs v2.0.0 비교</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">v1Validator </span><span class="token operator">:=</span><span class="token plain"> forecast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">NewValidator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">repo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> predictor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;v1.0.0&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">v2Validator </span><span class="token operator">:=</span><span class="token plain"> forecast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">NewValidator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">repo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> predictor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;v2.0.0&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">v1Results</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">_</span><span class="token plain"> </span><span class="token operator">:=</span><span class="token plain"> v1Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">ValidateAll</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">v2Results</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">_</span><span class="token plain"> </span><span class="token operator">:=</span><span class="token plain"> v2Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">ValidateAll</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">v1Report </span><span class="token operator">:=</span><span class="token plain"> v1Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">CalculateAccuracy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> v1Results</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">v2Report </span><span class="token operator">:=</span><span class="token plain"> v2Validator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">CalculateAccuracy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> v2Results</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// v2가 더 나은지 비교</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> v2Report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">HitRate </span><span class="token operator">&gt;</span><span class="token plain"> v1Report</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">HitRate </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// v2 모델 채택</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="검증-결과-예시">검증 결과 예시<a href="#검증-결과-예시" class="hash-link" aria-label="검증 결과 예시에 대한 직접 링크" title="검증 결과 예시에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">══════════════════════════════════════════════════════════════════</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              Forecast Validation Report (v1.0.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">══════════════════════════════════════════════════════════════════</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📊 Summary</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Events Validated: 146,792</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Model Version: v1.0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📈 Accuracy Metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  MAE (Mean Absolute Error): 3.42%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  RMSE (Root Mean Square Error): 5.18%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Hit Rate (Direction Accuracy): 55.46%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Mean Error (Bias): +0.12%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">📋 By Event Type</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  E1_SURGE:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Count: 98,234  |  MAE: 3.28%  |  Hit Rate: 56.12%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  E2_GAP_SURGE:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Count: 48,558  |  MAE: 3.71%  |  Hit Rate: 54.13%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">✅ Model Quality: ACCEPTABLE (Hit Rate &gt; 55%)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">══════════════════════════════════════════════════════════════════</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="cli-명령어">CLI 명령어<a href="#cli-명령어" class="hash-link" aria-label="CLI 명령어에 대한 직접 링크" title="CLI 명령어에 대한 직접 링크" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="전체-파이프라인">전체 파이프라인<a href="#전체-파이프라인" class="hash-link" aria-label="전체 파이프라인에 대한 직접 링크" title="전체 파이프라인에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast run </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--from</span><span class="token plain"> </span><span class="token number">2024</span><span class="token plain">-01-01</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="개별-단계">개별 단계<a href="#개별-단계" class="hash-link" aria-label="개별 단계에 대한 직접 링크" title="개별 단계에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 1. 이벤트 감지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast detect </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--from</span><span class="token plain"> </span><span class="token number">2024</span><span class="token plain">-01-01 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--to</span><span class="token plain"> </span><span class="token number">2024</span><span class="token plain">-12-31</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2. 전방 성과 채우기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast fill-forward</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 3. 통계 집계</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast aggregate</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="예측-조회">예측 조회<a href="#예측-조회" class="hash-link" aria-label="예측 조회에 대한 직접 링크" title="예측 조회에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast predict </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--code</span><span class="token plain"> 005930</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="예측-검증-s7-audit">예측 검증 (S7 Audit)<a href="#예측-검증-s7-audit" class="hash-link" aria-label="예측 검증 (S7 Audit)에 대한 직접 링크" title="예측 검증 (S7 Audit)에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 전체 기간 검증</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast validate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 날짜 범위 지정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast validate </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--from</span><span class="token plain"> </span><span class="token number">2024</span><span class="token plain">-01-01 </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--to</span><span class="token plain"> </span><span class="token number">2024</span><span class="token plain">-06-30</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 모델 버전 지정 (A/B 테스트)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast validate </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--model</span><span class="token plain"> v2.0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 집계 레벨별 리포트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast validate </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--level</span><span class="token plain"> EVENT_TYPE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># JSON 출력</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant forecast validate </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--output</span><span class="token plain"> json</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="스케줄러-등록">스케줄러 등록<a href="#스케줄러-등록" class="hash-link" aria-label="스케줄러 등록에 대한 직접 링크" title="스케줄러 등록에 대한 직접 링크" translate="no">​</a></h2>
<p>Forecast 파이프라인은 스케줄러에 <code>forecast_pipeline</code> 작업으로 등록되어 있습니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="스케줄">스케줄<a href="#스케줄" class="hash-link" aria-label="스케줄에 대한 직접 링크" title="스케줄에 대한 직접 링크" translate="no">​</a></h3>
<table><thead><tr><th>작업명</th><th>실행 시간</th><th>설명</th></tr></thead><tbody><tr><td><code>forecast_pipeline</code></td><td><strong>매일 18:30</strong></td><td>Universe 생성 후 실행</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="실행-순서">실행 순서<a href="#실행-순서" class="hash-link" aria-label="실행 순서에 대한 직접 링크" title="실행 순서에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:00 - data_collection (데이터 수집)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">17:00 - investor_flow (투자자 수급)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">18:00 - universe_generation (Universe 생성)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">18:30 - forecast_pipeline (이벤트 감지/예측) ⭐</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="스케줄러-명령어">스케줄러 명령어<a href="#스케줄러-명령어" class="hash-link" aria-label="스케줄러 명령어에 대한 직접 링크" title="스케줄러 명령어에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 스케줄러 시작 (모든 작업 등록)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant scheduler start</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 등록된 작업 목록 확인</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant scheduler list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># forecast_pipeline 즉시 실행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant scheduler run forecast_pipeline</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 작업 상태 확인</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go run ./cmd/quant scheduler status</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="job-구현">Job 구현<a href="#job-구현" class="hash-link" aria-label="Job 구현에 대한 직접 링크" title="Job 구현에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// internal/scheduler/jobs/forecast.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> ForecastJob </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pool   </span><span class="token operator">*</span><span class="token plain">pgxpool</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Pool</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    logger </span><span class="token operator">*</span><span class="token plain">logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Logger</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">j </span><span class="token operator">*</span><span class="token plain">ForecastJob</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;forecast_pipeline&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">j </span><span class="token operator">*</span><span class="token plain">ForecastJob</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Schedule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0 30 18 * * *&quot;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 매일 18:30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">j </span><span class="token operator">*</span><span class="token plain">ForecastJob</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 1. Event Detection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 2. Fill Forward Performance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 3. Aggregate Statistics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="db-스키마">DB 스키마<a href="#db-스키마" class="hash-link" aria-label="DB 스키마에 대한 직접 링크" title="DB 스키마에 대한 직접 링크" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="analyticsforecast_events">analytics.forecast_events<a href="#analyticsforecast_events" class="hash-link" aria-label="analytics.forecast_events에 대한 직접 링크" title="analytics.forecast_events에 대한 직접 링크" translate="no">​</a></h3>
<table><thead><tr><th>컬럼</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>id</code></td><td>BIGSERIAL</td><td>PK</td></tr><tr><td><code>code</code></td><td>VARCHAR(20)</td><td>종목코드</td></tr><tr><td><code>event_date</code></td><td>DATE</td><td>이벤트 발생일</td></tr><tr><td><code>event_type</code></td><td>VARCHAR(20)</td><td>E1_SURGE, E2_GAP_SURGE</td></tr><tr><td><code>day_return</code></td><td>NUMERIC(8,4)</td><td>당일 수익률</td></tr><tr><td><code>close_to_high</code></td><td>NUMERIC(8,4)</td><td>고가 대비 종가</td></tr><tr><td><code>gap_ratio</code></td><td>NUMERIC(8,4)</td><td>갭 비율</td></tr><tr><td><code>volume_z_score</code></td><td>NUMERIC(8,2)</td><td>거래량 z-score</td></tr><tr><td><code>sector</code></td><td>VARCHAR(50)</td><td>섹터</td></tr><tr><td><code>market_cap_bucket</code></td><td>VARCHAR(10)</td><td>small/mid/large</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="analyticsforward_performance">analytics.forward_performance<a href="#analyticsforward_performance" class="hash-link" aria-label="analytics.forward_performance에 대한 직접 링크" title="analytics.forward_performance에 대한 직접 링크" translate="no">​</a></h3>
<table><thead><tr><th>컬럼</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>event_id</code></td><td>BIGINT</td><td>FK → forecast_events</td></tr><tr><td><code>fwd_ret_1d</code> ~ <code>fwd_ret_5d</code></td><td>NUMERIC(8,4)</td><td>전방 수익률</td></tr><tr><td><code>max_runup_5d</code></td><td>NUMERIC(8,4)</td><td>5일 최대 상승</td></tr><tr><td><code>max_drawdown_5d</code></td><td>NUMERIC(8,4)</td><td>5일 최대 하락</td></tr><tr><td><code>gap_hold_3d</code></td><td>BOOLEAN</td><td>갭 유지 여부</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="analyticsforecast_stats">analytics.forecast_stats<a href="#analyticsforecast_stats" class="hash-link" aria-label="analytics.forecast_stats에 대한 직접 링크" title="analytics.forecast_stats에 대한 직접 링크" translate="no">​</a></h3>
<table><thead><tr><th>컬럼</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>level</code></td><td>VARCHAR(10)</td><td>SYMBOL/SECTOR/BUCKET/MARKET</td></tr><tr><td><code>key</code></td><td>VARCHAR(50)</td><td>레벨별 키</td></tr><tr><td><code>event_type</code></td><td>VARCHAR(20)</td><td>이벤트 타입</td></tr><tr><td><code>sample_count</code></td><td>INT</td><td>샘플 수</td></tr><tr><td><code>avg_ret_*</code></td><td>NUMERIC(8,4)</td><td>평균 수익률</td></tr><tr><td><code>win_rate_*</code></td><td>NUMERIC(5,4)</td><td>승률</td></tr><tr><td><code>p10_mdd</code></td><td>NUMERIC(8,4)</td><td>하위 10% MDD</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="analyticsforecast_validations">analytics.forecast_validations<a href="#analyticsforecast_validations" class="hash-link" aria-label="analytics.forecast_validations에 대한 직접 링크" title="analytics.forecast_validations에 대한 직접 링크" translate="no">​</a></h3>
<p>예측 검증 결과 (모델 버전별)</p>
<table><thead><tr><th>컬럼</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>event_id</code></td><td>BIGINT</td><td>FK → forecast_events (PK)</td></tr><tr><td><code>model_version</code></td><td>VARCHAR(20)</td><td>모델 버전 (PK)</td></tr><tr><td><code>code</code></td><td>VARCHAR(20)</td><td>종목코드</td></tr><tr><td><code>event_type</code></td><td>VARCHAR(20)</td><td>이벤트 타입</td></tr><tr><td><code>predicted_ret</code></td><td>NUMERIC(8,4)</td><td>예측 수익률</td></tr><tr><td><code>actual_ret</code></td><td>NUMERIC(8,4)</td><td>실제 수익률</td></tr><tr><td><code>error</code></td><td>NUMERIC(8,4)</td><td>오차</td></tr><tr><td><code>abs_error</code></td><td>NUMERIC(8,4)</td><td>절대 오차</td></tr><tr><td><code>direction_hit</code></td><td>BOOLEAN</td><td>방향성 적중</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="analyticsaccuracy_reports">analytics.accuracy_reports<a href="#analyticsaccuracy_reports" class="hash-link" aria-label="analytics.accuracy_reports에 대한 직접 링크" title="analytics.accuracy_reports에 대한 직접 링크" translate="no">​</a></h3>
<p>집계 수준별 정확도 리포트</p>
<table><thead><tr><th>컬럼</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>model_version</code></td><td>VARCHAR(20)</td><td>모델 버전 (PK)</td></tr><tr><td><code>level</code></td><td>VARCHAR(20)</td><td>ALL/EVENT_TYPE/CODE (PK)</td></tr><tr><td><code>key</code></td><td>VARCHAR(50)</td><td>레벨별 키 (PK)</td></tr><tr><td><code>event_type</code></td><td>VARCHAR(20)</td><td>이벤트 타입 (PK)</td></tr><tr><td><code>mae</code></td><td>NUMERIC(8,4)</td><td>Mean Absolute Error</td></tr><tr><td><code>rmse</code></td><td>NUMERIC(8,4)</td><td>Root Mean Squared Error</td></tr><tr><td><code>hit_rate</code></td><td>NUMERIC(5,4)</td><td>방향성 적중률</td></tr><tr><td><code>mean_error</code></td><td>NUMERIC(8,4)</td><td>편향 (bias)</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="analyticscalibration_bins">analytics.calibration_bins<a href="#analyticscalibration_bins" class="hash-link" aria-label="analytics.calibration_bins에 대한 직접 링크" title="analytics.calibration_bins에 대한 직접 링크" translate="no">​</a></h3>
<p>신뢰도 캘리브레이션 빈 (reliability diagram 용)</p>
<table><thead><tr><th>컬럼</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td><code>model_version</code></td><td>VARCHAR(20)</td><td>모델 버전 (PK)</td></tr><tr><td><code>horizon_days</code></td><td>INT</td><td>예측 기간 5/10/20일 (PK)</td></tr><tr><td><code>bin</code></td><td>INT</td><td>빈 번호 0-9 (PK)</td></tr><tr><td><code>sample_count</code></td><td>INT</td><td>샘플 수</td></tr><tr><td><code>avg_predicted</code></td><td>NUMERIC(8,4)</td><td>빈 내 평균 예측값</td></tr><tr><td><code>avg_actual</code></td><td>NUMERIC(8,4)</td><td>빈 내 평균 실제값</td></tr><tr><td><code>hit_rate</code></td><td>NUMERIC(5,4)</td><td>빈 내 적중률</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="사용-예시">사용 예시<a href="#사용-예시" class="hash-link" aria-label="사용 예시에 대한 직접 링크" title="사용 예시에 대한 직접 링크" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="이벤트-감지">이벤트 감지<a href="#이벤트-감지" class="hash-link" aria-label="이벤트 감지에 대한 직접 링크" title="이벤트 감지에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">detector </span><span class="token operator">:=</span><span class="token plain"> forecast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">NewDetector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">events </span><span class="token operator">:=</span><span class="token plain"> detector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">DetectEvents</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> priceDataList</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> volumeStatsMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="전방-성과-계산">전방 성과 계산<a href="#전방-성과-계산" class="hash-link" aria-label="전방 성과 계산에 대한 직접 링크" title="전방 성과 계산에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker </span><span class="token operator">:=</span><span class="token plain"> forecast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">NewTracker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">perf </span><span class="token operator">:=</span><span class="token plain"> tracker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">CalculateForwardPerformance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> eventID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> baseClose</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> forwardPrices</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="통계-집계">통계 집계<a href="#통계-집계" class="hash-link" aria-label="통계 집계에 대한 직접 링크" title="통계 집계에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">aggregator </span><span class="token operator">:=</span><span class="token plain"> forecast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">NewAggregator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">stats </span><span class="token operator">:=</span><span class="token plain"> aggregator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">AggregateAll</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> eventsWithPerformance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="예측-생성">예측 생성<a href="#예측-생성" class="hash-link" aria-label="예측 생성에 대한 직접 링크" title="예측 생성에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">predictor </span><span class="token operator">:=</span><span class="token plain"> forecast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">NewPredictor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">repository</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">prediction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">_</span><span class="token plain"> </span><span class="token operator">:=</span><span class="token plain"> predictor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Predict</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="s3s4-통합-선택">S3/S4 통합 (선택)<a href="#s3s4-통합-선택" class="hash-link" aria-label="S3/S4 통합 (선택)에 대한 직접 링크" title="S3/S4 통합 (선택)에 대한 직접 링크" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="s3-screener-필터">S3 Screener 필터<a href="#s3-screener-필터" class="hash-link" aria-label="S3 Screener 필터에 대한 직접 링크" title="S3 Screener 필터에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// P10 MDD가 -10% 이내인 종목만 통과</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MinP10MDD</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">0.10</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="s4-ranker-점수">S4 Ranker 점수<a href="#s4-ranker-점수" class="hash-link" aria-label="S4 Ranker 점수에 대한 직접 링크" title="S4 Ranker 점수에 대한 직접 링크" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// 기대 수익률 기반 가산점</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EventForecastWeight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.10</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// 10% 가중치</span><br></span></code></pre></div></div>
<hr>
<p><strong>Prev</strong>: <a class="" href="/aegis-v13/docs/guide/backend/audit-layer">Audit Layer</a></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="문서 페이지"><a class="pagination-nav__link pagination-nav__link--prev" href="/aegis-v13/docs/guide/backend/infrastructure"><div class="pagination-nav__sublabel">이전</div><div class="pagination-nav__label">Infrastructure</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aegis-v13/docs/guide/backend/external-apis"><div class="pagination-nav__sublabel">다음</div><div class="pagination-nav__label">External APIs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#핵심-기능" class="table-of-contents__link toc-highlight">핵심 기능</a></li></ul></li><li><a href="#이벤트-타입" class="table-of-contents__link toc-highlight">이벤트 타입</a><ul><li><a href="#e1_surge-급등" class="table-of-contents__link toc-highlight">E1_SURGE (급등)</a></li><li><a href="#e2_gap_surge-갭급등" class="table-of-contents__link toc-highlight">E2_GAP_SURGE (갭+급등)</a></li></ul></li><li><a href="#파일-구조" class="table-of-contents__link toc-highlight">파일 구조</a></li><li><a href="#타입-정의" class="table-of-contents__link toc-highlight">타입 정의</a><ul><li><a href="#forecastevent" class="table-of-contents__link toc-highlight">ForecastEvent</a></li><li><a href="#forwardperformance" class="table-of-contents__link toc-highlight">ForwardPerformance</a></li><li><a href="#forecaststats" class="table-of-contents__link toc-highlight">ForecastStats</a></li></ul></li><li><a href="#4단계-폴백-계층" class="table-of-contents__link toc-highlight">4단계 폴백 계층</a><ul><li><a href="#폴백-조건" class="table-of-contents__link toc-highlight">폴백 조건</a></li></ul></li><li><a href="#베이지안-수축" class="table-of-contents__link toc-highlight">베이지안 수축</a><ul><li><a href="#신뢰도-계산" class="table-of-contents__link toc-highlight">신뢰도 계산</a></li></ul></li><li><a href="#forecast-validation-s7-audit" class="table-of-contents__link toc-highlight">Forecast Validation (S7 Audit)</a><ul><li><a href="#검증-아키텍처" class="table-of-contents__link toc-highlight">검증 아키텍처</a></li><li><a href="#validator" class="table-of-contents__link toc-highlight">Validator</a></li><li><a href="#검증-메트릭" class="table-of-contents__link toc-highlight">검증 메트릭</a></li><li><a href="#validationresult" class="table-of-contents__link toc-highlight">ValidationResult</a></li><li><a href="#accuracyreport" class="table-of-contents__link toc-highlight">AccuracyReport</a></li><li><a href="#캘리브레이션-reliability-diagram" class="table-of-contents__link toc-highlight">캘리브레이션 (Reliability Diagram)</a></li><li><a href="#모델-버전-관리-ab-테스트" class="table-of-contents__link toc-highlight">모델 버전 관리 (A/B 테스트)</a></li><li><a href="#검증-결과-예시" class="table-of-contents__link toc-highlight">검증 결과 예시</a></li></ul></li><li><a href="#cli-명령어" class="table-of-contents__link toc-highlight">CLI 명령어</a><ul><li><a href="#전체-파이프라인" class="table-of-contents__link toc-highlight">전체 파이프라인</a></li><li><a href="#개별-단계" class="table-of-contents__link toc-highlight">개별 단계</a></li><li><a href="#예측-조회" class="table-of-contents__link toc-highlight">예측 조회</a></li><li><a href="#예측-검증-s7-audit" class="table-of-contents__link toc-highlight">예측 검증 (S7 Audit)</a></li></ul></li><li><a href="#스케줄러-등록" class="table-of-contents__link toc-highlight">스케줄러 등록</a><ul><li><a href="#스케줄" class="table-of-contents__link toc-highlight">스케줄</a></li><li><a href="#실행-순서" class="table-of-contents__link toc-highlight">실행 순서</a></li><li><a href="#스케줄러-명령어" class="table-of-contents__link toc-highlight">스케줄러 명령어</a></li><li><a href="#job-구현" class="table-of-contents__link toc-highlight">Job 구현</a></li></ul></li><li><a href="#db-스키마" class="table-of-contents__link toc-highlight">DB 스키마</a><ul><li><a href="#analyticsforecast_events" class="table-of-contents__link toc-highlight">analytics.forecast_events</a></li><li><a href="#analyticsforward_performance" class="table-of-contents__link toc-highlight">analytics.forward_performance</a></li><li><a href="#analyticsforecast_stats" class="table-of-contents__link toc-highlight">analytics.forecast_stats</a></li><li><a href="#analyticsforecast_validations" class="table-of-contents__link toc-highlight">analytics.forecast_validations</a></li><li><a href="#analyticsaccuracy_reports" class="table-of-contents__link toc-highlight">analytics.accuracy_reports</a></li><li><a href="#analyticscalibration_bins" class="table-of-contents__link toc-highlight">analytics.calibration_bins</a></li></ul></li><li><a href="#사용-예시" class="table-of-contents__link toc-highlight">사용 예시</a><ul><li><a href="#이벤트-감지" class="table-of-contents__link toc-highlight">이벤트 감지</a></li><li><a href="#전방-성과-계산" class="table-of-contents__link toc-highlight">전방 성과 계산</a></li><li><a href="#통계-집계" class="table-of-contents__link toc-highlight">통계 집계</a></li><li><a href="#예측-생성" class="table-of-contents__link toc-highlight">예측 생성</a></li></ul></li><li><a href="#s3s4-통합-선택" class="table-of-contents__link toc-highlight">S3/S4 통합 (선택)</a><ul><li><a href="#s3-screener-필터" class="table-of-contents__link toc-highlight">S3 Screener 필터</a></li><li><a href="#s4-ranker-점수" class="table-of-contents__link toc-highlight">S4 Ranker 점수</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aegis-v13/docs/guide/overview/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/aegis-v13/docs/guide/architecture/system-overview">Architecture</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Development</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/aegis-v13/docs/guide/backend/folder-structure">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/aegis-v13/docs/guide/frontend/folder-structure">Frontend</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/joungwonlim/aegis-v13" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Aegis. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>