"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[736],{2546(n,e,t){t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"guide/backend/audit-layer","title":"Audit Layer","description":"S7 \uc131\uacfc \ubd84\uc11d","source":"@site/docs/guide/backend/audit-layer.md","sourceDirName":"guide/backend","slug":"/guide/backend/audit-layer","permalink":"/aegis-v13/docs/guide/backend/audit-layer","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Audit Layer","description":"S7 \uc131\uacfc \ubd84\uc11d"},"sidebar":"guideSidebar","previous":{"title":"Execution Layer","permalink":"/aegis-v13/docs/guide/backend/execution-layer"},"next":{"title":"Infrastructure","permalink":"/aegis-v13/docs/guide/backend/infrastructure"}}');var a=t(4848),i=t(8453);const s={sidebar_position:7,title:"Audit Layer",description:"S7 \uc131\uacfc \ubd84\uc11d"},o="Audit Layer",l={},d=[{value:"\ucc45\uc784",id:"\ucc45\uc784",level:2},{value:"\uad6c\ud604 \uc0c1\ud0dc (2026-01-11)",id:"\uad6c\ud604-\uc0c1\ud0dc-2026-01-11",level:2},{value:"\ub9ac\uc2a4\ud06c \ubaa8\ub4c8 (\uacf5\uc6a9)",id:"\ub9ac\uc2a4\ud06c-\ubaa8\ub4c8-\uacf5\uc6a9",level:3},{value:"\ud504\ub85c\uc138\uc2a4 \ud750\ub984",id:"\ud504\ub85c\uc138\uc2a4-\ud750\ub984",level:2},{value:"\ud3f4\ub354 \uad6c\uc870",id:"\ud3f4\ub354-\uad6c\uc870",level:2},{value:"Performance Analyzer",id:"performance-analyzer",level:2},{value:"\uc778\ud130\ud398\uc774\uc2a4",id:"\uc778\ud130\ud398\uc774\uc2a4",level:3},{value:"\uad6c\ud604",id:"\uad6c\ud604",level:3},{value:"\uadc0\uc778 \ubd84\uc11d (Attribution)",id:"\uadc0\uc778-\ubd84\uc11d-attribution",level:2},{value:"Risk Analysis (\ub9ac\uc2a4\ud06c \ubd84\uc11d)",id:"risk-analysis-\ub9ac\uc2a4\ud06c-\ubd84\uc11d",level:2},{value:"3\ub2e8\uacc4 \ub3c4\uc785 \uacc4\ud68d",id:"3\ub2e8\uacc4-\ub3c4\uc785-\uacc4\ud68d",level:3},{value:"\ub9ac\uc2a4\ud06c \uc544\ud0a4\ud14d\ucc98",id:"\ub9ac\uc2a4\ud06c-\uc544\ud0a4\ud14d\ucc98",level:3},{value:"RiskEngine (\uacf5\uc6a9)",id:"riskengine-\uacf5\uc6a9",level:3},{value:"VaR/CVaR",id:"varcvar",level:3},{value:"Monte Carlo \uc124\uc815",id:"monte-carlo-\uc124\uc815",level:3},{value:"Monte Carlo \uacb0\uacfc",id:"monte-carlo-\uacb0\uacfc",level:3},{value:"RiskReporter (S7)",id:"riskreporter-s7",level:3},{value:"CLI \uba85\ub839\uc5b4",id:"cli-\uba85\ub839\uc5b4",level:3},{value:"Demo \ubaa8\ub4dc",id:"demo-\ubaa8\ub4dc",level:3},{value:"\uacb0\uacfc \uc608\uc2dc",id:"\uacb0\uacfc-\uc608\uc2dc",level:3},{value:"\uc7ac\ud604\uc131 \uac80\uc99d",id:"\uc7ac\ud604\uc131-\uac80\uc99d",level:3},{value:"\uc2a4\ub0c5\uc0f7 \uc800\uc7a5",id:"\uc2a4\ub0c5\uc0f7-\uc800\uc7a5",level:2},{value:"\uc8fc\uc694 \uc9c0\ud45c \uc124\uba85",id:"\uc8fc\uc694-\uc9c0\ud45c-\uc124\uba85",level:2},{value:"\uc124\uc815 \uc608\uc2dc (YAML)",id:"\uc124\uc815-\uc608\uc2dc-yaml",level:2},{value:"DB \uc2a4\ud0a4\ub9c8",id:"db-\uc2a4\ud0a4\ub9c8",level:2}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"audit-layer",children:"Audit Layer"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"S7: \uc131\uacfc \ubd84\uc11d"}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\ucc45\uc784",children:"\ucc45\uc784"}),"\n",(0,a.jsx)(e.p,{children:"\ud2b8\ub808\uc774\ub529 \uc131\uacfc \uce21\uc815, \uadc0\uc778 \ubd84\uc11d, \ud53c\ub4dc\ubc31 \uc0dd\uc131"}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\uad6c\ud604-\uc0c1\ud0dc-2026-01-11",children:"\uad6c\ud604 \uc0c1\ud0dc (2026-01-11)"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\ucef4\ud3ec\ub10c\ud2b8"}),(0,a.jsx)(e.th,{children:"\uc0c1\ud0dc"}),(0,a.jsx)(e.th,{children:"\ud30c\uc77c"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"PerformanceAnalyzer"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/audit/performance.go"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Attribution"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/audit/attribution.go"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Snapshot"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/audit/snapshot.go"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Repository"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/audit/repository.go"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"RiskReporter"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/audit/risk_report.go"})})]})]})]}),"\n",(0,a.jsx)(e.h3,{id:"\ub9ac\uc2a4\ud06c-\ubaa8\ub4c8-\uacf5\uc6a9",children:"\ub9ac\uc2a4\ud06c \ubaa8\ub4c8 (\uacf5\uc6a9)"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\ucef4\ud3ec\ub10c\ud2b8"}),(0,a.jsx)(e.th,{children:"\uc0c1\ud0dc"}),(0,a.jsx)(e.th,{children:"\ud30c\uc77c"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"RiskEngine"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/risk/engine.go"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"VaR/CVaR"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/risk/var.go"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Monte Carlo"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/risk/montecarlo.go"})})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Risk Types"})}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"internal/risk/types.go"})})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\ud504\ub85c\uc138\uc2a4-\ud750\ub984",children:"\ud504\ub85c\uc138\uc2a4 \ud750\ub984"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                          Audit Pipeline                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u25bc                           \u25bc                           \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1. Daily Snapshot \u2502       \u2502 2. Performance    \u2502       \u2502 3. Attribution    \u2502\n\u2502    (16:00 KST)    \u2502       \u2502    Analyzer       \u2502       \u2502    Analysis       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u2022 \ud3ec\ud2b8\ud3f4\ub9ac\uc624 \uc0c1\ud0dc \u2502       \u2502 \u2022 Total Return    \u2502       \u2502 \u2022 Momentum \uae30\uc5ec\ub3c4  \u2502\n\u2502 \u2022 \ubcf4\uc720 \uc885\ubaa9       \u2502       \u2502 \u2022 Sharpe Ratio    \u2502       \u2502 \u2022 Flow \uae30\uc5ec\ub3c4      \u2502\n\u2502 \u2022 \uc77c\ubcc4 \uc218\uc775\ub960     \u2502       \u2502 \u2022 Max Drawdown    \u2502       \u2502 \u2022 Technical \uae30\uc5ec\ub3c4 \u2502\n\u2502 \u2022 \ub204\uc801 \uc218\uc775\ub960     \u2502       \u2502 \u2022 Win Rate        \u2502       \u2502 \u2022 Value \uae30\uc5ec\ub3c4     \u2502\n\u2502                   \u2502       \u2502 \u2022 Alpha/Beta      \u2502       \u2502 \u2022 Quality \uae30\uc5ec\ub3c4   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                                    \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502       PerformanceReport           \u2502\n                    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n                    \u2502 \uc8fc\uc694 \uc9c0\ud45c:                        \u2502\n                    \u2502 \u2022 Sharpe > 1.0                   \u2502\n                    \u2502 \u2022 MDD < 20%                      \u2502\n                    \u2502 \u2022 Win Rate > 50%                 \u2502\n                    \u2502 \u2022 Alpha > 0                      \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\ud3f4\ub354-\uad6c\uc870",children:"\ud3f4\ub354 \uad6c\uc870"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"internal/audit/\n\u251c\u2500\u2500 performance.go    # \uc131\uacfc \uce21\uc815\n\u251c\u2500\u2500 attribution.go    # \uadc0\uc778 \ubd84\uc11d\n\u251c\u2500\u2500 snapshot.go       # \uc2a4\ub0c5\uc0f7 \uc800\uc7a5\n\u251c\u2500\u2500 risk_report.go    # \ub9ac\uc2a4\ud06c \ub9ac\ud3ec\ud305 (NEW)\n\u2514\u2500\u2500 repository.go     # DB \uc800\uc7a5\uc18c\n\ninternal/risk/        # \uacf5\uc6a9 \ub9ac\uc2a4\ud06c \uc5d4\uc9c4 (NEW)\n\u251c\u2500\u2500 engine.go         # RiskEngine \uc778\ud130\ud398\uc774\uc2a4/\uad6c\ud604\n\u251c\u2500\u2500 var.go            # VaR/CVaR \uacc4\uc0b0\n\u251c\u2500\u2500 montecarlo.go     # Monte Carlo \uc2dc\ubbac\ub808\uc774\ud130\n\u2514\u2500\u2500 types.go          # \uacf5\uc6a9 \ud0c0\uc785\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"performance-analyzer",children:"Performance Analyzer"}),"\n",(0,a.jsx)(e.h3,{id:"\uc778\ud130\ud398\uc774\uc2a4",children:"\uc778\ud130\ud398\uc774\uc2a4"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:"type Auditor interface {\n    Analyze(ctx context.Context, period string) (*PerformanceReport, error)\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\uad6c\ud604",children:"\uad6c\ud604"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'// internal/audit/performance.go\n\ntype auditor struct {\n    db *pgxpool.Pool\n}\n\ntype PerformanceReport struct {\n    Period        string    `json:"period"`\n    StartDate     time.Time `json:"start_date"`\n    EndDate       time.Time `json:"end_date"`\n\n    // \uc218\uc775\ub960\n    TotalReturn   float64   `json:"total_return"`\n    AnnualReturn  float64   `json:"annual_return"`\n\n    // \ub9ac\uc2a4\ud06c \uc9c0\ud45c\n    Volatility    float64   `json:"volatility"`\n    Sharpe        float64   `json:"sharpe"`\n    Sortino       float64   `json:"sortino"`\n    MaxDrawdown   float64   `json:"max_drawdown"`\n\n    // \ud2b8\ub808\uc774\ub529 \uc9c0\ud45c\n    WinRate       float64   `json:"win_rate"`\n    AvgWin        float64   `json:"avg_win"`\n    AvgLoss       float64   `json:"avg_loss"`\n    ProfitFactor  float64   `json:"profit_factor"`\n\n    // \ube44\uad50\n    Benchmark     float64   `json:"benchmark"`      // KOSPI \uc218\uc775\ub960\n    Alpha         float64   `json:"alpha"`\n    Beta          float64   `json:"beta"`\n}\n\nfunc (a *auditor) Analyze(ctx context.Context, period string) (*PerformanceReport, error) {\n    report := &PerformanceReport{Period: period}\n\n    // \uae30\uac04 \ud30c\uc2f1\n    report.StartDate, report.EndDate = a.parsePeriod(period)\n\n    // \uc77c\ubcc4 \uc218\uc775\ub960 \uc870\ud68c\n    dailyReturns := a.getDailyReturns(ctx, report.StartDate, report.EndDate)\n\n    // \uc218\uc775\ub960 \uacc4\uc0b0\n    report.TotalReturn = a.calculateTotalReturn(dailyReturns)\n    report.AnnualReturn = a.annualize(report.TotalReturn, len(dailyReturns))\n\n    // \ub9ac\uc2a4\ud06c \uc9c0\ud45c\n    report.Volatility = a.calculateVolatility(dailyReturns)\n    report.Sharpe = a.calculateSharpe(report.AnnualReturn, report.Volatility)\n    report.MaxDrawdown = a.calculateMaxDrawdown(dailyReturns)\n\n    // \ud2b8\ub808\uc774\ub529 \uc9c0\ud45c\n    trades := a.getTrades(ctx, report.StartDate, report.EndDate)\n    report.WinRate = a.calculateWinRate(trades)\n    report.ProfitFactor = a.calculateProfitFactor(trades)\n\n    // \ubca4\uce58\ub9c8\ud06c \ube44\uad50\n    report.Benchmark = a.getBenchmarkReturn(ctx, report.StartDate, report.EndDate)\n    report.Alpha = report.TotalReturn - report.Benchmark\n\n    return report, nil\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\uadc0\uc778-\ubd84\uc11d-attribution",children:"\uadc0\uc778 \ubd84\uc11d (Attribution)"}),"\n",(0,a.jsx)(e.p,{children:"\uc5b4\ub5a4 \uc694\uc778\uc774 \uc218\uc775\uc5d0 \uae30\uc5ec\ud588\ub294\uc9c0 \ubd84\uc11d:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'// internal/audit/attribution.go\n\ntype Attribution struct {\n    Factor      string  `json:"factor"`\n    Contribution float64 `json:"contribution"`  // \uc218\uc775 \uae30\uc5ec\ub3c4\n    Exposure    float64  `json:"exposure"`       // \ud3c9\uade0 \ub178\ucd9c\ub3c4\n}\n\nfunc (a *auditor) Attribution(ctx context.Context, period string) ([]Attribution, error) {\n    attrs := make([]Attribution, 0)\n\n    // \ud329\ud130\ubcc4 \uae30\uc5ec\ub3c4 \uacc4\uc0b0 (SSOT: data-flow.md \uae30\uc900)\n    factors := []FactorInfo{\n        {"momentum", 0.20},   // 20%\n        {"technical", 0.20},  // 20%\n        {"value", 0.15},      // 15%\n        {"quality", 0.15},    // 15%\n        {"flow", 0.25},       // 25% \u2b50 \uc218\uae09 (\ud55c\uad6d \uc2dc\uc7a5 \uc911\uc694)\n        {"event", 0.05},      // 5%\n    }\n\n    for _, factor := range factors {\n        contrib := a.calculateFactorContribution(ctx, period, factor.Name)\n        attrs = append(attrs, Attribution{\n            Factor:       factor.Name,\n            Contribution: contrib,\n            Exposure:     a.getAverageExposure(ctx, period, factor.Name),\n        })\n    }\n\n    return attrs, nil\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"risk-analysis-\ub9ac\uc2a4\ud06c-\ubd84\uc11d",children:"Risk Analysis (\ub9ac\uc2a4\ud06c \ubd84\uc11d)"}),"\n",(0,a.jsx)(e.h3,{id:"3\ub2e8\uacc4-\ub3c4\uc785-\uacc4\ud68d",children:"3\ub2e8\uacc4 \ub3c4\uc785 \uacc4\ud68d"}),"\n",(0,a.jsx)(e.p,{children:"\ub9ac\uc2a4\ud06c \ubd84\uc11d\uc740 \ub2e8\uacc4\uc801\uc73c\ub85c \ub3c4\uc785\ub429\ub2c8\ub2e4."}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"Phase"}),(0,a.jsx)(e.th,{children:"\ubaa9\ud45c"}),(0,a.jsx)(e.th,{children:"\uc0c1\ud0dc"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Phase A: S7 Audit"})}),(0,a.jsx)(e.td,{children:"Monte Carlo/Forecast\uac00 \uc720\uc6a9\ud55c\uc9c0 \uac80\uc99d"}),(0,a.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Phase B: S6 Shadow"})}),(0,a.jsx)(e.td,{children:"\uc2e4\uc6b4\uc601\uc5d0\uc11c \uc5bc\ub9c8\ub098 \uc790\uc8fc \ub9c9\ud788\ub294\uc9c0 \uad00\ucc30"}),(0,a.jsx)(e.td,{children:"\ud83d\udd1c \uc608\uc815"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Phase C: S6 Enforce"})}),(0,a.jsx)(e.td,{children:"\uc2e4\uc81c \uc8fc\ubb38 \uac70\ubd80/\ucd95\uc18c"}),(0,a.jsx)(e.td,{children:"\ud83d\udd1c \uc608\uc815"})]})]})]}),"\n",(0,a.jsx)(e.h3,{id:"\ub9ac\uc2a4\ud06c-\uc544\ud0a4\ud14d\ucc98",children:"\ub9ac\uc2a4\ud06c \uc544\ud0a4\ud14d\ucc98"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Risk Engine (\uacf5\uc6a9)                        \u2502\n\u2502                      internal/risk/engine.go                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u25bc                                 \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    S6 Execution (\uc0ac\uc804)      \u2502   \u2502    S7 Audit (\uc0ac\ud6c4)          \u2502\n\u2502    Risk Gate                \u2502   \u2502    Risk Reporter            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u2022 VaR/ES \ud55c\ub3c4 \uccb4\ud06c          \u2502   \u2502 \u2022 Monte Carlo \uc2dc\ubbac\ub808\uc774\uc158    \u2502\n\u2502 \u2022 \uc775\uc2a4\ud3ec\uc800 \ud55c\ub3c4             \u2502   \u2502 \u2022 Forecast \uce98\ub9ac\ube0c\ub808\uc774\uc158     \u2502\n\u2502 \u2022 \uc720\ub3d9\uc131 \uc0c1\ud55c               \u2502   \u2502 \u2022 Decision tracing          \u2502\n\u2502 \u2022 \ube60\ub984 (100-300ms)          \u2502   \u2502 \u2022 \ubb34\uac70\uc6c0 (\uc218 \ucd08)            \u2502\n\u2502 \u2022 \uacb0\uc815\uc801, \ubcf4\uc218\uc801            \u2502   \u2502 \u2022 \uc0c1\uc138 \ubd84\uc11d                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(e.h3,{id:"riskengine-\uacf5\uc6a9",children:"RiskEngine (\uacf5\uc6a9)"}),"\n",(0,a.jsx)(e.p,{children:"S6(\uc0ac\uc804 \uac8c\uc774\ud2b8)\uc640 S7(\uc0ac\ud6c4 \ub9ac\ud3ec\ud2b8) \ubaa8\ub450 \uc0ac\uc6a9\ud558\ub294 \uc21c\uc218 \uacc4\uc0b0 \uc5d4\uc9c4\uc785\ub2c8\ub2e4."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:"// internal/risk/engine.go\n\ntype Engine struct{}\n\n// NewEngine Engine \uc0dd\uc131\nfunc NewEngine() *Engine {\n    return &Engine{}\n}\n\n// VaR \uacc4\uc0b0 (Historical Simulation)\nfunc (e *Engine) VaR(returns []float64, confidence float64) VaRResult\n\n// Monte Carlo \uc2dc\ubbac\ub808\uc774\uc158\nfunc (e *Engine) MonteCarlo(input PortfolioReturns, config MonteCarloConfig) (*MonteCarloResult, error)\n\n// \uc2a4\ud2b8\ub808\uc2a4 \ud14c\uc2a4\ud2b8\nfunc (e *Engine) StressTest(weights map[string]float64, scenarios map[string]float64) map[string]float64\n"})}),"\n",(0,a.jsx)(e.h3,{id:"varcvar",children:"VaR/CVaR"}),"\n",(0,a.jsx)(e.p,{children:"VaR(Value at Risk)\ub294 \ud2b9\uc815 \uc2e0\ub8b0\uc218\uc900\uc5d0\uc11c \uc608\uc0c1\ub418\ub294 \ucd5c\ub300 \uc190\uc2e4\uc785\ub2c8\ub2e4.\nCVaR(Conditional VaR, Expected Shortfall)\ub294 VaR\ub97c \ucd08\uacfc\ud558\ub294 \uc190\uc2e4\uc758 \ud3c9\uade0\uc785\ub2c8\ub2e4."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'// internal/risk/var.go\n\n// VaRResult VaR \uacc4\uc0b0 \uacb0\uacfc\ntype VaRResult struct {\n    Confidence float64  // \uc2e0\ub8b0\uc218\uc900 (0.95, 0.99)\n    VaR        float64  // Value at Risk (\uc190\uc2e4=\uc591\uc218)\n    CVaR       float64  // Expected Shortfall\n}\n\n// \ud574\uc11d \uc608\uc2dc:\n// VaR95 = 0.05 \u2192 "95% \uc2e0\ub8b0\uc218\uc900\uc5d0\uc11c \ud558\ub8e8 \ucd5c\ub300 5% \uc190\uc2e4"\n// CVaR95 = 0.08 \u2192 "VaR\ub97c \ucd08\uacfc\ud558\ub294 \uc190\uc2e4\uc774 \ubc1c\uc0dd\ud558\uba74 \ud3c9\uade0 8% \uc190\uc2e4"\n'})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"VaR \uacc4\uc0b0 \ubc29\ubc95 (Historical Simulation)"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:"// \uacfc\uac70 \uc218\uc775\ub960\uc744 \uc815\ub82c\ud558\uc5ec percentile \uacc4\uc0b0\nfunc (e *Engine) VaR(returns []float64, confidence float64) VaRResult {\n    sorted := make([]float64, len(returns))\n    copy(sorted, returns)\n    sort.Float64s(sorted)\n\n    idx := int((1.0 - confidence) * float64(len(sorted)))\n    var result VaRResult\n    result.Confidence = confidence\n    result.VaR = -sorted[idx]  // \uc190\uc2e4\uc744 \uc591\uc218\ub85c \ud45c\ud604\n\n    // CVaR: VaR \uc774\ud558 \uc218\uc775\ub960\uc758 \ud3c9\uade0\n    sum := 0.0\n    for i := 0; i <= idx; i++ {\n        sum += sorted[i]\n    }\n    result.CVaR = -sum / float64(idx+1)\n\n    return result\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"monte-carlo-\uc124\uc815",children:"Monte Carlo \uc124\uc815"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:"// internal/risk/types.go\n\ntype MonteCarloConfig struct {\n    Mode             MonteCarloMode   // portfolio_univariate (\ube60\ub984) / asset_multivariate (\uc815\ubc00)\n    ReturnType       ReturnType       // simple / log\n    NumSimulations   int              // \uae30\ubcf8: 10000\n    HoldingPeriod    int              // \ubcf4\uc720 \uae30\uac04 (\uc77c), \uae30\ubcf8: 5\n    ConfidenceLevels []float64        // [0.95, 0.99]\n    Method           MonteCarloMethod // historical / normal / t\n    LookbackDays     int              // \uae30\ubcf8: 200\n    Seed             int64            // \uc7ac\ud604\uc131\uc6a9 (0=\ub79c\ub364)\n    MinSamples       int              // \ucd5c\uc18c \uc0d8\ud50c \uc218 (\uae30\ubcf8: 30, fail-closed)\n}\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\uc124\uc815 \uc635\uc158 \uc0c1\uc138"}),":"]}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\uc635\uc158"}),(0,a.jsx)(e.th,{children:"\uac12"}),(0,a.jsx)(e.th,{children:"\uc124\uba85"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Mode"})}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"portfolio_univariate"})}),(0,a.jsx)(e.td,{children:"\ud3ec\ud2b8\ud3f4\ub9ac\uc624 \uc804\uccb4 \uc218\uc775\ub960\ub85c \uc2dc\ubbac\ub808\uc774\uc158 (\ube60\ub984)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"asset_multivariate"})}),(0,a.jsx)(e.td,{children:"\uac1c\ubcc4 \uc790\uc0b0\ubcc4 \uc2dc\ubbac\ub808\uc774\uc158 (\uc0c1\uad00\uad00\uacc4 \uace0\ub824, \uc815\ubc00)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Method"})}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"historical"})}),(0,a.jsx)(e.td,{children:"\uacfc\uac70 \uc218\uc775\ub960 Bootstrap \uc0d8\ud50c\ub9c1"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"normal"})}),(0,a.jsx)(e.td,{children:"\uc815\uaddc\ubd84\ud3ec \uac00\uc815"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"t"})}),(0,a.jsx)(e.td,{children:"Student-t \ubd84\ud3ec (fat tail \ubc18\uc601)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Seed"})}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"0"})}),(0,a.jsx)(e.td,{children:"\ub79c\ub364 (\ub9e4\ubc88 \ub2e4\ub978 \uacb0\uacfc)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{}),(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"42"})}),(0,a.jsx)(e.td,{children:"\uace0\uc815 \uc2dc\ub4dc (\uc7ac\ud604\uc131 \ubcf4\uc7a5)"})]})]})]}),"\n",(0,a.jsx)(e.h3,{id:"monte-carlo-\uacb0\uacfc",children:"Monte Carlo \uacb0\uacfc"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'// internal/risk/types.go\n\ntype MonteCarloResult struct {\n    RunID               string              `json:"run_id"`\n    RunDate             time.Time           `json:"run_date"`\n    DecisionSnapshotID  *int64              `json:"decision_snapshot_id"`  // \uc7ac\ud604\uc131\uc6a9\n    Config              MonteCarloConfig    `json:"config"`                // \uc804\uccb4 \uc124\uc815 \uae30\ub85d\n    InputSampleCount    int                 `json:"input_sample_count"`\n    MeanReturn          float64             `json:"mean_return"`\n    StdDev              float64             `json:"std_dev"`\n    VaR95               float64             `json:"var_95"`\n    VaR99               float64             `json:"var_99"`\n    CVaR95              float64             `json:"cvar_95"`\n    CVaR99              float64             `json:"cvar_99"`\n    Percentiles         map[int]float64     `json:"percentiles"`  // {1, 5, 10, 25, 50, 75, 90, 95, 99}\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"riskreporter-s7",children:"RiskReporter (S7)"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:"// internal/audit/risk_report.go\n\ntype RiskReporter struct {\n    engine *risk.Engine\n    repo   *Repository\n    log    zerolog.Logger\n}\n\n// NewRiskReporter RiskReporter \uc0dd\uc131\nfunc NewRiskReporter(engine *risk.Engine, repo *Repository, log zerolog.Logger) *RiskReporter\n\n// GenerateReport \uc804\uccb4 \ub9ac\uc2a4\ud06c \ub9ac\ud3ec\ud2b8 \uc0dd\uc131\nfunc (r *RiskReporter) GenerateReport(ctx context.Context, input RiskReportInput) (*RiskReport, error)\n\n// SaveMonteCarloResult Monte Carlo \uacb0\uacfc \uc800\uc7a5\nfunc (r *RiskReporter) SaveMonteCarloResult(ctx context.Context, result *risk.MonteCarloResult) error\n"})}),"\n",(0,a.jsx)(e.h3,{id:"cli-\uba85\ub839\uc5b4",children:"CLI \uba85\ub839\uc5b4"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Monte Carlo \uc2dc\ubbac\ub808\uc774\uc158\ngo run ./cmd/quant audit montecarlo                        # \uae30\ubcf8 \uc124\uc815\ngo run ./cmd/quant audit montecarlo --simulations 50000    # \uc2dc\ubbac\ub808\uc774\uc158 \ud69f\uc218\ngo run ./cmd/quant audit montecarlo --holding 5            # \ubcf4\uc720 \uae30\uac04 (\uc77c)\ngo run ./cmd/quant audit montecarlo --method t             # Student-t \ubd84\ud3ec (fat tail)\ngo run ./cmd/quant audit montecarlo --seed 42              # \uc7ac\ud604\uc131\uc6a9 \uc2dc\ub4dc\ngo run ./cmd/quant audit montecarlo --output json          # JSON \ucd9c\ub825\n\n# \ub370\ubaa8 \ubaa8\ub4dc (\ud3ec\ud2b8\ud3f4\ub9ac\uc624 \uc2a4\ub0c5\uc0f7 \uc5c6\uc744 \ub54c)\ngo run ./cmd/quant audit montecarlo --demo                 # \uc0d8\ud50c \ud3ec\ud2b8\ud3f4\ub9ac\uc624\ub85c \ud14c\uc2a4\ud2b8\ngo run ./cmd/quant audit montecarlo --demo --method t --seed 42\n\n# \ub9ac\uc2a4\ud06c \ub9ac\ud3ec\ud2b8\ngo run ./cmd/quant audit risk-report                       # \uae30\ubcf8\ngo run ./cmd/quant audit risk-report --date 2024-01-15     # \ud2b9\uc815 \ub0a0\uc9dc\ngo run ./cmd/quant audit risk-report --demo                # \ub370\ubaa8 \ubaa8\ub4dc\ngo run ./cmd/quant audit risk-report --output json         # JSON \ucd9c\ub825\n"})}),"\n",(0,a.jsx)(e.h3,{id:"demo-\ubaa8\ub4dc",children:"Demo \ubaa8\ub4dc"}),"\n",(0,a.jsx)(e.p,{children:"\ud3ec\ud2b8\ud3f4\ub9ac\uc624 \uc2a4\ub0c5\uc0f7\uc774 \uc5c6\uc744 \ub54c \uc0d8\ud50c \ud3ec\ud2b8\ud3f4\ub9ac\uc624\ub85c \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'// \uc0d8\ud50c \ud3ec\ud2b8\ud3f4\ub9ac\uc624 (\ub300\ud615\uc8fc 10\uc885\ubaa9, \uade0\ub4f1 \ube44\uc911)\nweights := map[string]float64{\n    "005930": 0.10,  // \uc0bc\uc131\uc804\uc790\n    "000660": 0.10,  // SK\ud558\uc774\ub2c9\uc2a4\n    "035420": 0.10,  // NAVER\n    "035720": 0.10,  // \uce74\uce74\uc624\n    "051910": 0.10,  // LG\ud654\ud559\n    "006400": 0.10,  // \uc0bc\uc131SDI\n    "005380": 0.10,  // \ud604\ub300\ucc28\n    "000270": 0.10,  // \uae30\uc544\n    "068270": 0.10,  // \uc140\ud2b8\ub9ac\uc628\n    "105560": 0.10,  // KB\uae08\uc735\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"\uacb0\uacfc-\uc608\uc2dc",children:"\uacb0\uacfc \uc608\uc2dc"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n                Monte Carlo Simulation Results\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n\ud83d\udcca Configuration\n  Run ID: mc_20260111_143052_abc123\n  Simulations: 10,000\n  Holding Period: 5 days\n  Method: historical_bootstrap\n  Seed: 42\n\n\ud83d\udcc8 Input Data\n  Sample Count: 487 days\n  Portfolio Stocks: 10\n\n\ud83d\udcc9 Risk Metrics\n  Mean Return: +0.42%\n  Std Dev: 2.18%\n  VaR 95%: 3.21% (5\uc77c \ucd5c\ub300 \uc190\uc2e4)\n  VaR 99%: 5.67%\n  CVaR 95%: 4.35% (Expected Shortfall)\n  CVaR 99%: 6.89%\n\n\ud83d\udcca Percentiles\n  1%:  -6.12%\n  5%:  -3.21%\n  10%: -2.15%\n  25%: -0.87%\n  50%: +0.38% (median)\n  75%: +1.65%\n  90%: +2.89%\n  95%: +3.54%\n  99%: +5.21%\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\uc7ac\ud604\uc131-\uac80\uc99d",children:"\uc7ac\ud604\uc131 \uac80\uc99d"}),"\n",(0,a.jsx)(e.p,{children:"\ub3d9\uc77c\ud55c seed\ub97c \uc0ac\uc6a9\ud558\uba74 \ub3d9\uc77c\ud55c \uacb0\uacfc\uac00 \ub098\uc635\ub2c8\ub2e4."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# \uccab \ubc88\uc9f8 \uc2e4\ud589\n$ go run ./cmd/quant audit montecarlo --demo --seed 42\nVaR 95%: 3.21%\n\n# \ub450 \ubc88\uc9f8 \uc2e4\ud589 (\ub3d9\uc77c seed)\n$ go run ./cmd/quant audit montecarlo --demo --seed 42\nVaR 95%: 3.21%  # \u2705 \ub3d9\uc77c\ud55c \uacb0\uacfc\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\uc2a4\ub0c5\uc0f7-\uc800\uc7a5",children:"\uc2a4\ub0c5\uc0f7 \uc800\uc7a5"}),"\n",(0,a.jsx)(e.p,{children:"\ub9e4\uc77c \ud3ec\ud2b8\ud3f4\ub9ac\uc624 \uc0c1\ud0dc \uae30\ub85d:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",children:'// internal/audit/snapshot.go\n\ntype DailySnapshot struct {\n    Date         time.Time              `json:"date"`\n    TotalValue   float64                `json:"total_value"`\n    Cash         float64                `json:"cash"`\n    Positions    []PositionSnapshot     `json:"positions"`\n    DailyReturn  float64                `json:"daily_return"`\n    CumReturn    float64                `json:"cum_return"`\n}\n\ntype PositionSnapshot struct {\n    Code        string  `json:"code"`\n    Quantity    int     `json:"quantity"`\n    Price       int     `json:"price"`\n    Value       float64 `json:"value"`\n    Weight      float64 `json:"weight"`\n    DailyPnL    float64 `json:"daily_pnl"`\n}\n\nfunc (a *auditor) SaveSnapshot(ctx context.Context) error {\n    snapshot := &DailySnapshot{\n        Date: time.Now(),\n    }\n\n    // \ud604\uc7ac \uc794\uace0 \uc870\ud68c\n    balance := a.broker.GetBalance(ctx)\n    snapshot.TotalValue = balance.TotalValue\n    snapshot.Cash = balance.Cash\n\n    // \ud3ec\uc9c0\uc158 \uc2a4\ub0c5\uc0f7\n    for _, pos := range balance.Positions {\n        snapshot.Positions = append(snapshot.Positions, PositionSnapshot{\n            Code:     pos.Code,\n            Quantity: pos.Quantity,\n            Price:    pos.CurrentPrice,\n            Value:    float64(pos.Quantity * pos.CurrentPrice),\n            Weight:   float64(pos.Quantity*pos.CurrentPrice) / snapshot.TotalValue,\n        })\n    }\n\n    // \uc218\uc775\ub960 \uacc4\uc0b0\n    prevSnapshot := a.getPreviousSnapshot(ctx)\n    if prevSnapshot != nil {\n        snapshot.DailyReturn = (snapshot.TotalValue - prevSnapshot.TotalValue) / prevSnapshot.TotalValue\n    }\n\n    // \uc800\uc7a5\n    return a.saveSnapshot(ctx, snapshot)\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\uc8fc\uc694-\uc9c0\ud45c-\uc124\uba85",children:"\uc8fc\uc694 \uc9c0\ud45c \uc124\uba85"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\uc9c0\ud45c"}),(0,a.jsx)(e.th,{children:"\uc124\uba85"}),(0,a.jsx)(e.th,{children:"\ubaa9\ud45c"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Sharpe"})}),(0,a.jsx)(e.td,{children:"(\uc218\uc775\ub960 - \ubb34\uc704\ud5d8) / \ubcc0\ub3d9\uc131"}),(0,a.jsx)(e.td,{children:"> 1.0"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Sortino"})}),(0,a.jsx)(e.td,{children:"(\uc218\uc775\ub960 - \ubb34\uc704\ud5d8) / \ud558\ub77d\ubcc0\ub3d9\uc131"}),(0,a.jsx)(e.td,{children:"> 1.5"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"MDD"})}),(0,a.jsx)(e.td,{children:"\ucd5c\ub300 \ub099\ud3ed"}),(0,a.jsx)(e.td,{children:"< 20%"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Win Rate"})}),(0,a.jsx)(e.td,{children:"\uc2b9\ub960"}),(0,a.jsx)(e.td,{children:"> 50%"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Profit Factor"})}),(0,a.jsx)(e.td,{children:"\ucd1d\uc774\uc775 / \ucd1d\uc190\uc2e4"}),(0,a.jsx)(e.td,{children:"> 1.5"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Alpha"})}),(0,a.jsx)(e.td,{children:"\ubca4\uce58\ub9c8\ud06c \ub300\ube44 \ucd08\uacfc\uc218\uc775"}),(0,a.jsx)(e.td,{children:"> 0"})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\uc124\uc815-\uc608\uc2dc-yaml",children:"\uc124\uc815 \uc608\uc2dc (YAML)"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:'# config/audit.yaml\n\naudit:\n  # \uc2a4\ub0c5\uc0f7\n  snapshot:\n    enabled: true\n    time: "16:00"  # \ub9e4\uc77c \uc624\ud6c4 4\uc2dc\n\n  # \ubca4\uce58\ub9c8\ud06c\n  benchmark: "KOSPI"  # KOSPI, KOSDAQ\n\n  # \uc54c\ub9bc \uae30\uc900\n  alerts:\n    max_drawdown: -0.10    # MDD -10% \ub3c4\ub2ec \uc2dc\n    daily_loss: -0.03      # \uc77c \uc190\uc2e4 -3% \uc2dc\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"db-\uc2a4\ud0a4\ub9c8",children:"DB \uc2a4\ud0a4\ub9c8"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:'-- audit.daily_snapshots: \uc77c\ubcc4 \uc2a4\ub0c5\uc0f7\nCREATE TABLE audit.daily_snapshots (\n    id           SERIAL PRIMARY KEY,\n    date         DATE NOT NULL UNIQUE,\n    total_value  DECIMAL(15,2),\n    cash         DECIMAL(15,2),\n    positions    JSONB,\n    daily_return DECIMAL(8,6),\n    cum_return   DECIMAL(8,6),\n    created_at   TIMESTAMPTZ DEFAULT NOW()\n);\n\n-- audit.performance_reports: \uc131\uacfc \ub9ac\ud3ec\ud2b8\nCREATE TABLE audit.performance_reports (\n    id            SERIAL PRIMARY KEY,\n    period        VARCHAR(20),      -- "1M", "3M", "YTD", "1Y"\n    start_date    DATE,\n    end_date      DATE,\n    total_return  DECIMAL(8,6),\n    sharpe        DECIMAL(6,3),\n    max_drawdown  DECIMAL(8,6),\n    win_rate      DECIMAL(5,4),\n    report_data   JSONB,\n    created_at    TIMESTAMPTZ DEFAULT NOW()\n);\n\n-- audit.attributions: \uadc0\uc778 \ubd84\uc11d\nCREATE TABLE audit.attributions (\n    id           SERIAL PRIMARY KEY,\n    period       VARCHAR(20),\n    factor       VARCHAR(20),\n    contribution DECIMAL(8,6),\n    exposure     DECIMAL(5,4),\n    created_at   TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX idx_snapshots_date ON audit.daily_snapshots(date);\n\n-- analytics.montecarlo_results: Monte Carlo \uacb0\uacfc\nCREATE TABLE analytics.montecarlo_results (\n    run_id              VARCHAR(50) PRIMARY KEY,\n    run_date            DATE NOT NULL,\n    decision_snapshot_id BIGINT REFERENCES audit.decision_snapshots(id),\n    config              JSONB NOT NULL,       -- \uc7ac\ud604\uc131\uc6a9\n    input_sample_count  INT NOT NULL,\n    mean_return         DECIMAL(10,6),\n    std_dev             DECIMAL(10,6),\n    var_95              DECIMAL(10,6),\n    var_99              DECIMAL(10,6),\n    cvar_95             DECIMAL(10,6),\n    cvar_99             DECIMAL(10,6),\n    percentiles         JSONB,\n    created_at          TIMESTAMPTZ DEFAULT NOW()\n);\n\n-- analytics.var_daily_snapshots: \uc77c\ubcc4 VaR \ucd94\uc774\nCREATE TABLE analytics.var_daily_snapshots (\n    snapshot_date  DATE NOT NULL,\n    portfolio_id   VARCHAR(50) DEFAULT \'main\',\n    var_95         DECIMAL(10,6),\n    var_99         DECIMAL(10,6),\n    cvar_95        DECIMAL(10,6),\n    cvar_99        DECIMAL(10,6),\n    portfolio_value DECIMAL(15,2),\n    var_95_amount  DECIMAL(15,2),  -- \ucd5c\ub300 \uc190\uc2e4 \uae08\uc561\n    PRIMARY KEY (snapshot_date, portfolio_id)\n);\n\n-- analytics.stress_test_results: \uc2a4\ud2b8\ub808\uc2a4 \ud14c\uc2a4\ud2b8\nCREATE TABLE analytics.stress_test_results (\n    run_id         VARCHAR(50),\n    scenario_name  VARCHAR(50),\n    portfolio_loss DECIMAL(10,6),\n    loss_amount    DECIMAL(15,2),\n    PRIMARY KEY (run_id, scenario_name)\n);\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Prev"}),": ",(0,a.jsx)(e.a,{href:"/aegis-v13/docs/guide/backend/execution-layer",children:"Execution Layer"}),"\n",(0,a.jsx)(e.strong,{children:"Next"}),": ",(0,a.jsx)(e.a,{href:"/aegis-v13/docs/guide/backend/infrastructure",children:"Infrastructure"})]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},8453(n,e,t){t.d(e,{R:()=>s,x:()=>o});var r=t(6540);const a={},i=r.createContext(a);function s(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);