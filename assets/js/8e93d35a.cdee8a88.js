"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[2627],{2540(n,e,t){t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"guide/backend/signals-layer","title":"Signals Layer","description":"S2 \uc2dc\uadf8\ub110 \uc0dd\uc131","source":"@site/docs/guide/backend/signals-layer.md","sourceDirName":"guide/backend","slug":"/guide/backend/signals-layer","permalink":"/aegis-v13/docs/guide/backend/signals-layer","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Signals Layer","description":"S2 \uc2dc\uadf8\ub110 \uc0dd\uc131"},"sidebar":"guideSidebar","previous":{"title":"Data Layer","permalink":"/aegis-v13/docs/guide/backend/data-layer"},"next":{"title":"Selection Layer","permalink":"/aegis-v13/docs/guide/backend/selection-layer"}}');var l=t(4848),i=t(8453);const s={sidebar_position:3,title:"Signals Layer",description:"S2 \uc2dc\uadf8\ub110 \uc0dd\uc131"},c="Signals Layer",a={},o=[{value:"\ucc45\uc784",id:"\ucc45\uc784",level:2},{value:"\uad6c\ud604 \uc0c1\ud0dc (2026-01-10)",id:"\uad6c\ud604-\uc0c1\ud0dc-2026-01-10",level:2},{value:"\ud3f4\ub354 \uad6c\uc870",id:"\ud3f4\ub354-\uad6c\uc870",level:2},{value:"Signal Builder",id:"signal-builder",level:2},{value:"\uc778\ud130\ud398\uc774\uc2a4",id:"\uc778\ud130\ud398\uc774\uc2a4",level:3},{value:"\uad6c\ud604",id:"\uad6c\ud604",level:3},{value:"Momentum Signal",id:"momentum-signal",level:2},{value:"Value Signal",id:"value-signal",level:2},{value:"Flow Signal (\uc218\uae09)",id:"flow-signal-\uc218\uae09",level:2},{value:"\uc218\uae09 \uc810\uc218 \ud574\uc11d",id:"\uc218\uae09-\uc810\uc218-\ud574\uc11d",level:3},{value:"Event Signal",id:"event-signal",level:2},{value:"\uc774\ubca4\ud2b8 \ud0c0\uc785\ubcc4 \uc810\uc218",id:"\uc774\ubca4\ud2b8-\ud0c0\uc785\ubcc4-\uc810\uc218",level:2},{value:"Signal Repository",id:"signal-repository",level:2},{value:"DB \uc2a4\ud0a4\ub9c8",id:"db-\uc2a4\ud0a4\ub9c8",level:2}];function d(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"signals-layer",children:"Signals Layer"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"S2: \uc2dc\uadf8\ub110 \uc0dd\uc131"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\ucc45\uc784",children:"\ucc45\uc784"}),"\n",(0,l.jsxs)(e.p,{children:["Universe\uc5d0 \ud3ec\ud568\ub41c \uc885\ubaa9\ub4e4\uc758 ",(0,l.jsx)(e.strong,{children:"\ud329\ud130/\uc774\ubca4\ud2b8 \uc2dc\uadf8\ub110"}),"\uc744 \uacc4\uc0b0"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\uad6c\ud604-\uc0c1\ud0dc-2026-01-10",children:"\uad6c\ud604 \uc0c1\ud0dc (2026-01-10)"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\ucef4\ud3ec\ub10c\ud2b8"}),(0,l.jsx)(e.th,{children:"\uc0c1\ud0dc"}),(0,l.jsx)(e.th,{children:"\ud30c\uc77c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"SignalBuilder"})}),(0,l.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/builder.go"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"Momentum"})}),(0,l.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/momentum.go"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"Technical"})}),(0,l.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/technical.go"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"Value"})}),(0,l.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/value.go"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"Quality"})}),(0,l.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/quality.go"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"Flow (\uc218\uae09)"})}),(0,l.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/flow.go"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"Event"})}),(0,l.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/event.go"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"Repository"})}),(0,l.jsx)(e.td,{children:"\u2705 \uc644\ub8cc"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/repository.go"})})]})]})]}),"\n",(0,l.jsx)(e.admonition,{title:"YAML SSOT",type:"tip",children:(0,l.jsxs)(e.p,{children:["\ud329\ud130 \uac00\uc911\uce58\uc640 \uc815\uaddc\ud654 \uc124\uc815\uc740 ",(0,l.jsx)(e.code,{children:"backend/config/strategy/korea_equity_v13.yaml"}),"\uc758 ",(0,l.jsx)(e.code,{children:"signals"})," \uc139\uc158\uc5d0\uc11c \uad00\ub9ac\ub429\ub2c8\ub2e4."]})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\ud3f4\ub354-\uad6c\uc870",children:"\ud3f4\ub354 \uad6c\uc870"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"internal/s2_signals/\n\u251c\u2500\u2500 builder.go      # SignalBuilder \uad6c\ud604 (\uc870\ud569)\n\u251c\u2500\u2500 momentum.go     # \ubaa8\uba58\ud140 \uc2dc\uadf8\ub110\n\u251c\u2500\u2500 technical.go    # \uae30\uc220\uc801 \uc2dc\uadf8\ub110 (RSI, MACD)\n\u251c\u2500\u2500 value.go        # \uac00\uce58 \uc2dc\uadf8\ub110\n\u251c\u2500\u2500 quality.go      # \ud004\ub9ac\ud2f0 \uc2dc\uadf8\ub110\n\u251c\u2500\u2500 flow.go         # \uc218\uae09 \uc2dc\uadf8\ub110 \u2b50\n\u251c\u2500\u2500 event.go        # \uc774\ubca4\ud2b8 \uc2dc\uadf8\ub110\n\u2514\u2500\u2500 repository.go   # DB \uc811\uadfc\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"signal-builder",children:"Signal Builder"}),"\n",(0,l.jsx)(e.h3,{id:"\uc778\ud130\ud398\uc774\uc2a4",children:"\uc778\ud130\ud398\uc774\uc2a4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"type SignalBuilder interface {\n    Build(ctx context.Context, universe *Universe) (*SignalSet, error)\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\uad6c\ud604",children:"\uad6c\ud604"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'// internal/s2_signals/builder.go\n\ntype Builder struct {\n    momentum       *MomentumCalculator\n    technical      *TechnicalCalculator\n    value          *ValueCalculator\n    quality        *QualityCalculator\n    flow           *FlowCalculator      // \uc218\uae09 \u2b50\n    event          *EventCalculator\n    priceRepo      contracts.PriceRepository\n    flowRepo       contracts.InvestorFlowRepository\n    financialRepo  contracts.FinancialRepository\n    disclosureRepo contracts.DisclosureRepository\n    logger         *logger.Logger\n}\n\nfunc (b *Builder) Build(ctx context.Context, universe *contracts.Universe, date time.Time) (*contracts.SignalSet, error) {\n    signalSet := &contracts.SignalSet{\n        Date:    date,\n        Signals: make(map[string]*contracts.StockSignals),\n    }\n\n    for _, code := range universe.Stocks {\n        signals, err := b.calculateStockSignals(ctx, code, date)\n        if err != nil {\n            b.logger.Warn("Failed to calculate signals", "code", code)\n            continue\n        }\n\n        signalSet.Signals[code] = signals\n    }\n\n    return signalSet, nil\n}\n\n// \ubaa8\ub4e0 \uc2dc\uadf8\ub110\uc740 -1.0 ~ 1.0 \ubc94\uc704\ub85c \uc815\uaddc\ud654\ub428\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"momentum-signal",children:"Momentum Signal"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"// internal/s2_signals/momentum.go\n\ntype MomentumCalculator struct {\n    logger *logger.Logger\n}\n\nfunc (c *MomentumCalculator) Calculate(ctx context.Context, code string, prices []PricePoint) (float64, contracts.SignalDetails, error) {\n    // 1. \uc218\uc775\ub960 \uacc4\uc0b0\n    return1M := c.calculateReturn(prices, 20)   // 1\uac1c\uc6d4 (20 \uac70\ub798\uc77c)\n    return3M := c.calculateReturn(prices, 60)   // 3\uac1c\uc6d4 (60 \uac70\ub798\uc77c)\n    volumeRate := c.calculateVolumeGrowth(prices, 20)\n\n    // 2. \uac00\uc911 \ud3c9\uade0\n    // Return1M: 40%, Return3M: 40%, VolumeRate: 20%\n    score := return1M*0.4 + return3M*0.4 + volumeRate*0.2\n\n    // 3. tanh \uc815\uaddc\ud654 (-1.0 ~ 1.0 \ubc94\uc704)\n    normalizedScore := math.Tanh(score * 2)\n\n    details := contracts.SignalDetails{\n        Return1M:   return1M,\n        Return3M:   return3M,\n        VolumeRate: volumeRate,\n    }\n\n    return normalizedScore, details, nil\n}\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"value-signal",children:"Value Signal"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"// internal/s2_signals/value.go\n\ntype ValueCalculator struct {\n    logger *logger.Logger\n}\n\nfunc (c *ValueCalculator) Calculate(ctx context.Context, code string, metrics ValueMetrics) (float64, contracts.SignalDetails, error) {\n    // PER \uc810\uc218 (\ub0ae\uc744\uc218\ub85d \uc88b\uc74c)\n    // 15 = \uc911\ub9bd(0), 5 = \uc800\ud3c9\uac00(1.0), 25 = \uace0\ud3c9\uac00(-1.0)\n    perScore := (15 - metrics.PER) / 15\n\n    // PBR \uc810\uc218 (\ub0ae\uc744\uc218\ub85d \uc88b\uc74c)\n    // 1.5 = \uc911\ub9bd(0), 0.5 = \uc800\ud3c9\uac00(1.0), 2.5 = \uace0\ud3c9\uac00(-1.0)\n    pbrScore := (1.5 - metrics.PBR) / 1.5\n\n    // PSR \uc810\uc218\n    // 2.0 = \uc911\ub9bd(0), 0.5 = \uc800\ud3c9\uac00(1.0), 4.0 = \uace0\ud3c9\uac00(-1.0)\n    psrScore := (2.0 - metrics.PSR) / 2.0\n\n    // \uac00\uc911 \ud3c9\uade0: PER 50%, PBR 30%, PSR 20%\n    score := perScore*0.5 + pbrScore*0.3 + psrScore*0.2\n\n    // tanh\ub85c \ubd80\ub4dc\ub7fd\uac8c \ubcc0\ud658\n    score = math.Tanh(score * 1.5)\n\n    details := contracts.SignalDetails{\n        PER: metrics.PER,\n        PBR: metrics.PBR,\n        PSR: metrics.PSR,\n    }\n\n    return score, details, nil\n}\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"flow-signal-\uc218\uae09",children:"Flow Signal (\uc218\uae09)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'// internal/s2_signals/flow.go\n\ntype FlowCalculator struct {\n    logger *logger.Logger\n}\n\ntype FlowData struct {\n    Date          string\n    ForeignNet    int64  // \uc678\uad6d\uc778 \uc21c\ub9e4\uc218\n    InstNet       int64  // \uae30\uad00 \uc21c\ub9e4\uc218\n    IndividualNet int64  // \uac1c\uc778 \uc21c\ub9e4\uc218\n}\n\nfunc (c *FlowCalculator) Calculate(ctx context.Context, code string, flowData []FlowData) (float64, contracts.SignalDetails, error) {\n    if len(flowData) < 20 {\n        return 0.0, contracts.SignalDetails{}, nil\n    }\n\n    // 1. 5\uc77c/20\uc77c \ub204\uc801 \uc21c\ub9e4\uc218 \uacc4\uc0b0\n    foreignNet5D := c.sumNetBuying(flowData[:5], "foreign")\n    foreignNet20D := c.sumNetBuying(flowData[:20], "foreign")\n    instNet5D := c.sumNetBuying(flowData[:5], "inst")\n    instNet20D := c.sumNetBuying(flowData[:20], "inst")\n\n    // 2. \uc815\uaddc\ud654 (tanh \uc0ac\uc6a9)\n    // 10\uc5b5 = 1.0, 50\uc5b5(20\uc77c) = 1.0\n    foreignScore5D := math.Tanh(float64(foreignNet5D) / 10_000_000_000)\n    foreignScore20D := math.Tanh(float64(foreignNet20D) / 50_000_000_000)\n    instScore5D := math.Tanh(float64(instNet5D) / 10_000_000_000)\n    instScore20D := math.Tanh(float64(instNet20D) / 50_000_000_000)\n\n    // 3. \uac00\uc911 \ud3c9\uade0\n    // \uc678\uad6d\uc778: 60%, \uae30\uad00: 40%\n    // \ub2e8\uae30(5D): 70%, \uc7a5\uae30(20D): 30%\n    foreignScore := foreignScore5D*0.7 + foreignScore20D*0.3\n    instScore := instScore5D*0.7 + instScore20D*0.3\n    score := foreignScore*0.6 + instScore*0.4\n\n    details := contracts.SignalDetails{\n        ForeignNet5D:  foreignNet5D,\n        ForeignNet20D: foreignNet20D,\n        InstNet5D:     instNet5D,\n        InstNet20D:    instNet20D,\n    }\n\n    return score, details, nil\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\uc218\uae09-\uc810\uc218-\ud574\uc11d",children:"\uc218\uae09 \uc810\uc218 \ud574\uc11d"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\uc810\uc218 \ubc94\uc704"}),(0,l.jsx)(e.th,{children:"\ud574\uc11d"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"0.5 ~ 1.0"}),(0,l.jsx)(e.td,{children:"\uac15\ud55c \ub9e4\uc218\uc138 (\uc678\uad6d\uc778+\uae30\uad00 \ub3d9\uc2dc \uc21c\ub9e4\uc218)"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"0.0 ~ 0.5"}),(0,l.jsx)(e.td,{children:"\uc57d\ud55c \ub9e4\uc218\uc138"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"-0.5 ~ 0.0"}),(0,l.jsx)(e.td,{children:"\uc57d\ud55c \ub9e4\ub3c4\uc138"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"-1.0 ~ -0.5"}),(0,l.jsx)(e.td,{children:"\uac15\ud55c \ub9e4\ub3c4\uc138 (\uc678\uad6d\uc778+\uae30\uad00 \ub3d9\uc2dc \uc21c\ub9e4\ub3c4)"})]})]})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"event-signal",children:"Event Signal"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"// internal/s2_signals/event.go\n\ntype EventCalculator struct {\n    logger *logger.Logger\n}\n\nfunc (c *EventCalculator) Calculate(ctx context.Context, code string, events []contracts.EventSignal, currentDate time.Time) (float64, contracts.SignalDetails, error) {\n    if len(events) == 0 {\n        return 0.0, contracts.SignalDetails{}, nil\n    }\n\n    score := c.calculateScore(events, currentDate)\n    return score, contracts.SignalDetails{}, nil\n}\n\nfunc (c *EventCalculator) calculateScore(events []contracts.EventSignal, currentDate time.Time) float64 {\n    var weightedSum float64\n    var totalWeight float64\n\n    for _, event := range events {\n        // \uc774\ubca4\ud2b8 \uc810\uc218 (\uc774\ubbf8 -1.0 ~ 1.0)\n        score := event.Score\n\n        // \uc2dc\uac04 \uac10\uc1e0 \uc801\uc6a9\n        daysSince := currentDate.Sub(event.Timestamp).Hours() / 24\n        timeWeight := c.calculateTimeWeight(daysSince)\n\n        weightedSum += score * timeWeight\n        totalWeight += timeWeight\n    }\n\n    if totalWeight == 0 {\n        return 0.0\n    }\n\n    finalScore := weightedSum / totalWeight\n\n    // Clamp to -1.0 ~ 1.0\n    if finalScore > 1.0 {\n        finalScore = 1.0\n    } else if finalScore < -1.0 {\n        finalScore = -1.0\n    }\n\n    return finalScore\n}\n\n// calculateTimeWeight: \uc9c0\uc218 \uac10\uc1e0\n// 7\uc77c: ~100%, 30\uc77c: ~50%, 90\uc77c: ~25%\nfunc (c *EventCalculator) calculateTimeWeight(daysSince float64) float64 {\n    const decayRate = 0.023\n    weight := math.Exp(-decayRate * daysSince)\n\n    if weight < 0.1 {\n        weight = 0.1  // \ucd5c\uc18c \uac00\uc911\uce58\n    }\n\n    return weight\n}\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\uc774\ubca4\ud2b8-\ud0c0\uc785\ubcc4-\uc810\uc218",children:"\uc774\ubca4\ud2b8 \ud0c0\uc785\ubcc4 \uc810\uc218"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\uc774\ubca4\ud2b8"}),(0,l.jsx)(e.th,{children:"\uae30\ubcf8 \uc810\uc218"}),(0,l.jsx)(e.th,{children:"\uc124\uba85"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\uc790\uc0ac\uc8fc\ub9e4\uc785"}),(0,l.jsx)(e.td,{children:"+2.0"}),(0,l.jsx)(e.td,{children:"\uac15\ud55c \uae0d\uc815"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\ubc30\ub2f9 \uc99d\uac00"}),(0,l.jsx)(e.td,{children:"+1.5"}),(0,l.jsx)(e.td,{children:"\uae0d\uc815"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\uc2e4\uc801 \uc11c\ud504\ub77c\uc774\uc988"}),(0,l.jsx)(e.td,{children:"+1.0 ~ +2.0"}),(0,l.jsx)(e.td,{children:"\uc815\ub3c4\uc5d0 \ub530\ub77c"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\ub300\uaddc\ubaa8 \uacc4\uc57d"}),(0,l.jsx)(e.td,{children:"+1.0"}),(0,l.jsx)(e.td,{children:"\uae0d\uc815"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\uc720\uc0c1\uc99d\uc790"}),(0,l.jsx)(e.td,{children:"-1.0"}),(0,l.jsx)(e.td,{children:"\ubd80\uc815"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"CB/BW \ubc1c\ud589"}),(0,l.jsx)(e.td,{children:"-0.5"}),(0,l.jsx)(e.td,{children:"\uc57d\ud55c \ubd80\uc815"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\ud6a1\ub839/\ubc30\uc784"}),(0,l.jsx)(e.td,{children:"-2.0"}),(0,l.jsx)(e.td,{children:"\uac15\ud55c \ubd80\uc815"})]})]})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"signal-repository",children:"Signal Repository"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"// internal/s2_signals/repository.go\n\ntype SignalRepository struct {\n    pool *pgxpool.Pool\n}\n\nfunc (r *SignalRepository) Save(ctx context.Context, signalSet *contracts.SignalSet) error {\n    tx, err := r.pool.Begin(ctx)\n    if err != nil {\n        return err\n    }\n    defer tx.Rollback(ctx)\n\n    for code, signals := range signalSet.Signals {\n        // 1. factor_scores \uc800\uc7a5\n        if err := r.saveFactorScores(ctx, tx, code, signalSet.Date, signals); err != nil {\n            return err\n        }\n\n        // 2. flow_details \uc800\uc7a5\n        // 3. technical_details \uc800\uc7a5\n        if err := r.saveSignalDetails(ctx, tx, code, signalSet.Date, signals); err != nil {\n            return err\n        }\n    }\n\n    return tx.Commit(ctx)\n}\n\nfunc (r *SignalRepository) GetByDate(ctx context.Context, date time.Time) (*contracts.SignalSet, error) {\n    // factor_scores\uc5d0\uc11c \ubaa8\ub4e0 \uc885\ubaa9\uc758 \uc2dc\uadf8\ub110 \uc870\ud68c\n    // flow_details, technical_details \uc870\uc778\ud558\uc5ec \uc0c1\uc138 \uc815\ubcf4 \ub85c\ub4dc\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Total Score \uacc4\uc0b0 (\uac00\uc911 \ud3c9\uade0):"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Flow: 25%"}),"\n",(0,l.jsx)(e.li,{children:"Momentum: 20%"}),"\n",(0,l.jsx)(e.li,{children:"Technical: 20%"}),"\n",(0,l.jsx)(e.li,{children:"Value: 15%"}),"\n",(0,l.jsx)(e.li,{children:"Quality: 15%"}),"\n",(0,l.jsx)(e.li,{children:"Event: 5%"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"db-\uc2a4\ud0a4\ub9c8",children:"DB \uc2a4\ud0a4\ub9c8"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"-- signals.factor_scores: \ud329\ud130 \uc810\uc218\nCREATE TABLE signals.factor_scores (\n    id          SERIAL PRIMARY KEY,\n    date        DATE NOT NULL,\n    code        VARCHAR(10) NOT NULL,\n    momentum    DECIMAL(8,4),\n    technical   DECIMAL(8,4),\n    value       DECIMAL(8,4),\n    quality     DECIMAL(8,4),\n    flow        DECIMAL(8,4),       -- \uc218\uae09 \uc2dc\uadf8\ub110 \u2b50\n    event       DECIMAL(8,4),\n    created_at  TIMESTAMPTZ DEFAULT NOW(),\n    UNIQUE(date, code)\n);\n\n-- signals.flow_details: \uc218\uae09 \uc0c1\uc138 (5D/20D \ub204\uc801) \u2b50\nCREATE TABLE signals.flow_details (\n    id              SERIAL PRIMARY KEY,\n    date            DATE NOT NULL,\n    stock_code      VARCHAR(10) NOT NULL,\n    foreign_net_5d  BIGINT,         -- \uc678\uad6d\uc778 5\uc77c \uc21c\ub9e4\uc218\n    foreign_net_20d BIGINT,         -- \uc678\uad6d\uc778 20\uc77c \uc21c\ub9e4\uc218\n    inst_net_5d     BIGINT,         -- \uae30\uad00 5\uc77c \uc21c\ub9e4\uc218\n    inst_net_20d    BIGINT,         -- \uae30\uad00 20\uc77c \uc21c\ub9e4\uc218\n    flow_score      DECIMAL(8,4),   -- \uc885\ud569 \uc218\uae09 \uc810\uc218\n    created_at      TIMESTAMPTZ DEFAULT NOW(),\n    UNIQUE(date, stock_code)\n);\n\n-- signals.events: \uc774\ubca4\ud2b8 \ub85c\uadf8\nCREATE TABLE signals.events (\n    id          SERIAL PRIMARY KEY,\n    code        VARCHAR(10) NOT NULL,\n    event_type  VARCHAR(50) NOT NULL,\n    score       DECIMAL(5,2),\n    source      VARCHAR(20),\n    event_date  DATE NOT NULL,\n    raw_data    JSONB,\n    created_at  TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX idx_factor_scores_date ON signals.factor_scores(date, code);\nCREATE INDEX idx_flow_details_date ON signals.flow_details(date, stock_code);\nCREATE INDEX idx_events_code_date ON signals.events(code, event_date);\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Prev"}),": ",(0,l.jsx)(e.a,{href:"/aegis-v13/docs/guide/backend/data-layer",children:"Data Layer"}),"\n",(0,l.jsx)(e.strong,{children:"Next"}),": ",(0,l.jsx)(e.a,{href:"/aegis-v13/docs/guide/backend/selection-layer",children:"Selection Layer"})]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}},8453(n,e,t){t.d(e,{R:()=>s,x:()=>c});var r=t(6540);const l={},i=r.createContext(l);function s(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:s(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);