"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[350],{8453(e,n,s){s.d(n,{R:()=>r,x:()=>i});var a=s(6540);const t={},d=a.createContext(t);function r(e){const n=a.useContext(d);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(d.Provider,{value:n},e.children)}},9512(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>_,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"guide/database/schema-design","title":"Schema Design","description":"PostgreSQL \uc2a4\ud0a4\ub9c8 \uc124\uacc4","source":"@site/docs/guide/database/schema-design.md","sourceDirName":"guide/database","slug":"/guide/database/schema-design","permalink":"/aegis-v13/docs/guide/database/schema-design","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Schema Design","description":"PostgreSQL \uc2a4\ud0a4\ub9c8 \uc124\uacc4"},"sidebar":"guideSidebar","previous":{"title":"Components","permalink":"/aegis-v13/docs/guide/ui/components"},"next":{"title":"v10 to v13 Migration","permalink":"/aegis-v13/docs/guide/migration/v10-to-v13"}}');var t=s(4848),d=s(8453);const r={sidebar_position:1,title:"Schema Design",description:"PostgreSQL \uc2a4\ud0a4\ub9c8 \uc124\uacc4"},i="Database Schema Design",l={},c=[{value:"\uc2a4\ud0a4\ub9c8 \uad6c\uc870",id:"\uc2a4\ud0a4\ub9c8-\uad6c\uc870",level:2},{value:"\uc804\uccb4 ERD",id:"\uc804\uccb4-erd",level:2},{value:"data \uc2a4\ud0a4\ub9c8",id:"data-\uc2a4\ud0a4\ub9c8",level:2},{value:"stocks (\uc885\ubaa9 \ub9c8\uc2a4\ud130)",id:"stocks-\uc885\ubaa9-\ub9c8\uc2a4\ud130",level:3},{value:"daily_prices (\uc77c\ubd09 \ub370\uc774\ud130) - PARTITIONED",id:"daily_prices-\uc77c\ubd09-\ub370\uc774\ud130---partitioned",level:3},{value:"investor_flow (\ud22c\uc790\uc790\ubcc4 \uc218\uae09) \u2b50 - PARTITIONED",id:"investor_flow-\ud22c\uc790\uc790\ubcc4-\uc218\uae09----partitioned",level:3},{value:"fundamentals (\uc7ac\ubb34 \ub370\uc774\ud130)",id:"fundamentals-\uc7ac\ubb34-\ub370\uc774\ud130",level:3},{value:"market_cap (\uc2dc\uac00\ucd1d\uc561)",id:"market_cap-\uc2dc\uac00\ucd1d\uc561",level:3},{value:"disclosures (\uacf5\uc2dc)",id:"disclosures-\uacf5\uc2dc",level:3},{value:"quality_snapshots (S0: \ub370\uc774\ud130 \ud488\uc9c8)",id:"quality_snapshots-s0-\ub370\uc774\ud130-\ud488\uc9c8",level:3},{value:"universe_snapshots (S1: \uc720\ub2c8\ubc84\uc2a4)",id:"universe_snapshots-s1-\uc720\ub2c8\ubc84\uc2a4",level:3},{value:"signals \uc2a4\ud0a4\ub9c8",id:"signals-\uc2a4\ud0a4\ub9c8",level:2},{value:"factor_scores (\ud329\ud130 \uc810\uc218)",id:"factor_scores-\ud329\ud130-\uc810\uc218",level:3},{value:"flow_details (\uc218\uae09 \uc0c1\uc138) \u2b50",id:"flow_details-\uc218\uae09-\uc0c1\uc138-",level:3},{value:"technical_details (\uae30\uc220\uc801 \uc9c0\ud45c)",id:"technical_details-\uae30\uc220\uc801-\uc9c0\ud45c",level:3},{value:"event_signals (\uc774\ubca4\ud2b8 \uc2dc\uadf8\ub110)",id:"event_signals-\uc774\ubca4\ud2b8-\uc2dc\uadf8\ub110",level:3},{value:"selection \uc2a4\ud0a4\ub9c8",id:"selection-\uc2a4\ud0a4\ub9c8",level:2},{value:"screening_results (S3: \uc2a4\ud06c\ub9ac\ub2dd)",id:"screening_results-s3-\uc2a4\ud06c\ub9ac\ub2dd",level:3},{value:"ranking_results (S4: \ub7ad\ud0b9)",id:"ranking_results-s4-\ub7ad\ud0b9",level:3},{value:"portfolio \uc2a4\ud0a4\ub9c8",id:"portfolio-\uc2a4\ud0a4\ub9c8",level:2},{value:"target_portfolios (S5: \ubaa9\ud45c \ud3ec\ud2b8\ud3f4\ub9ac\uc624)",id:"target_portfolios-s5-\ubaa9\ud45c-\ud3ec\ud2b8\ud3f4\ub9ac\uc624",level:3},{value:"portfolio_snapshots (\uc2e4\uc81c \ud3ec\ud2b8\ud3f4\ub9ac\uc624)",id:"portfolio_snapshots-\uc2e4\uc81c-\ud3ec\ud2b8\ud3f4\ub9ac\uc624",level:3},{value:"rebalancing_history (\ub9ac\ubc38\ub7f0\uc2f1 \uae30\ub85d)",id:"rebalancing_history-\ub9ac\ubc38\ub7f0\uc2f1-\uae30\ub85d",level:3},{value:"execution \uc2a4\ud0a4\ub9c8",id:"execution-\uc2a4\ud0a4\ub9c8",level:2},{value:"orders (\uc8fc\ubb38)",id:"orders-\uc8fc\ubb38",level:3},{value:"trades (\uccb4\uacb0)",id:"trades-\uccb4\uacb0",level:3},{value:"order_errors (\uc8fc\ubb38 \uc624\ub958)",id:"order_errors-\uc8fc\ubb38-\uc624\ub958",level:3},{value:"audit \uc2a4\ud0a4\ub9c8",id:"audit-\uc2a4\ud0a4\ub9c8",level:2},{value:"performance_reports (S7: \uc131\uacfc \ubcf4\uace0\uc11c)",id:"performance_reports-s7-\uc131\uacfc-\ubcf4\uace0\uc11c",level:3},{value:"attribution_analysis (\uadc0\uc18d \ubd84\uc11d)",id:"attribution_analysis-\uadc0\uc18d-\ubd84\uc11d",level:3},{value:"benchmark_data (\ubca4\uce58\ub9c8\ud06c)",id:"benchmark_data-\ubca4\uce58\ub9c8\ud06c",level:3},{value:"daily_pnl (\uc77c\ubcc4 \uc190\uc775)",id:"daily_pnl-\uc77c\ubcc4-\uc190\uc775",level:3},{value:"\ub370\uc774\ud130 \uc694\uad6c\uc0ac\ud56d \ub9e4\ud551",id:"\ub370\uc774\ud130-\uc694\uad6c\uc0ac\ud56d-\ub9e4\ud551",level:2},{value:"\ub124\uc774\ubc0d \uaddc\uce59",id:"\ub124\uc774\ubc0d-\uaddc\uce59",level:2},{value:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc804\ub7b5",id:"\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc804\ub7b5",level:2},{value:"v10 \ub370\uc774\ud130 \ud604\ud669",id:"v10-\ub370\uc774\ud130-\ud604\ud669",level:3},{value:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc21c\uc11c",id:"\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc21c\uc11c",level:3},{value:"Phase 1: \uc2a4\ud0a4\ub9c8 \uc0dd\uc131",id:"phase-1-\uc2a4\ud0a4\ub9c8-\uc0dd\uc131",level:4},{value:"Phase 2: data \uc2a4\ud0a4\ub9c8 (v10 \uc9c1\uc811 \uc774\uc804)",id:"phase-2-data-\uc2a4\ud0a4\ub9c8-v10-\uc9c1\uc811-\uc774\uc804",level:4},{value:"Phase 3: signals \uc2a4\ud0a4\ub9c8 (\uacc4\uc0b0 \ud544\uc694)",id:"phase-3-signals-\uc2a4\ud0a4\ub9c8-\uacc4\uc0b0-\ud544\uc694",level:4},{value:"Phase 4: \ub098\uba38\uc9c0 \uc2a4\ud0a4\ub9c8",id:"phase-4-\ub098\uba38\uc9c0-\uc2a4\ud0a4\ub9c8",level:4},{value:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589",id:"\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc2e4\ud589",level:3},{value:"\uac80\uc99d",id:"\uac80\uc99d",level:3},{value:"\ud5a5\ud6c4 \ud655\uc7a5 \uacc4\ud68d",id:"\ud5a5\ud6c4-\ud655\uc7a5-\uacc4\ud68d",level:2},{value:"1. investor_flow \uc0c1\uc138 \ubd84\ub958",id:"1-investor_flow-\uc0c1\uc138-\ubd84\ub958",level:3},{value:"2. fundamentals \ud655\uc7a5 \uc9c0\ud45c",id:"2-fundamentals-\ud655\uc7a5-\uc9c0\ud45c",level:3},{value:"3. \uc2e4\uc2dc\uac04 \ub370\uc774\ud130 \uc9c0\uc6d0",id:"3-\uc2e4\uc2dc\uac04-\ub370\uc774\ud130-\uc9c0\uc6d0",level:3},{value:"4. \ubc31\ud14c\uc2a4\ud2b8 \uc2a4\ud0a4\ub9c8",id:"4-\ubc31\ud14c\uc2a4\ud2b8-\uc2a4\ud0a4\ub9c8",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"database-schema-design",children:"Database Schema Design"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"PostgreSQL \uc2a4\ud0a4\ub9c8 \uc124\uacc4"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\uc2a4\ud0a4\ub9c8-\uad6c\uc870",children:"\uc2a4\ud0a4\ub9c8 \uad6c\uc870"}),"\n",(0,t.jsx)(n.p,{children:"\ub808\uc774\uc5b4\ubcc4\ub85c \uc2a4\ud0a4\ub9c8\ub97c \ubd84\ub9ac\ud558\uc5ec \uad00\ub9ac:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE SCHEMA data;       -- S0-S1: \uc6d0\ucc9c \ub370\uc774\ud130, \uc720\ub2c8\ubc84\uc2a4\nCREATE SCHEMA signals;    -- S2: \uc2dc\uadf8\ub110\nCREATE SCHEMA selection;  -- S3-S4: \uc2a4\ud06c\ub9ac\ub2dd, \ub7ad\ud0b9\nCREATE SCHEMA portfolio;  -- S5: \ud3ec\ud2b8\ud3f4\ub9ac\uc624\nCREATE SCHEMA execution;  -- S6: \uc8fc\ubb38/\uccb4\uacb0\nCREATE SCHEMA audit;      -- S7: \uc131\uacfc \ubd84\uc11d\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\uc804\uccb4-erd",children:"\uc804\uccb4 ERD"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                            data schema (8 tables)                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  stocks \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n\u2502    \u2502             \u2502               \u2502               \u2502                      \u2502\n\u2502    \u25bc             \u25bc               \u25bc               \u25bc                      \u2502\n\u2502 daily_prices  market_cap   fundamentals   investor_flow (PARTITIONED)  \u2502\n\u2502    \u2502             \u2502               \u2502               \u2502                      \u2502\n\u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                      \u2502\n\u2502                              \u2502                                          \u2502\n\u2502              disclosures     \u25bc                                          \u2502\n\u2502                   quality_snapshots \u2500\u2500\u2500\u2500\u2500\u2500\u25b6 universe_snapshots         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                          signals schema (4 tables)                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  technical_details \u25c0\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u25b6 flow_details                            \u2502\n\u2502         \u2502               \u2502           \u2502                                   \u2502\n\u2502         \u25bc               \u25bc           \u25bc                                   \u2502\n\u2502       factor_scores \u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 event_signals                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         selection schema (2 tables)                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  screening_results \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 ranking_results                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         portfolio schema (3 tables)                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  target_portfolios \u25c0\u2500\u2500\u2500\u2500 portfolio_snapshots                            \u2502\n\u2502         \u2502                                                               \u2502\n\u2502         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 rebalancing_history                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         execution schema (3 tables)                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  orders \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 trades                                  \u2502\n\u2502    \u2502                                                                    \u2502\n\u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 order_errors                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                           audit schema (4 tables)                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  daily_pnl     performance_reports     attribution_analysis             \u2502\n\u2502                         \u2502                                               \u2502\n\u2502                         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 benchmark_data                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"data-\uc2a4\ud0a4\ub9c8",children:"data \uc2a4\ud0a4\ub9c8"}),"\n",(0,t.jsx)(n.h3,{id:"stocks-\uc885\ubaa9-\ub9c8\uc2a4\ud130",children:"stocks (\uc885\ubaa9 \ub9c8\uc2a4\ud130)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE data.stocks (\n    code           VARCHAR(20) PRIMARY KEY,\n    name           VARCHAR(200) NOT NULL,\n    market         VARCHAR(20) NOT NULL,    -- KOSPI, KOSDAQ, KONEX\n    sector         VARCHAR(100),\n    listing_date   DATE NOT NULL,\n    delisting_date DATE,\n    status         VARCHAR(20) DEFAULT 'active',  -- active, delisted, suspended\n    created_at     TIMESTAMPTZ DEFAULT NOW(),\n    updated_at     TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX idx_stocks_market ON data.stocks(market);\nCREATE INDEX idx_stocks_sector ON data.stocks(sector);\nCREATE INDEX idx_stocks_status ON data.stocks(status);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"daily_prices-\uc77c\ubd09-\ub370\uc774\ud130---partitioned",children:"daily_prices (\uc77c\ubd09 \ub370\uc774\ud130) - PARTITIONED"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE data.daily_prices (\n    stock_code    VARCHAR(20) NOT NULL,\n    trade_date    DATE NOT NULL,\n    open_price    NUMERIC(12,2) NOT NULL,\n    high_price    NUMERIC(12,2) NOT NULL,\n    low_price     NUMERIC(12,2) NOT NULL,\n    close_price   NUMERIC(12,2) NOT NULL,\n    volume        BIGINT NOT NULL,\n    trading_value NUMERIC(15,0),\n    created_at    TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (stock_code, trade_date)\n) PARTITION BY RANGE (trade_date);\n\n-- \ud30c\ud2f0\uc158: \ubc18\uae30\ubcc4 (2022-2027)\nCREATE TABLE data.daily_prices_2022_h1 PARTITION OF data.daily_prices\n    FOR VALUES FROM ('2022-01-01') TO ('2022-07-01');\n-- ... (2022_h2, 2023_h1, 2023_h2, ..., 2027_h1)\n\nCREATE INDEX idx_daily_prices_date ON data.daily_prices(trade_date);\nCREATE INDEX idx_daily_prices_stock ON data.daily_prices(stock_code);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"investor_flow-\ud22c\uc790\uc790\ubcc4-\uc218\uae09----partitioned",children:"investor_flow (\ud22c\uc790\uc790\ubcc4 \uc218\uae09) \u2b50 - PARTITIONED"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE data.investor_flow (\n    stock_code        VARCHAR(20) NOT NULL,\n    trade_date        DATE NOT NULL,\n    foreign_net_qty   BIGINT DEFAULT 0,     -- \uc678\uad6d\uc778 \uc21c\ub9e4\uc218 \uc218\ub7c9\n    foreign_net_value BIGINT DEFAULT 0,     -- \uc678\uad6d\uc778 \uc21c\ub9e4\uc218 \uae08\uc561\n    inst_net_qty      BIGINT DEFAULT 0,     -- \uae30\uad00 \uc21c\ub9e4\uc218 \uc218\ub7c9\n    inst_net_value    BIGINT DEFAULT 0,     -- \uae30\uad00 \uc21c\ub9e4\uc218 \uae08\uc561\n    indiv_net_qty     BIGINT DEFAULT 0,     -- \uac1c\uc778 \uc21c\ub9e4\uc218 \uc218\ub7c9\n    indiv_net_value   BIGINT DEFAULT 0,     -- \uac1c\uc778 \uc21c\ub9e4\uc218 \uae08\uc561\n    created_at        TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (stock_code, trade_date)\n) PARTITION BY RANGE (trade_date);\n\n-- \ud30c\ud2f0\uc158: \ubc18\uae30\ubcc4 (daily_prices\uc640 \ub3d9\uc77c)\n\nCREATE INDEX idx_investor_flow_date ON data.investor_flow(trade_date);\nCREATE INDEX idx_investor_flow_stock ON data.investor_flow(stock_code);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"fundamentals-\uc7ac\ubb34-\ub370\uc774\ud130",children:"fundamentals (\uc7ac\ubb34 \ub370\uc774\ud130)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE data.fundamentals (\n    stock_code       VARCHAR(20) NOT NULL,\n    report_date      DATE NOT NULL,\n    per              NUMERIC(10,2),\n    pbr              NUMERIC(10,2),\n    roe              NUMERIC(10,2),\n    debt_ratio       NUMERIC(10,2),\n    revenue          BIGINT,\n    operating_profit BIGINT,\n    net_profit       BIGINT,\n    created_at       TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (stock_code, report_date)\n);\n\nCREATE INDEX idx_fundamentals_date ON data.fundamentals(report_date);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"market_cap-\uc2dc\uac00\ucd1d\uc561",children:"market_cap (\uc2dc\uac00\ucd1d\uc561)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE data.market_cap (\n    stock_code         VARCHAR(20) NOT NULL,\n    trade_date         DATE NOT NULL,\n    market_cap         BIGINT NOT NULL,\n    shares_outstanding BIGINT,\n    created_at         TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (stock_code, trade_date)\n);\n\nCREATE INDEX idx_market_cap_date ON data.market_cap(trade_date);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"disclosures-\uacf5\uc2dc",children:"disclosures (\uacf5\uc2dc)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE data.disclosures (\n    id           SERIAL PRIMARY KEY,\n    stock_code   VARCHAR(20) NOT NULL,\n    disclosed_at TIMESTAMPTZ NOT NULL,\n    title        TEXT NOT NULL,\n    category     VARCHAR(100),\n    content      TEXT,\n    url          TEXT,\n    created_at   TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX idx_disclosures_stock ON data.disclosures(stock_code);\nCREATE INDEX idx_disclosures_date ON data.disclosures(disclosed_at);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"quality_snapshots-s0-\ub370\uc774\ud130-\ud488\uc9c8",children:"quality_snapshots (S0: \ub370\uc774\ud130 \ud488\uc9c8)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE data.quality_snapshots (\n    snapshot_date DATE PRIMARY KEY,\n    total_stocks  INT NOT NULL,\n    valid_stocks  INT NOT NULL,\n    coverage      JSONB,                  -- {price: 0.95, flow: 0.90, ...}\n    quality_score NUMERIC(5,4) NOT NULL,\n    created_at    TIMESTAMPTZ DEFAULT NOW()\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"universe_snapshots-s1-\uc720\ub2c8\ubc84\uc2a4",children:"universe_snapshots (S1: \uc720\ub2c8\ubc84\uc2a4)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE data.universe_snapshots (\n    snapshot_date   DATE PRIMARY KEY,\n    eligible_stocks JSONB NOT NULL,       -- [code1, code2, ...]\n    total_count     INT NOT NULL,\n    criteria        JSONB,                -- {min_market_cap: 100\uc5b5, ...}\n    created_at      TIMESTAMPTZ DEFAULT NOW()\n);\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"signals-\uc2a4\ud0a4\ub9c8",children:"signals \uc2a4\ud0a4\ub9c8"}),"\n",(0,t.jsx)(n.h3,{id:"factor_scores-\ud329\ud130-\uc810\uc218",children:"factor_scores (\ud329\ud130 \uc810\uc218)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE signals.factor_scores (\n    stock_code   VARCHAR(20) NOT NULL,\n    calc_date    DATE NOT NULL,\n    momentum     NUMERIC(5,4) DEFAULT 0.0,  -- \ubaa8\uba58\ud140 \uc810\uc218 (0~1)\n    technical    NUMERIC(5,4) DEFAULT 0.0,  -- \uae30\uc220\uc801 \uc810\uc218 (0~1)\n    value        NUMERIC(5,4) DEFAULT 0.0,  -- \uac00\uce58 \uc810\uc218 (0~1)\n    quality      NUMERIC(5,4) DEFAULT 0.0,  -- \ud004\ub9ac\ud2f0 \uc810\uc218 (0~1)\n    flow         NUMERIC(5,4) DEFAULT 0.0,  -- \uc218\uae09 \uc810\uc218 (0~1) \u2b50\n    event        NUMERIC(5,4) DEFAULT 0.0,  -- \uc774\ubca4\ud2b8 \uc810\uc218 (0~1)\n    total_score  NUMERIC(5,4),              -- \uc885\ud569 \uc810\uc218 (\uac00\uc911\ud3c9\uade0)\n    updated_at   TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (stock_code, calc_date)\n);\n\nCREATE INDEX idx_factor_scores_date ON signals.factor_scores(calc_date);\nCREATE INDEX idx_factor_scores_total ON signals.factor_scores(total_score DESC);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"flow_details-\uc218\uae09-\uc0c1\uc138-",children:"flow_details (\uc218\uae09 \uc0c1\uc138) \u2b50"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE signals.flow_details (\n    stock_code        VARCHAR(20) NOT NULL,\n    calc_date         DATE NOT NULL,\n    -- 5\uc77c \ub204\uc801\n    foreign_net_5d    BIGINT DEFAULT 0,\n    inst_net_5d       BIGINT DEFAULT 0,\n    indiv_net_5d      BIGINT DEFAULT 0,\n    -- 10\uc77c \ub204\uc801\n    foreign_net_10d   BIGINT DEFAULT 0,\n    inst_net_10d      BIGINT DEFAULT 0,\n    indiv_net_10d     BIGINT DEFAULT 0,\n    -- 20\uc77c \ub204\uc801\n    foreign_net_20d   BIGINT DEFAULT 0,\n    inst_net_20d      BIGINT DEFAULT 0,\n    indiv_net_20d     BIGINT DEFAULT 0,\n    updated_at        TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (stock_code, calc_date)\n);\n\nCREATE INDEX idx_flow_details_date ON signals.flow_details(calc_date);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"technical_details-\uae30\uc220\uc801-\uc9c0\ud45c",children:"technical_details (\uae30\uc220\uc801 \uc9c0\ud45c)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE signals.technical_details (\n    stock_code   VARCHAR(20) NOT NULL,\n    calc_date    DATE NOT NULL,\n    -- \uc774\ub3d9\ud3c9\uade0\n    ma5          NUMERIC(12,2),\n    ma10         NUMERIC(12,2),\n    ma20         NUMERIC(12,2),\n    ma60         NUMERIC(12,2),\n    ma120        NUMERIC(12,2),\n    -- RSI\n    rsi14        NUMERIC(5,2),\n    -- MACD\n    macd         NUMERIC(12,4),\n    macd_signal  NUMERIC(12,4),\n    macd_hist    NUMERIC(12,4),\n    -- \ubcfc\ub9b0\uc800 \ubc34\ub4dc\n    bb_upper     NUMERIC(12,2),\n    bb_middle    NUMERIC(12,2),\n    bb_lower     NUMERIC(12,2),\n    updated_at   TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (stock_code, calc_date)\n);\n\nCREATE INDEX idx_technical_details_date ON signals.technical_details(calc_date);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"event_signals-\uc774\ubca4\ud2b8-\uc2dc\uadf8\ub110",children:"event_signals (\uc774\ubca4\ud2b8 \uc2dc\uadf8\ub110)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE signals.event_signals (\n    id            SERIAL PRIMARY KEY,\n    stock_code    VARCHAR(20) NOT NULL,\n    event_date    DATE NOT NULL,\n    event_type    VARCHAR(50) NOT NULL,    -- disclosure, news, earning\n    event_subtype VARCHAR(50),\n    title         TEXT,\n    description   TEXT,\n    impact_score  NUMERIC(5,4) DEFAULT 0.0,  -- \uc601\ud5a5\ub3c4 \uc810\uc218 (0~1)\n    created_at    TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX idx_event_signals_stock ON signals.event_signals(stock_code);\nCREATE INDEX idx_event_signals_date ON signals.event_signals(event_date);\nCREATE INDEX idx_event_signals_type ON signals.event_signals(event_type);\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"selection-\uc2a4\ud0a4\ub9c8",children:"selection \uc2a4\ud0a4\ub9c8"}),"\n",(0,t.jsx)(n.h3,{id:"screening_results-s3-\uc2a4\ud06c\ub9ac\ub2dd",children:"screening_results (S3: \uc2a4\ud06c\ub9ac\ub2dd)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE selection.screening_results (\n    screen_date   DATE PRIMARY KEY,\n    passed_stocks JSONB NOT NULL,           -- [code1, code2, ...]\n    total_count   INT NOT NULL,\n    criteria      JSONB,                     -- {min_score: 0.5, ...}\n    created_at    TIMESTAMPTZ DEFAULT NOW()\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ranking_results-s4-\ub7ad\ud0b9",children:"ranking_results (S4: \ub7ad\ud0b9)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE selection.ranking_results (\n    stock_code   VARCHAR(20) NOT NULL,\n    rank_date    DATE NOT NULL,\n    rank         INT NOT NULL,               -- 1-based ranking\n    total_score  NUMERIC(5,4) NOT NULL,\n    momentum     NUMERIC(5,4),\n    technical    NUMERIC(5,4),\n    value        NUMERIC(5,4),\n    quality      NUMERIC(5,4),\n    flow         NUMERIC(5,4),\n    event        NUMERIC(5,4),\n    created_at   TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (stock_code, rank_date)\n);\n\nCREATE INDEX idx_ranking_results_date ON selection.ranking_results(rank_date);\nCREATE INDEX idx_ranking_results_rank ON selection.ranking_results(rank, rank_date);\nCREATE INDEX idx_ranking_results_score ON selection.ranking_results(total_score DESC);\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"portfolio-\uc2a4\ud0a4\ub9c8",children:"portfolio \uc2a4\ud0a4\ub9c8"}),"\n",(0,t.jsx)(n.h3,{id:"target_portfolios-s5-\ubaa9\ud45c-\ud3ec\ud2b8\ud3f4\ub9ac\uc624",children:"target_portfolios (S5: \ubaa9\ud45c \ud3ec\ud2b8\ud3f4\ub9ac\uc624)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE portfolio.target_portfolios (\n    portfolio_date DATE PRIMARY KEY,\n    positions      JSONB NOT NULL,          -- [{code, name, weight, target_qty, action, reason}, ...]\n    cash_weight    NUMERIC(5,4) DEFAULT 0.0,\n    total_weight   NUMERIC(5,4),\n    position_count INT,\n    created_at     TIMESTAMPTZ DEFAULT NOW()\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"portfolio_snapshots-\uc2e4\uc81c-\ud3ec\ud2b8\ud3f4\ub9ac\uc624",children:"portfolio_snapshots (\uc2e4\uc81c \ud3ec\ud2b8\ud3f4\ub9ac\uc624)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE portfolio.portfolio_snapshots (\n    snapshot_date    DATE PRIMARY KEY,\n    total_deposit    BIGINT NOT NULL,\n    total_evaluation BIGINT NOT NULL,\n    cash_balance     BIGINT NOT NULL,\n    profit_loss      BIGINT,\n    profit_loss_rate NUMERIC(10,6),\n    positions        JSONB NOT NULL,        -- [{code, qty, avg_price, current_price, value}, ...]\n    position_count   INT,\n    created_at       TIMESTAMPTZ DEFAULT NOW()\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"rebalancing_history-\ub9ac\ubc38\ub7f0\uc2f1-\uae30\ub85d",children:"rebalancing_history (\ub9ac\ubc38\ub7f0\uc2f1 \uae30\ub85d)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE portfolio.rebalancing_history (\n    id              SERIAL PRIMARY KEY,\n    rebalance_date  DATE NOT NULL,\n    from_positions  JSONB,                  -- \ubcc0\uacbd \uc804 \ud3ec\uc9c0\uc158\n    to_positions    JSONB,                  -- \ubcc0\uacbd \ud6c4 \ubaa9\ud45c \ud3ec\uc9c0\uc158\n    required_orders JSONB,                  -- \ud544\uc694\ud55c \uc8fc\ubb38\ub4e4\n    status          VARCHAR(20) DEFAULT 'pending',  -- pending, in_progress, completed, failed\n    created_at      TIMESTAMPTZ DEFAULT NOW(),\n    completed_at    TIMESTAMPTZ\n);\n\nCREATE INDEX idx_rebalancing_history_date ON portfolio.rebalancing_history(rebalance_date);\nCREATE INDEX idx_rebalancing_history_status ON portfolio.rebalancing_history(status);\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"execution-\uc2a4\ud0a4\ub9c8",children:"execution \uc2a4\ud0a4\ub9c8"}),"\n",(0,t.jsx)(n.h3,{id:"orders-\uc8fc\ubb38",children:"orders (\uc8fc\ubb38)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE execution.orders (\n    id              SERIAL PRIMARY KEY,\n    stock_code      VARCHAR(20) NOT NULL,\n    stock_name      VARCHAR(200),\n    order_date      DATE NOT NULL,\n    order_time      TIMESTAMPTZ DEFAULT NOW(),\n    order_action    VARCHAR(10) NOT NULL,     -- BUY, SELL\n    order_type      VARCHAR(20) NOT NULL,     -- MARKET, LIMIT, STOP\n    order_price     NUMERIC(12,2),\n    order_qty       INT NOT NULL,\n    filled_qty      INT DEFAULT 0,\n    filled_price    NUMERIC(12,2),\n    status          VARCHAR(20) DEFAULT 'pending',  -- pending, submitted, filled, partial, cancelled, rejected\n    broker_order_no VARCHAR(50),\n    reason          TEXT,\n    created_at      TIMESTAMPTZ DEFAULT NOW(),\n    updated_at      TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX idx_orders_stock ON execution.orders(stock_code);\nCREATE INDEX idx_orders_date ON execution.orders(order_date);\nCREATE INDEX idx_orders_status ON execution.orders(status);\nCREATE INDEX idx_orders_broker ON execution.orders(broker_order_no);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"trades-\uccb4\uacb0",children:"trades (\uccb4\uacb0)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE execution.trades (\n    id              SERIAL PRIMARY KEY,\n    order_id        INT NOT NULL REFERENCES execution.orders(id),\n    stock_code      VARCHAR(20) NOT NULL,\n    trade_date      DATE NOT NULL,\n    trade_time      TIMESTAMPTZ NOT NULL,\n    trade_action    VARCHAR(10) NOT NULL,     -- BUY, SELL\n    trade_price     NUMERIC(12,2) NOT NULL,\n    trade_qty       INT NOT NULL,\n    trade_amount    BIGINT NOT NULL,\n    commission      BIGINT DEFAULT 0,\n    tax             BIGINT DEFAULT 0,\n    broker_trade_no VARCHAR(50),\n    created_at      TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX idx_trades_order ON execution.trades(order_id);\nCREATE INDEX idx_trades_stock ON execution.trades(stock_code);\nCREATE INDEX idx_trades_date ON execution.trades(trade_date);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"order_errors-\uc8fc\ubb38-\uc624\ub958",children:"order_errors (\uc8fc\ubb38 \uc624\ub958)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE execution.order_errors (\n    id              SERIAL PRIMARY KEY,\n    order_id        INT REFERENCES execution.orders(id),\n    stock_code      VARCHAR(20),\n    error_time      TIMESTAMPTZ DEFAULT NOW(),\n    error_code      VARCHAR(50),\n    error_message   TEXT NOT NULL,\n    broker_response JSONB,\n    retry_count     INT DEFAULT 0,\n    resolved        BOOLEAN DEFAULT FALSE,\n    created_at      TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX idx_order_errors_order ON execution.order_errors(order_id);\nCREATE INDEX idx_order_errors_resolved ON execution.order_errors(resolved);\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"audit-\uc2a4\ud0a4\ub9c8",children:"audit \uc2a4\ud0a4\ub9c8"}),"\n",(0,t.jsx)(n.h3,{id:"performance_reports-s7-\uc131\uacfc-\ubcf4\uace0\uc11c",children:"performance_reports (S7: \uc131\uacfc \ubcf4\uace0\uc11c)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE audit.performance_reports (\n    report_date       DATE PRIMARY KEY,\n    period_start      DATE NOT NULL,\n    period_end        DATE NOT NULL,\n    total_return      NUMERIC(10,6),\n    benchmark_return  NUMERIC(10,6),\n    alpha             NUMERIC(10,6),\n    beta              NUMERIC(10,6),\n    sharpe_ratio      NUMERIC(10,6),\n    volatility        NUMERIC(10,6),\n    max_drawdown      NUMERIC(10,6),\n    win_rate          NUMERIC(5,4),\n    avg_win           NUMERIC(10,6),\n    avg_loss          NUMERIC(10,6),\n    profit_factor     NUMERIC(10,6),\n    total_trades      INT,\n    created_at        TIMESTAMPTZ DEFAULT NOW()\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"attribution_analysis-\uadc0\uc18d-\ubd84\uc11d",children:"attribution_analysis (\uadc0\uc18d \ubd84\uc11d)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE audit.attribution_analysis (\n    analysis_date     DATE PRIMARY KEY,\n    period_start      DATE NOT NULL,\n    period_end        DATE NOT NULL,\n    total_return      NUMERIC(10,6),\n    -- \ud329\ud130\ubcc4 \uae30\uc5ec\ub3c4\n    momentum_contrib  NUMERIC(10,6),\n    technical_contrib NUMERIC(10,6),\n    value_contrib     NUMERIC(10,6),\n    quality_contrib   NUMERIC(10,6),\n    flow_contrib      NUMERIC(10,6),        -- \uc218\uae09 \uae30\uc5ec\ub3c4 \u2b50\n    event_contrib     NUMERIC(10,6),\n    -- \uc139\ud130\ubcc4/\uc885\ubaa9\ubcc4 \uae30\uc5ec\ub3c4\n    sector_contrib    JSONB,                  -- {sector1: 0.02, ...}\n    stock_contrib     JSONB,                  -- {code1: 0.05, ...}\n    created_at        TIMESTAMPTZ DEFAULT NOW()\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"benchmark_data-\ubca4\uce58\ub9c8\ud06c",children:"benchmark_data (\ubca4\uce58\ub9c8\ud06c)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE audit.benchmark_data (\n    benchmark_date DATE NOT NULL,\n    benchmark_code VARCHAR(20) NOT NULL,     -- KOSPI, KOSDAQ\n    close_price    NUMERIC(12,2) NOT NULL,\n    daily_return   NUMERIC(10,6),\n    created_at     TIMESTAMPTZ DEFAULT NOW(),\n    PRIMARY KEY (benchmark_date, benchmark_code)\n);\n\nCREATE INDEX idx_benchmark_data_date ON audit.benchmark_data(benchmark_date);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"daily_pnl-\uc77c\ubcc4-\uc190\uc775",children:"daily_pnl (\uc77c\ubcc4 \uc190\uc775)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE audit.daily_pnl (\n    pnl_date          DATE PRIMARY KEY,\n    realized_pnl      BIGINT DEFAULT 0,       -- \uc2e4\ud604 \uc190\uc775\n    unrealized_pnl    BIGINT DEFAULT 0,       -- \ubbf8\uc2e4\ud604 \uc190\uc775\n    total_pnl         BIGINT,\n    daily_return      NUMERIC(10,6),\n    cumulative_return NUMERIC(10,6),\n    portfolio_value   BIGINT,\n    cash_balance      BIGINT,\n    created_at        TIMESTAMPTZ DEFAULT NOW()\n);\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ub370\uc774\ud130-\uc694\uad6c\uc0ac\ud56d-\ub9e4\ud551",children:"\ub370\uc774\ud130 \uc694\uad6c\uc0ac\ud56d \ub9e4\ud551"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\ub370\uc774\ud130"}),(0,t.jsx)(n.th,{children:"\ud14c\uc774\ube14"}),(0,t.jsx)(n.th,{children:"\ucee4\ubc84\ub9ac\uc9c0"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\uac00\uaca9 (OHLCV)"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"data.daily_prices"})}),(0,t.jsx)(n.td,{children:"100%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\uac70\ub798\ub7c9"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"data.daily_prices.volume"})}),(0,t.jsx)(n.td,{children:"100%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\uc2dc\uac00\ucd1d\uc561"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"data.market_cap"})}),(0,t.jsx)(n.td,{children:"95%+"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\uc7ac\ubb34\uc81c\ud45c"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"data.fundamentals"})}),(0,t.jsx)(n.td,{children:"80%+"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\ud22c\uc790\uc790 \uc218\uae09"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"data.investor_flow"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"80%+"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\uacf5\uc2dc"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"data.disclosures"})}),(0,t.jsx)(n.td,{children:"70%+"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ub124\uc774\ubc0d-\uaddc\uce59",children:"\ub124\uc774\ubc0d \uaddc\uce59"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\uad6c\ubd84"}),(0,t.jsx)(n.th,{children:"\uaddc\uce59"}),(0,t.jsx)(n.th,{children:"\uc608\uc2dc"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\uc2a4\ud0a4\ub9c8"}),(0,t.jsx)(n.td,{children:"\uc18c\ubb38\uc790, \ub2e8\uc218"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"data"}),", ",(0,t.jsx)(n.code,{children:"signals"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\ud14c\uc774\ube14"}),(0,t.jsx)(n.td,{children:"\uc18c\ubb38\uc790, \uc2a4\ub124\uc774\ud06c"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"investor_flow"}),", ",(0,t.jsx)(n.code,{children:"factor_scores"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\uceec\ub7fc"}),(0,t.jsx)(n.td,{children:"snake_case"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"created_at"}),", ",(0,t.jsx)(n.code,{children:"total_score"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\uc778\ub371\uc2a4"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"idx_\ud14c\uc774\ube14_\uceec\ub7fc"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"idx_prices_code_date"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PK"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"(stock_code, date)"})," \ubcf5\ud569\ud0a4"]}),(0,t.jsx)(n.td,{children:"\uc2dc\uacc4\uc5f4 \ub370\uc774\ud130 \ud45c\uc900"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc804\ub7b5",children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc804\ub7b5"}),"\n",(0,t.jsx)(n.h3,{id:"v10-\ub370\uc774\ud130-\ud604\ud669",children:"v10 \ub370\uc774\ud130 \ud604\ud669"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\ud56d\ubaa9"}),(0,t.jsx)(n.th,{children:"\uac12"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\ub370\uc774\ud130 \uae30\uac04"})}),(0,t.jsx)(n.td,{children:"2022-01-03 ~ 2026-01-09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\ucd1d \uc601\uc5c5\uc77c"})}),(0,t.jsx)(n.td,{children:"983\uc77c (\uc57d 4\ub144)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\uc885\ubaa9 \uc218"})}),(0,t.jsx)(n.td,{children:"2,835\uac1c (\ud65c\uc131)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\uac00\uaca9 \ub808\ucf54\ub4dc"})}),(0,t.jsx)(n.td,{children:"3,035,230 rows"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\uc218\uae09 \ub808\ucf54\ub4dc"})}),(0,t.jsx)(n.td,{children:"2,438,932 rows"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc21c\uc11c",children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc21c\uc11c"}),"\n",(0,t.jsx)(n.h4,{id:"phase-1-\uc2a4\ud0a4\ub9c8-\uc0dd\uc131",children:"Phase 1: \uc2a4\ud0a4\ub9c8 \uc0dd\uc131"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- 001_create_schemas.sql\nCREATE SCHEMA data;\nCREATE SCHEMA signals;\nCREATE SCHEMA selection;\nCREATE SCHEMA portfolio;\nCREATE SCHEMA execution;\nCREATE SCHEMA audit;\n"})}),"\n",(0,t.jsx)(n.h4,{id:"phase-2-data-\uc2a4\ud0a4\ub9c8-v10-\uc9c1\uc811-\uc774\uc804",children:"Phase 2: data \uc2a4\ud0a4\ub9c8 (v10 \uc9c1\uc811 \uc774\uc804)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- 002_create_data_tables.sql\n-- \ud14c\uc774\ube14 \uc0dd\uc131 (stocks, prices, investor_flow, fundamentals \ub4f1)\n\n-- 003_migrate_from_v10.sql\n-- v10 \ub370\uc774\ud130 \uc774\uc804 (INSERT INTO ... SELECT FROM ...)\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"v10 \u2192 v13 \ub9e4\ud551"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"market.stocks"})," \u2192 ",(0,t.jsx)(n.code,{children:"data.stocks"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"market.daily_prices"})," \u2192 ",(0,t.jsx)(n.code,{children:"data.daily_prices"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"market.investor_trading"})," \u2192 ",(0,t.jsx)(n.code,{children:"data.investor_flow"})," \u2b50"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"analysis.fundamentals"})," \u2192 ",(0,t.jsx)(n.code,{children:"data.fundamentals"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"phase-3-signals-\uc2a4\ud0a4\ub9c8-\uacc4\uc0b0-\ud544\uc694",children:"Phase 3: signals \uc2a4\ud0a4\ub9c8 (\uacc4\uc0b0 \ud544\uc694)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- 004_create_signals_tables.sql\n-- 005_calculate_flow_details.sql  (investor_flow \u2192 5D/20D \ub204\uc801)\n-- 006_calculate_technical.sql     (prices \u2192 MA, RSI, MACD)\n"})}),"\n",(0,t.jsx)(n.h4,{id:"phase-4-\ub098\uba38\uc9c0-\uc2a4\ud0a4\ub9c8",children:"Phase 4: \ub098\uba38\uc9c0 \uc2a4\ud0a4\ub9c8"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- 007_create_selection_tables.sql\n-- 008_create_portfolio_tables.sql\n-- 009_create_execution_tables.sql\n-- 010_create_audit_tables.sql\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uc2e4\ud589",children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud589"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# 1. \uc2a4\ud0a4\ub9c8 \uc0dd\uc131\npsql -U aegis_v13 -d aegis_v13 -f backend/migrations/001_create_schemas.sql\n\n# 2. \ud14c\uc774\ube14 \uc0dd\uc131\npsql -U aegis_v13 -d aegis_v13 -f backend/migrations/002_create_data_tables.sql\n\n# 3. \ub370\uc774\ud130 \uc774\uc804 (v10 \u2192 v13)\npsql -U aegis_v13 -d aegis_v13 -f backend/migrations/003_migrate_from_v10.sql\n\n# 4. \uc2dc\uadf8\ub110 \uacc4\uc0b0\npsql -U aegis_v13 -d aegis_v13 -f backend/migrations/004_create_signals_tables.sql\npsql -U aegis_v13 -d aegis_v13 -f backend/migrations/005_calculate_flow_details.sql\n\n# 5. \ub098\uba38\uc9c0 \uc2a4\ud0a4\ub9c8\npsql -U aegis_v13 -d aegis_v13 -f backend/migrations/006_*.sql\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\uac80\uc99d",children:"\uac80\uc99d"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- \ub808\ucf54\ub4dc \uc218 \ud655\uc778\nSELECT 'stocks' as table_name, COUNT(*) FROM data.stocks\nUNION ALL\nSELECT 'daily_prices', COUNT(*) FROM data.daily_prices\nUNION ALL\nSELECT 'investor_flow', COUNT(*) FROM data.investor_flow;\n\n-- \uc608\uc0c1 \uacb0\uacfc:\n-- stocks: 2,835\n-- daily_prices: 3,035,230\n-- investor_flow: 2,438,932\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ud5a5\ud6c4-\ud655\uc7a5-\uacc4\ud68d",children:"\ud5a5\ud6c4 \ud655\uc7a5 \uacc4\ud68d"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\uc2dc\uc2a4\ud15c \uc548\uc815\ud654 \ud6c4 \ucd94\uac00 \uc608\uc815\uc778 \uae30\ub2a5\ub4e4"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"1-investor_flow-\uc0c1\uc138-\ubd84\ub958",children:"1. investor_flow \uc0c1\uc138 \ubd84\ub958"}),"\n",(0,t.jsx)(n.p,{children:"\ud604\uc7ac 3\uac1c \uadf8\ub8f9(\uc678\uc778/\uae30\uad00/\uac1c\uc778)\uc5d0\uc11c 9\uac1c \ud22c\uc790\uc790 \uc720\ud615\uc73c\ub85c \ud655\uc7a5:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- \ud604\uc7ac (v13.0)\nforeign_net_qty, foreign_net_value,\ninst_net_qty, inst_net_value,\nindiv_net_qty, indiv_net_value\n\n-- \ud5a5\ud6c4 \ud655\uc7a5 (v13.x)\nforeign_net, foreign_qty,      -- \uc678\uad6d\uc778\ninst_net, inst_qty,            -- \uae30\uad00 \ud569\uacc4\nindividual_net, individual_qty, -- \uac1c\uc778\nfinancial_net,                  -- \uae08\uc735\ud22c\uc790\ninsurance_net,                  -- \ubcf4\ud5d8\ntrust_net,                      -- \ud22c\uc2e0\npension_net,                    -- \uc5f0\uae30\uae08\nbank_net,                       -- \uc740\ud589\nother_inst_net                  -- \uae30\ud0c0\uae30\uad00\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\ud544\uc694 \uc870\uac74"}),": \uc0c1\uc138 \uc218\uae09 \ub370\uc774\ud130 \uc18c\uc2a4 \ud655\ubcf4 (KRX/\uc99d\uad8c\uc0ac API)"]}),"\n",(0,t.jsx)(n.h3,{id:"2-fundamentals-\ud655\uc7a5-\uc9c0\ud45c",children:"2. fundamentals \ud655\uc7a5 \uc9c0\ud45c"}),"\n",(0,t.jsx)(n.p,{children:"\ud604\uc7ac 7\uac1c \ud575\uc2ec \uc9c0\ud45c\uc5d0\uc11c 20+ \uc9c0\ud45c\ub85c \ud655\uc7a5:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- \ud604\uc7ac (v13.0)\nper, pbr, roe, debt_ratio, revenue, operating_profit, net_profit\n\n-- \ud5a5\ud6c4 \ud655\uc7a5 (v13.x)\n-- \ubc38\ub958\uc5d0\uc774\uc158\npsr,                    -- Price to Sales\npcr,                    -- Price to Cash Flow\nev_ebitda,              -- EV/EBITDA\ndiv_yield,              -- \ubc30\ub2f9\uc218\uc775\ub960\n\n-- \uc8fc\ub2f9 \uc9c0\ud45c\neps,                    -- \uc8fc\ub2f9\uc21c\uc774\uc775\nbps,                    -- \uc8fc\ub2f9\uc21c\uc790\uc0b0\ndps,                    -- \uc8fc\ub2f9\ubc30\ub2f9\uae08\n\n-- \uc218\uc775\uc131\nroa,                    -- \ucd1d\uc790\uc0b0\uc774\uc775\ub960\nnpm,                    -- \uc21c\uc774\uc775\ub960\nopm,                    -- \uc601\uc5c5\uc774\uc775\ub960\n\n-- \uc548\uc815\uc131\ncurrent_ratio,          -- \uc720\ub3d9\ube44\uc728\n\n-- \uc131\uc7a5\uc131\nrevenue_growth,         -- \ub9e4\ucd9c \uc131\uc7a5\ub960\nprofit_growth           -- \uc774\uc775 \uc131\uc7a5\ub960\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\ud544\uc694 \uc870\uac74"}),": DART API \uc5f0\ub3d9 \uc644\ub8cc, \uc7ac\ubb34\uc81c\ud45c \ud30c\uc2f1 \ub85c\uc9c1 \uad6c\ud604"]}),"\n",(0,t.jsx)(n.h3,{id:"3-\uc2e4\uc2dc\uac04-\ub370\uc774\ud130-\uc9c0\uc6d0",children:"3. \uc2e4\uc2dc\uac04 \ub370\uc774\ud130 \uc9c0\uc6d0"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- \ud5a5\ud6c4 \ucd94\uac00 \ud14c\uc774\ube14\nCREATE TABLE data.realtime_prices (\n    stock_code    VARCHAR(20) NOT NULL,\n    timestamp     TIMESTAMPTZ NOT NULL,\n    price         NUMERIC(12,2),\n    volume        BIGINT,\n    bid_price     NUMERIC(12,2),\n    ask_price     NUMERIC(12,2),\n    PRIMARY KEY (stock_code, timestamp)\n);\n\nCREATE TABLE data.realtime_orderbook (\n    stock_code    VARCHAR(20) NOT NULL,\n    timestamp     TIMESTAMPTZ NOT NULL,\n    bid_prices    NUMERIC(12,2)[],\n    bid_volumes   BIGINT[],\n    ask_prices    NUMERIC(12,2)[],\n    ask_volumes   BIGINT[],\n    PRIMARY KEY (stock_code, timestamp)\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\ud544\uc694 \uc870\uac74"}),": \uc2e4\uc2dc\uac04 \uc2dc\uc138 API \uc5f0\ub3d9 (KIS WebSocket)"]}),"\n",(0,t.jsx)(n.h3,{id:"4-\ubc31\ud14c\uc2a4\ud2b8-\uc2a4\ud0a4\ub9c8",children:"4. \ubc31\ud14c\uc2a4\ud2b8 \uc2a4\ud0a4\ub9c8"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- \ud5a5\ud6c4 \ucd94\uac00 \uc2a4\ud0a4\ub9c8\nCREATE SCHEMA backtest;\n\nCREATE TABLE backtest.simulations (\n    id              SERIAL PRIMARY KEY,\n    name            VARCHAR(200),\n    start_date      DATE,\n    end_date        DATE,\n    initial_capital BIGINT,\n    strategy_params JSONB,\n    created_at      TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE TABLE backtest.simulation_trades (\n    simulation_id   INT REFERENCES backtest.simulations(id),\n    trade_date      DATE,\n    stock_code      VARCHAR(20),\n    action          VARCHAR(10),\n    price           NUMERIC(12,2),\n    qty             INT,\n    PRIMARY KEY (simulation_id, trade_date, stock_code)\n);\n\nCREATE TABLE backtest.simulation_results (\n    simulation_id   INT PRIMARY KEY REFERENCES backtest.simulations(id),\n    total_return    NUMERIC(10,6),\n    sharpe_ratio    NUMERIC(10,6),\n    max_drawdown    NUMERIC(10,6),\n    metrics         JSONB\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\ud544\uc694 \uc870\uac74"}),": \ubc31\ud14c\uc2a4\ud2b8 \uc5d4\uc9c4 \uad6c\ud604"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Prev"}),": ",(0,t.jsx)(n.a,{href:"/aegis-v13/docs/guide/frontend/folder-structure",children:"Frontend Folder Structure"}),"\n",(0,t.jsx)(n.strong,{children:"Next"}),": ",(0,t.jsx)(n.a,{href:"/aegis-v13/docs/guide/overview/getting-started",children:"Getting Started"})]})]})}function _(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);