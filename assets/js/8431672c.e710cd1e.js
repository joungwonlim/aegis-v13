"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[1659],{4744(n,e,t){t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"guide/architecture/contracts","title":"Contracts","description":"\ud575\uc2ec \ud0c0\uc785\uacfc \uc778\ud130\ud398\uc774\uc2a4","source":"@site/docs/guide/architecture/contracts.md","sourceDirName":"guide/architecture","slug":"/guide/architecture/contracts","permalink":"/aegis-v13/docs/guide/architecture/contracts","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Contracts","description":"\ud575\uc2ec \ud0c0\uc785\uacfc \uc778\ud130\ud398\uc774\uc2a4"},"sidebar":"guideSidebar","previous":{"title":"Data Flow","permalink":"/aegis-v13/docs/guide/architecture/data-flow"},"next":{"title":"Data Requirements","permalink":"/aegis-v13/docs/guide/architecture/data-requirements"}}');var o=t(4848),s=t(8453);const a={sidebar_position:3,title:"Contracts",description:"\ud575\uc2ec \ud0c0\uc785\uacfc \uc778\ud130\ud398\uc774\uc2a4"},i="Contracts",c={},l=[{value:"4\ub300 \ud575\uc2ec Contract",id:"4\ub300-\ud575\uc2ec-contract",level:2},{value:"1. DataQualitySnapshot",id:"1-dataqualitysnapshot",level:2},{value:"2. Universe",id:"2-universe",level:2},{value:"3. SignalSet",id:"3-signalset",level:2},{value:"3.5 RankedStock",id:"35-rankedstock",level:2},{value:"4. TargetPortfolio",id:"4-targetportfolio",level:2},{value:"\ub808\uc774\uc5b4 \uc778\ud130\ud398\uc774\uc2a4",id:"\ub808\uc774\uc5b4-\uc778\ud130\ud398\uc774\uc2a4",level:2},{value:"Brain Orchestrator",id:"brain-orchestrator",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"contracts",children:"Contracts"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"\ud575\uc2ec \ud0c0\uc785\uacfc \uc778\ud130\ud398\uc774\uc2a4"}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"4\ub300-\ud575\uc2ec-contract",children:"4\ub300 \ud575\uc2ec Contract"}),"\n",(0,o.jsx)(e.p,{children:"\ub808\uc774\uc5b4 \uac04 \ub370\uc774\ud130 \uc804\ub2ec\uc5d0 \uc0ac\uc6a9\ub418\ub294 \ud575\uc2ec \ud0c0\uc785\uc785\ub2c8\ub2e4."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"DataQualitySnapshot \u2192 Universe \u2192 SignalSet \u2192 TargetPortfolio\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"1-dataqualitysnapshot",children:"1. DataQualitySnapshot"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\uc6a9\ub3c4"}),": S0 \u2192 S1 \ub370\uc774\ud130 \ud488\uc9c8 \uc815\ubcf4 \uc804\ub2ec"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'// internal/contracts/data.go\n\ntype DataQualitySnapshot struct {\n    Date         time.Time         `json:"date"`\n    TotalStocks  int               `json:"total_stocks"`\n    ValidStocks  int               `json:"valid_stocks"`\n    Coverage     map[string]float64 `json:"coverage"`  // \ub370\uc774\ud130\ubcc4 \ucee4\ubc84\ub9ac\uc9c0\n    QualityScore float64           `json:"quality_score"`\n}\n'})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"2-universe",children:"2. Universe"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\uc6a9\ub3c4"}),": S1 \u2192 S2 \ud22c\uc790 \uac00\ub2a5 \uc885\ubaa9 \uc804\ub2ec"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'// internal/contracts/universe.go\n\ntype Universe struct {\n    Date       time.Time         `json:"date"`\n    Stocks     []string          `json:"stocks"`\n    Excluded   map[string]string `json:"excluded"`  // \uc81c\uc678 \uc885\ubaa9: \uc0ac\uc720\n    TotalCount int               `json:"total_count"`\n}\n'})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"3-signalset",children:"3. SignalSet"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\uc6a9\ub3c4"}),": S2 \u2192 S3/S4 \uc2dc\uadf8\ub110 \ub370\uc774\ud130 \uc804\ub2ec"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'// internal/contracts/signals.go\n\ntype SignalSet struct {\n    Date    time.Time                `json:"date"`\n    Signals map[string]*StockSignals `json:"signals"`\n}\n\ntype StockSignals struct {\n    Code       string  `json:"code"`\n\n    // \uc2dc\uadf8\ub110 \uc810\uc218 (-1.0 ~ 1.0)\n    Momentum   float64 `json:"momentum"`\n    Technical  float64 `json:"technical"`\n    Value      float64 `json:"value"`\n    Quality    float64 `json:"quality"`\n    Flow       float64 `json:"flow"`    // \uc218\uae09 \uc2dc\uadf8\ub110\n    Event      float64 `json:"event"`\n\n    // \uc6d0\ubcf8 \ub370\uc774\ud130\n    Details    SignalDetails `json:"details"`\n    Events     []EventSignal `json:"events"`\n    UpdatedAt  time.Time     `json:"updated_at"`\n}\n\ntype SignalDetails struct {\n    // Momentum\n    Return1M   float64 `json:"return_1m"`\n    Return3M   float64 `json:"return_3m"`\n    VolumeRate float64 `json:"volume_rate"`\n\n    // Technical\n    RSI        float64 `json:"rsi"`\n    MACD       float64 `json:"macd"`\n    MA20Cross  int     `json:"ma20_cross"`\n\n    // Value\n    PER        float64 `json:"per"`\n    PBR        float64 `json:"pbr"`\n    PSR        float64 `json:"psr"`\n\n    // Quality\n    ROE        float64 `json:"roe"`\n    DebtRatio  float64 `json:"debt_ratio"`\n\n    // Flow (\uc218\uae09)\n    ForeignNet5D  int64 `json:"foreign_net_5d"`\n    ForeignNet20D int64 `json:"foreign_net_20d"`\n    InstNet5D     int64 `json:"inst_net_5d"`\n    InstNet20D    int64 `json:"inst_net_20d"`\n}\n\ntype EventSignal struct {\n    Type      string    `json:"type"`\n    Score     float64   `json:"score"`\n    Source    string    `json:"source"`\n    Timestamp time.Time `json:"timestamp"`\n}\n'})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"35-rankedstock",children:"3.5 RankedStock"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\uc6a9\ub3c4"}),": S4 \u2192 S5 \ub7ad\ud0b9 \uacb0\uacfc \uc804\ub2ec"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'// internal/contracts/ranked.go\n\ntype RankedStock struct {\n    Code       string      `json:"code"`\n    Name       string      `json:"name"`\n    Rank       int         `json:"rank"`\n    TotalScore float64     `json:"total_score"`\n    Scores     ScoreDetail `json:"scores"`\n}\n\ntype ScoreDetail struct {\n    Momentum  float64 `json:"momentum"`\n    Technical float64 `json:"technical"`\n    Value     float64 `json:"value"`\n    Quality   float64 `json:"quality"`\n    Flow      float64 `json:"flow"`   // \uc218\uae09\n    Event     float64 `json:"event"`\n}\n'})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"4-targetportfolio",children:"4. TargetPortfolio"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\uc6a9\ub3c4"}),": S5 \u2192 S6 \ubaa9\ud45c \ud3ec\ud2b8\ud3f4\ub9ac\uc624 \uc804\ub2ec"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'// internal/contracts/portfolio.go\n\ntype TargetPortfolio struct {\n    Date      time.Time        `json:"date"`\n    Positions []TargetPosition `json:"positions"`\n    Cash      float64          `json:"cash"`\n}\n\ntype TargetPosition struct {\n    Code      string  `json:"code"`\n    Name      string  `json:"name"`\n    Weight    float64 `json:"weight"`\n    TargetQty int     `json:"target_qty"`\n    Action    Action  `json:"action"`\n    Reason    string  `json:"reason"`\n}\n\ntype Action string\n\nconst (\n    ActionBuy  Action = "BUY"\n    ActionSell Action = "SELL"\n    ActionHold Action = "HOLD"\n)\n'})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"\ub808\uc774\uc5b4-\uc778\ud130\ud398\uc774\uc2a4",children:"\ub808\uc774\uc5b4 \uc778\ud130\ud398\uc774\uc2a4"}),"\n",(0,o.jsx)(e.p,{children:"\uac01 \ub808\uc774\uc5b4\uac00 \uad6c\ud604\ud574\uc57c \ud560 \uc778\ud130\ud398\uc774\uc2a4\uc785\ub2c8\ub2e4."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:"// internal/contracts/interfaces.go\n\n// S0: \ub370\uc774\ud130 \ud488\uc9c8 \uac80\uc99d\ntype QualityGate interface {\n    Check(ctx context.Context, date time.Time) (*DataQualitySnapshot, error)\n}\n\n// S1: \uc720\ub2c8\ubc84\uc2a4 \uc0dd\uc131\ntype UniverseBuilder interface {\n    Build(ctx context.Context, snapshot *DataQualitySnapshot) (*Universe, error)\n}\n\n// S2: \uc2dc\uadf8\ub110 \uc0dd\uc131\ntype SignalBuilder interface {\n    Build(ctx context.Context, universe *Universe) (*SignalSet, error)\n}\n\n// S3: \uc2a4\ud06c\ub9ac\ub2dd\ntype Screener interface {\n    Screen(ctx context.Context, signals *SignalSet) ([]string, error)\n}\n\n// S4: \ub7ad\ud0b9\ntype Ranker interface {\n    Rank(ctx context.Context, codes []string, signals *SignalSet) ([]RankedStock, error)\n}\n\n// S5: \ud3ec\ud2b8\ud3f4\ub9ac\uc624 \uad6c\uc131\ntype PortfolioConstructor interface {\n    Construct(ctx context.Context, ranked []RankedStock) (*TargetPortfolio, error)\n}\n\n// S6: \uc8fc\ubb38 \uc2e4\ud589\ntype ExecutionPlanner interface {\n    Plan(ctx context.Context, target *TargetPortfolio) ([]Order, error)\n}\n\n// S7: \uc131\uacfc \ubd84\uc11d\ntype Auditor interface {\n    Analyze(ctx context.Context, period string) (*PerformanceReport, error)\n}\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"brain-orchestrator",children:"Brain Orchestrator"}),"\n",(0,o.jsxs)(e.p,{children:["Brain\uc740 ",(0,o.jsx)(e.strong,{children:"\ub85c\uc9c1 \uc5c6\uc774"})," \uc704 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc21c\uc11c\ub300\ub85c \ud638\ucd9c\ub9cc \ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:"// internal/brain/orchestrator.go\n\ntype Orchestrator struct {\n    quality   QualityGate\n    universe  UniverseBuilder\n    signals   SignalBuilder\n    screener  Screener\n    ranker    Ranker\n    portfolio PortfolioConstructor\n    executor  ExecutionPlanner\n}\n\nfunc (o *Orchestrator) Run(ctx context.Context) error {\n    // S0\n    snapshot, err := o.quality.Check(ctx, time.Now())\n    if err != nil { return err }\n\n    // S1\n    universe, err := o.universe.Build(ctx, snapshot)\n    if err != nil { return err }\n\n    // S2\n    signals, err := o.signals.Build(ctx, universe)\n    if err != nil { return err }\n\n    // S3\n    passed, err := o.screener.Screen(ctx, signals)\n    if err != nil { return err }\n\n    // S4\n    ranked, err := o.ranker.Rank(ctx, passed, signals)\n    if err != nil { return err }\n\n    // S5\n    target, err := o.portfolio.Construct(ctx, ranked)\n    if err != nil { return err }\n\n    // S6\n    _, err = o.executor.Plan(ctx, target)\n    return err\n}\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Prev"}),": ",(0,o.jsx)(e.a,{href:"/aegis-v13/docs/guide/architecture/data-flow",children:"Data Flow"}),"\n",(0,o.jsx)(e.strong,{children:"Next"}),": ",(0,o.jsx)(e.a,{href:"/aegis-v13/docs/guide/backend/folder-structure",children:"Backend Folder Structure"})]})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},8453(n,e,t){t.d(e,{R:()=>a,x:()=>i});var r=t(6540);const o={},s=r.createContext(o);function a(n){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);